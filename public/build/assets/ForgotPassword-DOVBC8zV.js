import{j as o,a as e,M as b,U as v,F as f,h as y}from"./app-DvzcsS5J.js";import{u as C,r as m,G as u,a as N,B as a,d as T,T as S}from"./vendor-DrHmFQFl.js";import{G as E,l as j,b as w,d as I,A as M}from"./App-BhpBsmfq.js";import{d as O,a as g}from"./Password-BHByTunQ.js";import{i as h}from"./chunk-IR2E3HZF-B_9GN64u.js";import"./useFormValidationState-HbQXXc6L.js";import"./useLabel-NnqZEut0.js";function L(){C();const[r,d]=m.useState({email:"",otp:"",newPassword:"",confirmPassword:""}),[p,c]=m.useState(!1),[n,i]=m.useState({}),[l,x]=m.useState(1),P=s=>{s.preventDefault(),c(!0),l===1?axios.post(route("password.email"),{email:r.email}).then(t=>{i({}),x(2)}).catch(t=>{console.error(t),console.error("Password reset OTP request failed:",t.response.data.errors),i(t.response.data.errors)}).finally(()=>{c(!1)}):l===2?axios.post(route("password.verify"),{email:r.email,otp:r.otp}).then(t=>{i({}),x(3)}).catch(t=>{console.error(t),console.error("OTP verification failed:",t.response.data.errors),i(t.response.data.errors)}).finally(()=>{c(!1)}):l===3&&axios.post(route("password.reset"),{email:r.email,newPassword:r.newPassword,newPassword_confirmation:r.confirmPassword}).then(t=>{y.get(route("login"))}).catch(t=>{console.error(t),console.error("Password reset failed:",t.response.data.errors),i(t.response.data.errors)}).finally(()=>{c(!1)})};return o(M,{children:[e(b,{title:"Forgot Password"}),e(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:2},children:e(u,{container:!0,spacing:2,justifyContent:"center",children:e(u,{item:!0,xs:12,md:8,lg:6,xl:5,children:e(E,{children:o(N,{children:[e(a,{textAlign:"center",children:e(v,{style:{alignItems:"center",display:"inline-flex"},href:route("dashboard"),className:"d-inline-block auth-logo",children:e("img",{src:j,alt:"Logo",className:"h-24 md:h-40 sm:h-40 xs:h-10"})})}),e(a,{mt:4,children:o("form",{onSubmit:P,children:[l===1&&o(f,{children:[e(a,{mb:3,children:e(h,{isClearable:!0,type:"email",label:"Enter your email address",variant:"underlined",id:"email",name:"email",value:r.email||"",onChange:s=>{d({...r,email:s.target.value})},required:!0,fullWidth:!0,isInvalid:!!n.email,errorMessage:n.email,placeholder:"you@example.com",labelPlacement:"outside",startContent:e(O,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e(a,{mt:4,children:e(w,{fullWidth:!0,variant:"bordered",color:"primary",type:"submit",isLoading:p,children:"Send OTP"})})]}),l===2&&o(f,{children:[e(a,{mb:3,children:e(h,{isClearable:!0,type:"text",label:"Enter OTP sent to your email",variant:"underlined",id:"otp",name:"otp",value:r.otp||"",onChange:s=>{d({...r,otp:s.target.value})},required:!0,fullWidth:!0,isInvalid:!!n.otp,errorMessage:n.otp,placeholder:"Enter the OTP",labelPlacement:"outside",startContent:e(I,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e(a,{mt:4,children:e(w,{fullWidth:!0,variant:"bordered",color:"primary",type:"submit",isLoading:p,children:"Verify OTP"})})]}),l===3&&o(f,{children:[e(a,{mb:4,children:e(h,{label:"New Password",id:"newPassword",name:"newPassword",variant:"underlined",startContent:e(g,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"}),type:"password",value:r.newPassword||"",onChange:s=>{d({...r,newPassword:s.target.value})},required:!0,isInvalid:!!n.newPassword,errorMessage:n.newPassword,placeholder:"Enter new password",labelPlacement:"outside"})}),e(a,{mb:4,children:e(h,{isClearable:!0,type:"password",label:"Confirm New Password",variant:"underlined",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword||"",onChange:s=>{d({...r,confirmPassword:s.target.value})},required:!0,fullWidth:!0,isInvalid:!!n.confirmPassword,errorMessage:n.confirmPassword,placeholder:"Confirm new password",labelPlacement:"outside",startContent:e(g,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e(a,{mt:4,children:e(w,{fullWidth:!0,variant:"bordered",color:"primary",type:"submit",isLoading:p,children:"Reset Password"})})]})]})})]})})})})}),e("footer",{children:e(T,{children:e(u,{container:!0,justifyContent:"center",children:e(u,{item:!0,xs:12,textAlign:"center",children:o(S,{variant:"body2",color:"text.secondary",children:["Â© ",new Date().getFullYear()," Emam Hosen. Crafted with ",e("i",{className:"mdi mdi-heart text-danger"})]})})})})})]})}export{L as default};
