import{r as o,c as x,b as t,j as e,Q as V,F as $,g as X}from"./app-DTfQ0ryi.js";import{e as v,u as J,a as Y,G as ee,c as re,T as te,I as ae,am as p,L as b,A as le}from"./App-BmXwj8rC.js";import{C as B}from"./CircularProgress-DvOfCZCI.js";import{F as se}from"./ChartBarIcon-C6Uvyg1o.js";import{B as n}from"./Button-B8sGAaMo.js";import{D as oe}from"./Download-UUiELRB0.js";import{C as O}from"./CheckCircle-BGOKCnDY.js";import{F as ie}from"./DocumentArrowDownIcon-DR1ZFd3k.js";import{A as ne}from"./Alert-DGsWu0oR.js";import"./app-B6LlI8BB.js";import"./useSlot-Dnu9yBGn.js";function de({title:d,titleId:c,...g},u){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":c},g),d?o.createElement("title",{id:c},d):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const ce=o.forwardRef(de),U=v(x.jsx("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"}),"Speed"),me=v(x.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),he=v(x.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),pe=({auth:d,title:c="Performance Dashboard"})=>{var k,y,C,F,S,T,j,P,L,I,R,z,M,A;const g=J();Y(g.breakpoints.down("md"));const[u,G]=o.useState(!0),[H,f]=o.useState(!1),[l,Q]=o.useState(null),[_,w]=o.useState([]),[ge,ue]=o.useState("24h"),m=async()=>{try{f(!0);const a=await fetch("/storage/app/performance/baseline.json");let s=null;a.ok&&(s=await a.json());const r=await fetch("/storage/app/performance/comparison.json");let i=null;r.ok&&(i=await r.json());const E=await fetch("/storage/app/reports/performance-export.json");let W=null;E.ok&&(W=await E.json()),Q({baseline:s,comparison:i,report:W,lastUpdated:new Date});const h=[];s&&(s.overall.performanceScore<70&&h.push({type:"error",message:`Performance score is below threshold: ${s.overall.performanceScore}/100`}),s.overall.totalIssues>0&&h.push({type:"warning",message:`${s.overall.totalIssues} performance issues detected`})),i&&i.summary.regressions.length>0&&h.push({type:"error",message:`${i.summary.regressions.length} performance regressions detected`}),w(h)}catch(a){console.error("Failed to fetch performance data:",a),w([{type:"error",message:"Failed to load performance data. Please check if performance monitoring is running."}])}finally{f(!1),G(!1)}};o.useEffect(()=>{m();const a=setInterval(m,5*60*1e3);return()=>clearInterval(a)},[]);const D=async()=>{var a;try{(await fetch("/api/performance/generate-report",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content")}})).ok&&await m()}catch(s){console.error("Failed to generate report:",s)}},N=()=>{const a=document.createElement("a");a.href="/storage/app/reports/performance-export.json",a.download=`glass-erp-performance-${new Date().toISOString().split("T")[0]}.json`,a.click()},Z=({score:a,size:s=120})=>{const r=i=>i>=90?"#10b981":i>=70?"#f59e0b":"#ef4444";return t("div",{className:"relative inline-flex",children:[e(B,{variant:"determinate",value:a,size:s,thickness:4,sx:{color:r(a)}}),t("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[e("div",{className:"text-3xl font-bold",style:{color:r(a)},children:a}),e("div",{className:"text-xs text-gray-400",children:"/100"})]})]})},q=({vitals:a})=>{if(!a)return null;const s=[{name:"FCP",value:a.FCP,unit:"ms",threshold:1800,label:"First Contentful Paint"},{name:"LCP",value:a.LCP,unit:"ms",threshold:2500,label:"Largest Contentful Paint"},{name:"FID",value:a.FID,unit:"ms",threshold:100,label:"First Input Delay"},{name:"INP",value:a.INP||0,unit:"ms",threshold:200,label:"Interaction to Next Paint"},{name:"CLS",value:a.CLS,unit:"",threshold:.1,label:"Cumulative Layout Shift"},{name:"TTFB",value:a.TTFB,unit:"ms",threshold:800,label:"Time to First Byte"}];return e("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:s.map(r=>t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 text-center",children:[e("div",{className:"text-sm font-medium text-gray-400 mb-2",children:r.name}),t("div",{className:`text-2xl font-bold mb-1 ${r.value<=r.threshold?"text-green-400":"text-red-400"}`,children:[r.name==="CLS"?r.value.toFixed(3):Math.round(r.value),e("span",{className:"text-xs ml-1",children:r.unit})]}),e("div",{className:"text-xs text-gray-400 mb-2",children:r.label}),e(b,{size:"small",label:r.value<=r.threshold?"Good":"Needs Work",color:r.value<=r.threshold?"success":"error"})]},r.name))})},K=({features:a})=>a?e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(a).map(([s,r])=>t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4",children:[t("div",{className:"flex justify-between items-center mb-3",children:[e("div",{className:"text-lg font-semibold text-white",children:s}),e(b,{size:"small",label:r.priority,color:r.priority==="high"?"error":r.priority==="medium"?"warning":"default"})]}),t("div",{className:`text-3xl font-bold mb-2 ${r.averageLoadTime<=r.target?"text-green-400":"text-orange-400"}`,children:[Math.round(r.averageLoadTime),"ms"]}),t("div",{className:"text-sm text-gray-400 mb-3",children:["Target: ",r.target,"ms | Routes: ",Object.keys(r.routes).length]}),e(b,{size:"small",icon:r.averageLoadTime<=r.target?e(O,{}):e(he,{}),label:r.averageLoadTime<=r.target?"Meeting Target":"Exceeds Target",color:r.averageLoadTime<=r.target?"success":"warning"})]},s))}):null;return u?t($,{children:[e(V,{title:c}),e("div",{className:"min-h-screen flex items-center justify-center",children:e(B,{size:60})})]}):t($,{children:[e(V,{title:c}),e("div",{className:"min-h-screen p-2 sm:p-4 md:p-6",children:e("div",{className:"mx-auto max-w-7xl",children:e(ee,{in:!0,timeout:800,children:e("div",{children:t(re,{children:[t("div",{className:"relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-pink-600/20"}),e("div",{className:"relative px-6 py-8",children:t("div",{className:"flex flex-col gap-6",children:[t("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[t("div",{className:"flex items-center gap-4",children:[e("div",{className:"p-3 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-2xl backdrop-blur-sm border border-white/10",children:e(se,{className:"w-8 h-8 text-blue-400"})}),t("div",{children:[e("h1",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"ðŸš€ Performance Monitor"}),e("p",{className:"text-gray-400 mt-1 text-sm md:text-base",children:"Real-time performance monitoring and optimization insights"})]})]}),t("div",{className:"flex gap-2 flex-wrap",children:[e(te,{title:"Refresh Data",children:e(ae,{onClick:m,disabled:H,className:"text-blue-400 hover:bg-blue-500/10",children:e(X,{className:"w-5 h-5"})})}),e(n,{variant:"outlined",startIcon:e(me,{}),onClick:D,size:"small",className:"border-blue-400/50 text-blue-400 hover:bg-blue-500/10",children:"Generate Report"}),e(n,{variant:"outlined",startIcon:e(oe,{}),onClick:N,size:"small",className:"border-purple-400/50 text-purple-400 hover:bg-purple-500/10",children:"Export"})]})]}),e(p,{in:!0,timeout:1e3,children:t("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 bg-blue-500/20 rounded-lg group-hover:bg-blue-500/30 transition-colors",children:e(U,{className:"w-5 h-5 text-blue-400"})}),t("div",{children:[e("div",{className:"text-xl font-bold text-blue-400",children:((y=(k=l==null?void 0:l.baseline)==null?void 0:k.overall)==null?void 0:y.performanceScore)||0}),e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Performance Score"})]})]})}),e("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 bg-green-500/20 rounded-lg group-hover:bg-green-500/30 transition-colors",children:e(O,{className:"w-5 h-5 text-green-400"})}),t("div",{children:[e("div",{className:"text-xl font-bold text-green-400",children:((F=(C=l==null?void 0:l.baseline)==null?void 0:C.overall)==null?void 0:F.totalIssues)||0}),e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Issues Detected"})]})]})}),e("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 bg-purple-500/20 rounded-lg group-hover:bg-purple-500/30 transition-colors",children:e(ce,{className:"w-5 h-5 text-purple-400"})}),t("div",{children:[e("div",{className:"text-xl font-bold text-purple-400",children:((j=(T=(S=l==null?void 0:l.comparison)==null?void 0:S.summary)==null?void 0:T.regressions)==null?void 0:j.length)||0}),e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Regressions"})]})]})}),e("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 bg-orange-500/20 rounded-lg group-hover:bg-orange-500/30 transition-colors",children:e(ie,{className:"w-5 h-5 text-orange-400"})}),t("div",{children:[e("div",{className:"text-lg font-bold text-orange-400",children:((P=l==null?void 0:l.lastUpdated)==null?void 0:P.toLocaleTimeString())||"Never"}),e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Last Updated"})]})]})})]})})]})})]}),t("div",{className:"px-6 pb-6",children:[_.map((a,s)=>e(ne,{severity:a.type,className:"mb-4",children:a.message},s)),e(p,{in:!0,timeout:1200,children:t("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:[e("div",{className:"lg:col-span-1",children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 text-center",children:[e("div",{className:"text-lg font-semibold text-white mb-4",children:"Overall Performance"}),e(Z,{score:((I=(L=l==null?void 0:l.baseline)==null?void 0:L.overall)==null?void 0:I.performanceScore)||0}),t("div",{className:"text-xs text-gray-400 mt-4",children:["Last Updated: ",(R=l==null?void 0:l.lastUpdated)==null?void 0:R.toLocaleTimeString()]})]})}),e("div",{className:"lg:col-span-3",children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6",children:[e("div",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ“Š Core Web Vitals"}),e(q,{vitals:(M=(z=l==null?void 0:l.baseline)==null?void 0:z.overall)==null?void 0:M.coreWebVitals})]})})]})}),e(p,{in:!0,timeout:1400,children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 mb-6",children:[e("div",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ“¦ Feature Module Performance"}),e(K,{features:(A=l==null?void 0:l.baseline)==null?void 0:A.features})]})}),e(p,{in:!0,timeout:1600,children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6",children:[e("div",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ”§ Quick Actions"}),t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e(n,{fullWidth:!0,variant:"outlined",startIcon:e(U,{}),onClick:()=>window.open("/storage/app/reports/performance-dashboard.html","_blank"),className:"border-blue-400/50 text-blue-400 hover:bg-blue-500/10",children:"View Full Dashboard"}),e(n,{fullWidth:!0,variant:"outlined",onClick:()=>window.open("/storage/app/reports/technical-report.md","_blank"),className:"border-green-400/50 text-green-400 hover:bg-green-500/10",children:"Technical Report"}),e(n,{fullWidth:!0,variant:"outlined",onClick:()=>window.open("/storage/app/reports/executive-summary.md","_blank"),className:"border-purple-400/50 text-purple-400 hover:bg-purple-500/10",children:"Executive Summary"}),e(n,{fullWidth:!0,variant:"outlined",onClick:N,className:"border-orange-400/50 text-orange-400 hover:bg-orange-500/10",children:"Download Data"})]})]})})]})]})})})})})]})};pe.layout=d=>e(le,{children:d});export{pe as default};
