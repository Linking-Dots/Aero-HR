import{r as i,j as e,b as r,Q as R,e as N,f as x,g as Y,F as A,h as B}from"./app-DonvnZU7.js";import{u as D,a as S,h as T,F as h,B as j,c as P,j as _,k as M,d as n,G as $,A as G}from"./App-D8R5IMfu.js";import{P as z}from"./PageHeader-D9DlS159.js";import{S as H}from"./StatsCards-CVKke0sC.js";import{F as Q}from"./ClipboardDocumentListIcon-DXulMejM.js";import{F}from"./DocumentChartBarIcon-B-ujzHFZ.js";import{F as u}from"./ChartBarIcon-CXqVJOFG.js";import{C as I}from"./CircularProgress-sVo7MHgs.js";import{s as O,l as U}from"./chunk-2GIFKCNQ-CYYXuwvu.js";import{t as W,a as q,b as J,c as V,d as X,e as Z}from"./chunk-F3UDT23P-DuOg-nxE.js";import"./app-Ce0FNRT8.js";import"./chunk-D5XJWRAV-EwiD_cx6.js";import"./chunk-7F3ZLNJ6-yRl2fXtd.js";import"./useHasTabbableChild-CeLJk8Pb.js";const K=({title:c,allUsers:ee,columns:o,data:t})=>{const p=D(),b=S(p.breakpoints.down("sm"));S(p.breakpoints.down("md"));const[l,L]=i.useState(new Date().getFullYear()),[f,g]=i.useState(!1),C=i.useMemo(()=>{const a=new Date().getFullYear();return Array.from({length:a-1900+1},(s,m)=>1900+m).reverse()},[]),k=i.useMemo(()=>{const a=t?t.length:0,s=t?t.reduce((m,E)=>m+Object.values(E).reduce((y,d)=>typeof d=="number"&&d>0?y+d:y,0),0):0;return[{title:"Total Employees",value:a,icon:e(T,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Employees in summary"},{title:"Total Leaves",value:s,icon:e(Q,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Leave days taken"},{title:"Year",value:l,icon:e(h,{className:"w-5 h-5"}),color:"text-green-400",description:"Current year view"},{title:"Leave Types",value:o?o.length-2:0,icon:e(F,{className:"w-5 h-5"}),color:"text-purple-400",description:"Available leave types"}]},[t,l,o]),v=a=>{L(Number(a)),w(Number(a))},w=a=>{g(!0),B.Inertia.get(route("leave.summary"),{year:a},{preserveState:!0,replace:!0,onFinish:()=>g(!1)})};return i.useEffect(()=>{},[]),r(A,{children:[e(R,{title:c||"Leave Summary"}),r(j,{sx:{display:"flex",justifyContent:"center",p:2},children:["        ",e($,{in:!0,children:e(P,{children:r(z,{title:"Leave Summary",subtitle:"Annual leave analytics and employee summaries",icon:e(u,{className:"w-8 h-8"}),variant:"gradient",actionButtons:[{label:"Current Year",icon:e(h,{className:"w-4 h-4"}),onPress:()=>v(new Date().getFullYear()),className:_.primaryButton},{label:"Refresh",icon:e(Y,{className:"w-4 h-4"}),onPress:()=>w(l),isDisabled:f,variant:"bordered",className:_.secondaryButton}],children:["              ",r("div",{className:"p-6",children:[e(H,{stats:k,className:"mb-6"}),e("div",{className:"mb-6",children:r("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e(O,{label:"Select Year",variant:"bordered",selectedKeys:[String(l)],onSelectionChange:a=>{const s=Array.from(a)[0];s&&v(s)},startContent:e(h,{className:"w-4 h-4"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},size:b?"sm":"md",children:C.map(a=>e(U,{value:a,children:String(a)},a))})}),e("div",{className:"flex gap-2 flex-wrap",children:r(M,{startContent:e(F,{className:"w-4 h-4"}),variant:"flat",color:"primary",size:b?"sm":"md",className:"bg-white/10 backdrop-blur-md border-white/20",children:[t?t.length:0," employees"]})})]})}),r("div",{className:"min-h-96",children:[r(n,{variant:"h6",className:"mb-4 flex items-center gap-2",children:[e(u,{className:"w-5 h-5"}),"Employee Leave Summary"]}),f?e(N,{className:"bg-white/10 backdrop-blur-md border-white/20",children:r(x,{className:"text-center py-12",children:[e(I,{size:40}),e(n,{className:"mt-4",color:"textSecondary",children:"Loading leave summary..."})]})}):t&&t.length>0?e("div",{className:"overflow-hidden rounded-lg",children:e("div",{style:{maxHeight:"75vh",overflowY:"auto"},children:r(W,{selectionMode:"multiple",selectionBehavior:"toggle",isStriped:!0,removeWrapper:!0,isHeaderSticky:!0,"aria-label":"Leave Summary Table",classNames:{wrapper:"bg-white/10 backdrop-blur-md border-white/20",th:"bg-white/20 text-default-foreground",td:"border-white/10"},children:[e(q,{columns:o.map(a=>({name:a,uid:a})),children:a=>e(J,{align:"center",children:a.name},a.uid)}),e(V,{items:t,children:a=>e(X,{children:s=>e(Z,{style:{whiteSpace:"nowrap",textAlign:"center"},children:a[s]!==void 0&&a[s]!==null?a[s]:""})},a["SL NO"])})]})})}):e(N,{className:"bg-white/10 backdrop-blur-md border-white/20",children:r(x,{className:"text-center py-12",children:[e(u,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e(n,{variant:"h6",className:"mb-2",children:"No Leave Data Found"}),r(n,{color:"textSecondary",children:["No leave summary data available for ",l,"."]})]})})]})]})]})})})]})]})};K.layout=c=>e(G,{children:c});export{K as default};
