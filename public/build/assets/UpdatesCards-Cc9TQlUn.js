import{V as Ie,c as We,a as f,j as F,F as je}from"./app-CBXU4Fj7.js";import{r as l,s as I,R as pe,a6 as Oe,G as N,B as k,g as ve,a as me,T as B,u as Ue,e as Ve,D as Ke,ai as ze}from"./vendor-CHZiis0L.js";import{t as Ye,k as qe,i as ge,y as Je,c as ee,z as Qe,f as he,v as Xe,$ as ie,u as Ze,m as et,C as tt,D as rt,o as nt,e as U,n as de,E as ot,G as $e}from"./App-Cq_fR9D2.js";import{d as D}from"./dayjs.min-CCrDcysA.js";import{i as at}from"./isBetween-D-3WWM2t.js";import{b as st,A as it,a as ye}from"./chunk-A6PX3NG3-DxH9Wog7.js";import{s as ce}from"./chunk-TLYTI3QM-DuBP9gFy.js";var fe=Ye({slots:{base:["flex","flex-col","relative","overflow-hidden","h-auto","outline-none","text-foreground","box-border","bg-content1",...qe],header:["flex","p-3","z-10","w-full","justify-start","items-center","shrink-0","overflow-inherit","color-inherit","subpixel-antialiased"],body:["relative","flex","flex-1","w-full","p-3","flex-auto","flex-col","place-content-inherit","align-items-inherit","h-auto","break-words","text-left","overflow-y-auto","subpixel-antialiased"],footer:["p-3","h-auto","flex","w-full","items-center","overflow-hidden","color-inherit","subpixel-antialiased"]},variants:{shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},radius:{none:{base:"rounded-none",header:"rounded-none",footer:"rounded-none"},sm:{base:"rounded-small",header:"rounded-t-small",footer:"rounded-b-small"},md:{base:"rounded-medium",header:"rounded-t-medium",footer:"rounded-b-medium"},lg:{base:"rounded-large",header:"rounded-t-large",footer:"rounded-b-large"}},fullWidth:{true:{base:"w-full"}},isHoverable:{true:{base:"data-[hover=true]:bg-content2 dark:data-[hover=true]:bg-content2"}},isPressable:{true:{base:"cursor-pointer"}},isBlurred:{true:{base:["bg-background/80","dark:bg-background/20","backdrop-blur-md","backdrop-saturate-150"]}},isFooterBlurred:{true:{footer:["bg-background/10","backdrop-blur","backdrop-saturate-150"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:"",false:{base:"transition-transform-background motion-reduce:transition-none"}}},compoundVariants:[{isPressable:!0,class:"data-[pressed=true]:scale-[0.97] tap-highlight-transparent"}],defaultVariants:{radius:"lg",shadow:"md",fullWidth:!1,isHoverable:!1,isPressable:!1,isDisabled:!1,isFooterBlurred:!1}});function lt(e={}){const{as:r,ref:t,max:n=5,total:o,size:i,color:a,radius:s,children:u,isBordered:c,isDisabled:$,isGrid:b,renderCount:x,className:p,classNames:m,...d}=e,g=ge(t),E=r||"div",h=l.useMemo(()=>({size:i,color:a,radius:s,isGrid:b,isBordered:c,isDisabled:$}),[i,a,s,b,c,$]),T=l.useMemo(()=>st({className:p,isGrid:b}),[p,b]),P=Je(u),v=n?P.slice(0,n):P,y=o||(n!=null?P.length-n:-1),H=v.map((R,M)=>{const w=M===0,L=M===v.length-1,C={className:ee(w?"ms-0":b?"":"-ms-2",L&&y<1?"hover:-translate-x-0":"")};return l.cloneElement(R,Qe(C))});return{Component:E,context:h,remainingCount:y,clones:H,renderCount:x,getAvatarGroupProps:()=>({ref:g,className:T.base({class:ee(m==null?void 0:m.base,p)}),role:"group",...d}),getAvatarGroupCountProps:()=>({className:T.count({class:m==null?void 0:m.count})})}}var we=he((e,r)=>{const{Component:t,clones:n,context:o,remainingCount:i,getAvatarGroupCountProps:a,getAvatarGroupProps:s,renderCount:u=c=>I.jsx(ye,{...a(),name:`+${c}`})}=lt({...e,ref:r});return I.jsx(t,{...s(),children:I.jsxs(it,{value:o,children:[n,i>0&&u(i)]})})});we.displayName="HeroUI.AvatarGroup";var ut=we,[dt,jt]=Xe({name:"CardContext",strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"});const xe=typeof document<"u"?pe.useLayoutEffect:()=>{};function ct(e){const r=l.useRef(null);return xe(()=>{r.current=e},[e]),l.useCallback((...t)=>{const n=r.current;return n==null?void 0:n(...t)},[])}let te=new Map;typeof FinalizationRegistry<"u"&&new FinalizationRegistry(e=>{te.delete(e)});function ft(e,r){if(e===r)return e;let t=te.get(e);if(t)return t.forEach(o=>o.current=r),r;let n=te.get(r);return n?(n.forEach(o=>o.current=e),e):r}function Ee(...e){return(...r)=>{for(let t of e)typeof t=="function"&&t(...r)}}const _=e=>{var r;return(r=e==null?void 0:e.ownerDocument)!==null&&r!==void 0?r:document},A=e=>e&&"window"in e&&e.window===e?e:_(e).defaultView||window;function bt(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function pt(e){return bt(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}function Le(e,r){if(!ie())return r&&e?e.contains(r):!1;if(!e||!r)return!1;let t=r;for(;t!==null;){if(t===e)return!0;t.tagName==="SLOT"&&t.assignedSlot?t=t.assignedSlot.parentNode:pt(t)?t=t.host:t=t.parentNode}return!1}const re=(e=document)=>{var r;if(!ie())return e.activeElement;let t=e.activeElement;for(;t&&"shadowRoot"in t&&(!((r=t.shadowRoot)===null||r===void 0)&&r.activeElement);)t=t.shadowRoot.activeElement;return t};function Ce(e){return ie()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function vt(...e){let r={...e[0]};for(let t=1;t<e.length;t++){let n=e[t];for(let o in n){let i=r[o],a=n[o];typeof i=="function"&&typeof a=="function"&&o[0]==="o"&&o[1]==="n"&&o.charCodeAt(2)>=65&&o.charCodeAt(2)<=90?r[o]=Ee(i,a):(o==="className"||o==="UNSAFE_className")&&typeof i=="string"&&typeof a=="string"?r[o]=Oe(i,a):o==="id"&&i&&a?r.id=ft(i,a):r[o]=a!==void 0?a:i}}return r}function mt(e){var r;return typeof window>"u"||window.navigator==null?!1:((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function gt(e){var r;return typeof window<"u"&&window.navigator!=null?e.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function Te(e){let r=null;return()=>(r==null&&(r=e()),r)}const ht=Te(function(){return gt(/^Mac/i)}),$t=Te(function(){return mt(/Android/i)});function Fe(){let e=l.useRef(new Map),r=l.useCallback((o,i,a,s)=>{let u=s!=null&&s.once?(...c)=>{e.current.delete(a),a(...c)}:a;e.current.set(a,{type:i,eventTarget:o,fn:u,options:s}),o.addEventListener(i,u,s)},[]),t=l.useCallback((o,i,a,s)=>{var u;let c=((u=e.current.get(a))===null||u===void 0?void 0:u.fn)||a;o.removeEventListener(i,c,s),e.current.delete(a)},[]),n=l.useCallback(()=>{e.current.forEach((o,i)=>{t(o.eventTarget,o.type,i,o.options)})},[t]);return l.useEffect(()=>n,[n]),{addGlobalListener:r,removeGlobalListener:t,removeAllGlobalListeners:n}}function yt(e){return e.mozInputSource===0&&e.isTrusted?!0:$t()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}class Se{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(r,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=r}}function Pe(e){let r=l.useRef({isFocused:!1,observer:null});xe(()=>{const n=r.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let t=ct(n=>{e==null||e(n)});return l.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){r.current.isFocused=!0;let o=n.target,i=a=>{r.current.isFocused=!1,o.disabled&&t(new Se("blur",a)),r.current.observer&&(r.current.observer.disconnect(),r.current.observer=null)};o.addEventListener("focusout",i,{once:!0}),r.current.observer=new MutationObserver(()=>{if(r.current.isFocused&&o.disabled){var a;(a=r.current.observer)===null||a===void 0||a.disconnect();let s=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:s})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:s}))}}),r.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[t])}let wt=!1,K=null,ne=new Set,V=new Map,G=!1,oe=!1;const xt={Tab:!0,Escape:!0};function le(e,r){for(let t of ne)t(e,r)}function Et(e){return!(e.metaKey||!ht()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function Y(e){G=!0,Et(e)&&(K="keyboard",le("keyboard",e))}function S(e){K="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(G=!0,le("pointer",e))}function De(e){yt(e)&&(G=!0,K="virtual")}function He(e){e.target===window||e.target===document||wt||!e.isTrusted||(!G&&!oe&&(K="virtual",le("virtual",e)),G=!1,oe=!1)}function ke(){G=!1,oe=!0}function ae(e){if(typeof window>"u"||V.get(A(e)))return;const r=A(e),t=_(e);let n=r.HTMLElement.prototype.focus;r.HTMLElement.prototype.focus=function(){G=!0,n.apply(this,arguments)},t.addEventListener("keydown",Y,!0),t.addEventListener("keyup",Y,!0),t.addEventListener("click",De,!0),r.addEventListener("focus",He,!0),r.addEventListener("blur",ke,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",S,!0),t.addEventListener("pointermove",S,!0),t.addEventListener("pointerup",S,!0)):(t.addEventListener("mousedown",S,!0),t.addEventListener("mousemove",S,!0),t.addEventListener("mouseup",S,!0)),r.addEventListener("beforeunload",()=>{_e(e)},{once:!0}),V.set(r,{focus:n})}const _e=(e,r)=>{const t=A(e),n=_(e);r&&n.removeEventListener("DOMContentLoaded",r),V.has(t)&&(t.HTMLElement.prototype.focus=V.get(t).focus,n.removeEventListener("keydown",Y,!0),n.removeEventListener("keyup",Y,!0),n.removeEventListener("click",De,!0),t.removeEventListener("focus",He,!0),t.removeEventListener("blur",ke,!1),typeof PointerEvent<"u"?(n.removeEventListener("pointerdown",S,!0),n.removeEventListener("pointermove",S,!0),n.removeEventListener("pointerup",S,!0)):(n.removeEventListener("mousedown",S,!0),n.removeEventListener("mousemove",S,!0),n.removeEventListener("mouseup",S,!0)),V.delete(t))};function Lt(e){const r=_(e);let t;return r.readyState!=="loading"?ae(e):(t=()=>{ae(e)},r.addEventListener("DOMContentLoaded",t)),()=>_e(e,t)}typeof document<"u"&&Lt();function Me(){return K!=="pointer"}const Ct=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Tt(e,r,t){let n=_(t==null?void 0:t.target);const o=typeof window<"u"?A(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?A(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?A(t==null?void 0:t.target).HTMLElement:HTMLElement,s=typeof window<"u"?A(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||n.activeElement instanceof o&&!Ct.has(n.activeElement.type)||n.activeElement instanceof i||n.activeElement instanceof a&&n.activeElement.isContentEditable,!(e&&r==="keyboard"&&t instanceof s&&!xt[t.key])}function Ft(e,r,t){ae(),l.useEffect(()=>{let n=(o,i)=>{Tt(!!(t!=null&&t.isTextInput),o,i)&&e(Me())};return ne.add(n),()=>{ne.delete(n)}},r)}function St(e){let{isDisabled:r,onFocus:t,onBlur:n,onFocusChange:o}=e;const i=l.useCallback(u=>{if(u.target===u.currentTarget)return n&&n(u),o&&o(!1),!0},[n,o]),a=Pe(i),s=l.useCallback(u=>{const c=_(u.target),$=c?re(c):re();u.target===u.currentTarget&&$===Ce(u.nativeEvent)&&(t&&t(u),o&&o(!0),a(u))},[o,t,a]);return{focusProps:{onFocus:!r&&(t||o||n)?s:void 0,onBlur:!r&&(n||o)?i:void 0}}}function Pt(e){let{isDisabled:r,onBlurWithin:t,onFocusWithin:n,onFocusWithinChange:o}=e,i=l.useRef({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:s}=Fe(),u=l.useCallback(b=>{b.currentTarget.contains(b.target)&&i.current.isFocusWithin&&!b.currentTarget.contains(b.relatedTarget)&&(i.current.isFocusWithin=!1,s(),t&&t(b),o&&o(!1))},[t,o,i,s]),c=Pe(u),$=l.useCallback(b=>{if(!b.currentTarget.contains(b.target))return;const x=_(b.target),p=re(x);if(!i.current.isFocusWithin&&p===Ce(b.nativeEvent)){n&&n(b),o&&o(!0),i.current.isFocusWithin=!0,c(b);let m=b.currentTarget;a(x,"focus",d=>{if(i.current.isFocusWithin&&!Le(m,d.target)){let g=new Se("blur",new x.defaultView.FocusEvent("blur",{relatedTarget:d.target}));g.target=m,g.currentTarget=m,u(g)}},{capture:!0})}},[n,o,c,a,u]);return r?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:$,onBlur:u}}}let q=!1,X=0;function se(){q=!0,setTimeout(()=>{q=!1},50)}function be(e){e.pointerType==="touch"&&se()}function Dt(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",be):document.addEventListener("touchend",se),X++,()=>{X--,!(X>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",be):document.removeEventListener("touchend",se))}}function Ht(e){let{onHoverStart:r,onHoverChange:t,onHoverEnd:n,isDisabled:o}=e,[i,a]=l.useState(!1),s=l.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;l.useEffect(Dt,[]);let{addGlobalListener:u,removeAllGlobalListeners:c}=Fe(),{hoverProps:$,triggerHoverEnd:b}=l.useMemo(()=>{let x=(d,g)=>{if(s.pointerType=g,o||g==="touch"||s.isHovered||!d.currentTarget.contains(d.target))return;s.isHovered=!0;let E=d.currentTarget;s.target=E,u(_(d.target),"pointerover",h=>{s.isHovered&&s.target&&!Le(s.target,h.target)&&p(h,h.pointerType)},{capture:!0}),r&&r({type:"hoverstart",target:E,pointerType:g}),t&&t(!0),a(!0)},p=(d,g)=>{let E=s.target;s.pointerType="",s.target=null,!(g==="touch"||!s.isHovered||!E)&&(s.isHovered=!1,c(),n&&n({type:"hoverend",target:E,pointerType:g}),t&&t(!1),a(!1))},m={};return typeof PointerEvent<"u"?(m.onPointerEnter=d=>{q&&d.pointerType==="mouse"||x(d,d.pointerType)},m.onPointerLeave=d=>{!o&&d.currentTarget.contains(d.target)&&p(d,d.pointerType)}):(m.onTouchStart=()=>{s.ignoreEmulatedMouseEvents=!0},m.onMouseEnter=d=>{!s.ignoreEmulatedMouseEvents&&!q&&x(d,"mouse"),s.ignoreEmulatedMouseEvents=!1},m.onMouseLeave=d=>{!o&&d.currentTarget.contains(d.target)&&p(d,"mouse")}),{hoverProps:m,triggerHoverEnd:p}},[r,t,n,o,s,u,c]);return l.useEffect(()=>{o&&b({currentTarget:s.target},s.pointerType)},[o]),{hoverProps:$,isHovered:i}}function kt(e={}){let{autoFocus:r=!1,isTextInput:t,within:n}=e,o=l.useRef({isFocused:!1,isFocusVisible:r||Me()}),[i,a]=l.useState(!1),[s,u]=l.useState(()=>o.current.isFocused&&o.current.isFocusVisible),c=l.useCallback(()=>u(o.current.isFocused&&o.current.isFocusVisible),[]),$=l.useCallback(p=>{o.current.isFocused=p,a(p),c()},[c]);Ft(p=>{o.current.isFocusVisible=p,c()},[],{isTextInput:t});let{focusProps:b}=St({isDisabled:n,onFocusChange:$}),{focusWithinProps:x}=Pt({isDisabled:!n,onFocusWithinChange:$});return{isFocused:i,isFocusVisible:s,focusProps:n?x:b}}function _t(e){var r,t,n,o;const i=Ze(),[a,s]=et(e,fe.variantKeys),{ref:u,as:c,children:$,onClick:b,onPress:x,autoFocus:p,className:m,classNames:d,allowTextSelectionOnPress:g=!0,...E}=a,h=ge(u),T=c||(e.isPressable?"button":"div"),P=typeof T=="string",v=(t=(r=e.disableAnimation)!=null?r:i==null?void 0:i.disableAnimation)!=null?t:!1,y=(o=(n=e.disableRipple)!=null?n:i==null?void 0:i.disableRipple)!=null?o:!1,H=ee(d==null?void 0:d.base,m),{onClear:W,onPress:j,ripples:R}=tt(),M=l.useCallback(Q=>{y||v||h.current&&j(Q)},[y,v,h,j]),{buttonProps:w,isPressed:L}=rt({onPress:Ee(x,M),elementType:c,isDisabled:!e.isPressable,onClick:b,allowTextSelectionOnPress:g,...E},h),{hoverProps:C,isHovered:O}=Ht({isDisabled:!e.isHoverable,...E}),{isFocusVisible:J,isFocused:Ge,focusProps:ue}=kt({autoFocus:p}),z=l.useMemo(()=>fe({...s,disableAnimation:v}),[nt(s),v]),Re=l.useMemo(()=>({slots:z,classNames:d,disableAnimation:v,isDisabled:e.isDisabled,isFooterBlurred:e.isFooterBlurred,fullWidth:e.fullWidth}),[z,d,e.isDisabled,e.isFooterBlurred,v,e.fullWidth]),Ne=l.useCallback((Q={})=>({ref:h,className:z.base({class:H}),tabIndex:e.isPressable?0:-1,"data-hover":U(O),"data-pressed":U(L),"data-focus":U(Ge),"data-focus-visible":U(J),"data-disabled":U(e.isDisabled),...vt(e.isPressable?{...w,...ue,role:"button"}:{},e.isHoverable?C:{},de(E,{enabled:P}),de(Q))}),[h,z,H,P,e.isPressable,e.isHoverable,e.isDisabled,O,L,J,w,ue,C,E]),Be=l.useCallback(()=>({ripples:R,onClear:W}),[R,W]);return{context:Re,domRef:h,Component:T,classNames:d,children:$,isHovered:O,isPressed:L,disableAnimation:v,isPressable:e.isPressable,isHoverable:e.isHoverable,disableRipple:y,handlePress:M,isFocusVisible:J,getCardProps:Ne,getRippleProps:Be}}var Ae=he((e,r)=>{const{children:t,context:n,Component:o,isPressable:i,disableAnimation:a,disableRipple:s,getCardProps:u,getRippleProps:c}=_t({...e,ref:r});return I.jsxs(o,{...u(),children:[I.jsx(dt,{value:n,children:t}),i&&!a&&!s&&I.jsx(ot,{...c()})]})});Ae.displayName="HeroUI.Card";var Mt=Ae;D.extend(at);const Z=({title:e,items:r,users:t})=>{var x;const n=Ue(),[o,i]=l.useState(null),[a,s]=l.useState(null),u=(p,m)=>{i(p.currentTarget),s(m)},c=()=>{i(null),s(null)},$=!!o,b=$?"simple-popover":void 0;return F($e,{children:[f(ve,{title:e}),r.map((p,m)=>F(pe.Fragment,{children:[f(Ve,{in:!0,children:F(me,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f(k,{sx:{display:"flex",flexDirection:"column"},children:f(B,{variant:"body1",color:"text.secondary",children:p.text})}),p.leaves&&(()=>{const d=p.leaves.filter(g=>g.leave_type===p.type);return f(k,{sx:{display:"flex",gap:1},children:f(ut,{max:5,isBordered:!0,children:d.map((g,E)=>{const h=t.find(T=>String(T.id)===String(g.user_id));return h&&f(ye,{src:h.profile_image,alt:h.name,onClick:T=>u(T,g),sx:{cursor:"pointer"}},E)})})})})()]})}),m<r.length-1&&f(Ke,{})]},m)),f(ze,{id:b,open:$,anchorEl:o,onClose:c,PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:n.glassCard.background,border:n.glassCard.border,borderRadius:2,boxShadow:n.glassCard.boxShadow,padding:1}},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:a&&F(je,{children:[F(B,{variant:"body2",children:[f("strong",{children:"Name:"})," ",(x=t.find(p=>String(p.id)===String(a.user_id)))==null?void 0:x.name]}),F(B,{variant:"body2",children:[f("strong",{children:"Date:"})," ",a.from_date!==a.to_date?new Date(a.from_date).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric"})+" to "+new Date(a.to_date).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric"}):new Date(a.from_date).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),F(B,{variant:"body2",children:[f("strong",{children:"Reason:"})," ",a.reason]}),F(B,{variant:"body2",children:[f("strong",{children:"Status:"})," ",a.status]})]})})]})},Ot=()=>{const{auth:e}=Ie().props,[r,t]=l.useState(!0),[n,o]=l.useState([]),[i,a]=l.useState([]),[s,u]=l.useState([]),[c,$]=l.useState(null);l.useEffect(()=>{let v=!0;return t(!0),We.get(route("updates")).then(y=>{v&&y.data&&(o(y.data.users||[]),a(y.data.todayLeaves||[]),u(y.data.upcomingLeaves||[]),$(y.data.upcomingHoliday||null))}).catch(()=>{v&&(o([]),a([]),u([]),$(null))}).finally(()=>{v&&t(!1)}),()=>{v=!1}},[]);const b=(v,y)=>{let H=y;const W=w=>y.some(C=>String(C.user_id)===String(e.user.id)&&C.leave_type===w)?(H=y.filter(C=>String(C.user_id)!==String(e.user.id)),`You ${v==="today"?"are":"will be"} on ${w} leave.`):null,j=y.reduce((w,L)=>{const C=W(L.leave_type);return C&&!w.some(O=>O.type===L.leave_type)&&w.push({text:C,type:L.leave_type}),w},[]),R=H.reduce((w,L)=>(w[L.leave_type]=(w[L.leave_type]||0)+1,w),{}),M=Object.entries(R).map(([w,L])=>({text:`${L} person${L>1?"s":""} ${v==="today"?"is":"will be"} on ${w} leave`,type:w,leaves:H.filter(C=>C.leave_type===w)}));return[...j,...M]},x=D(),p=x.add(1,"day"),m=p.add(7,"day"),d=i.filter(v=>D(x).isBetween(D(v.from_date),D(v.to_date),"day","[]")),g=s.filter(v=>D(p).isBetween(D(v.from_date),D(v.to_date),"day","[]")),E=s.filter(v=>(D(v.from_date).isBetween(p,m,"day","[]")||D(v.to_date).isBetween(p,m,"day","[]"))&&!/week/i.test(v.leave_type)),h=b("today",d),T=b("tomorrow",g),P=b("nextSevenDays",E);return h.length===0&&h.push({text:"No one is away today."}),T.length===0&&T.push({text:"No one is away tomorrow."}),P.length===0&&P.push({text:"No one is going to be away in the next seven days."}),r?f(k,{sx:{p:2},children:f(N,{container:!0,spacing:2,children:[1,2,3].map((v,y)=>f(N,{item:!0,xs:12,sm:6,md:4,children:F(Mt,{className:"w-full h-full p-4",radius:"lg",children:[f(ce,{className:"rounded-lg mb-2",isLoaded:!1,children:f("div",{className:"h-6 w-2/3 rounded-lg bg-secondary"})}),f(ce,{className:"rounded-lg",isLoaded:!1,children:f("div",{className:"h-16 w-full rounded-lg bg-secondary-200"})})]})},y))})}):F(k,{sx:{p:2},children:[F(N,{container:!0,spacing:2,children:[f(N,{item:!0,xs:12,sm:6,md:4,sx:{display:"flex"},children:f(k,{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:f(Z,{title:"Today",items:h,users:n})})}),f(N,{item:!0,xs:12,sm:6,md:4,sx:{display:"flex"},children:f(k,{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:f(Z,{title:"Tomorrow",items:T,users:n})})}),f(N,{item:!0,xs:12,sm:6,md:4,sx:{display:"flex"},children:f(k,{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:f(Z,{title:"Next Seven Days",items:P,users:n})})})]}),c&&f(k,{sx:{mt:3},children:F($e,{children:[f(ve,{title:"Upcoming Holiday"}),f(me,{children:F(B,{variant:"body1",color:"text.secondary",children:[c.name," (",new Date(c.from_date).toLocaleDateString()," - ",new Date(c.to_date).toLocaleDateString(),")"]})})]})})]})};export{Ot as default};
