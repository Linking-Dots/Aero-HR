import{a4 as y,t as P,a5 as U,a6 as _,a7 as k,f as N}from"./App-cCoh4iLo.js";import{r as l,w as p}from"./vendor-CTZgMKHz.js";var ae=e=>(e==null?void 0:e.length)<=4?e:e==null?void 0:e.slice(0,3),ie=(...e)=>{let t=" ";for(const a of e)if(typeof a=="string"&&a.length>0){t=a;break}return t};function q(e){const t=l.useRef(null);return l.useMemo(()=>({get current(){return t.current},set current(a){t.current=a,typeof e=="function"?e(a):e&&(e.current=a)}}),[e])}function re(e,t,a){let r=l.useRef(t),n=y(()=>{a&&a(r.current)});l.useEffect(()=>{var i;let s=e==null||(i=e.current)===null||i===void 0?void 0:i.form;return s==null||s.addEventListener("reset",n),()=>{s==null||s.removeEventListener("reset",n)}},[e,n])}var Q=P({base:"flex flex-col gap-2 items-start"});const w={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},j={...w,customError:!0,valid:!1},m={isInvalid:!1,validationDetails:w,validationErrors:[]},F=l.createContext({}),L="__formValidationState"+Date.now();function le(e){if(e[L]){let{realtimeValidation:t,displayValidation:a,updateValidation:r,resetValidation:n,commitValidation:i}=e[L];return{realtimeValidation:t,displayValidation:a,updateValidation:r,resetValidation:n,commitValidation:i}}return K(e)}function K(e){let{isInvalid:t,validationState:a,name:r,value:n,builtinValidation:i,validate:s,validationBehavior:c="aria"}=e;a&&(t||(t=a==="invalid"));let o=t!==void 0?{isInvalid:t,validationErrors:[],validationDetails:j}:null,d=l.useMemo(()=>{if(!s||n==null)return null;let u=Y(s,n);return C(u)},[s,n]);i!=null&&i.validationDetails.valid&&(i=void 0);let v=l.useContext(F),f=l.useMemo(()=>r?Array.isArray(r)?r.flatMap(u=>M(v[u])):M(v[r]):[],[v,r]),[O,R]=l.useState(v),[S,b]=l.useState(!1);v!==O&&(R(v),b(!1));let V=l.useMemo(()=>C(S?[]:f),[S,f]),I=l.useRef(m),[E,g]=l.useState(m),$=l.useRef(m),T=()=>{if(!B)return;h(!1);let u=d||i||I.current;x(u,$.current)||($.current=u,g(u))},[B,h]=l.useState(!1);return l.useEffect(T),{realtimeValidation:o||V||d||i||m,displayValidation:c==="native"?o||V||E:o||V||d||i||E,updateValidation(u){c==="aria"&&!x(E,u)?g(u):I.current=u},resetValidation(){let u=m;x(u,$.current)||($.current=u,g(u)),c==="native"&&h(!1),b(!0)},commitValidation(){c==="native"&&h(!0),b(!0)}}}function M(e){return e?Array.isArray(e)?e:[e]:[]}function Y(e,t){if(typeof e=="function"){let a=e(t);if(a&&typeof a!="boolean")return M(a)}return[]}function C(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:j}:null}function x(e,t){return e===t?!0:!!e&&!!t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every((a,r)=>a===t.validationErrors[r])&&Object.entries(e.validationDetails).every(([a,r])=>t.validationDetails[a]===r)}function ne(e,t,a){let{validationBehavior:r,focus:n}=e;U(()=>{if(r==="native"&&(a!=null&&a.current)){let o=t.realtimeValidation.isInvalid?t.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(o),a.current.hasAttribute("title")||(a.current.title=""),t.realtimeValidation.isInvalid||t.updateValidation(G(a.current))}});let i=y(()=>{t.resetValidation()}),s=y(o=>{var d;t.displayValidation.isInvalid||t.commitValidation();let v=a==null||(d=a.current)===null||d===void 0?void 0:d.form;if(!o.defaultPrevented&&a&&v&&H(v)===a.current){var f;n?n():(f=a.current)===null||f===void 0||f.focus(),_("keyboard")}o.preventDefault()}),c=y(()=>{t.commitValidation()});l.useEffect(()=>{let o=a==null?void 0:a.current;if(!o)return;let d=o.form;return o.addEventListener("invalid",s),o.addEventListener("change",c),d==null||d.addEventListener("reset",i),()=>{o.removeEventListener("invalid",s),o.removeEventListener("change",c),d==null||d.removeEventListener("reset",i)}},[a,s,c,i,r])}function z(e){let t=e.validity;return{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing,valid:t.valid}}function G(e){return{isInvalid:!e.validity.valid,validationDetails:z(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}function H(e){for(let t=0;t<e.elements.length;t++){let a=e.elements[t];if(!a.validity.valid)return a}return null}var A=Symbol("default");function J(e,t){let a=l.useContext(e);if(t===null)return null;if(a&&typeof a=="object"&&"slots"in a&&a.slots){let r=new Intl.ListFormat().format(Object.keys(a.slots).map(i=>`"${i}"`));if(!t&&!a.slots[A])throw new Error(`A slot prop is required. Valid slot names are ${r}.`);let n=t||A;if(!a.slots[n])throw new Error(`Invalid slot "${t}". Valid slot names are ${r}.`);return a.slots[n]}return a}function W(e,t,a){let r=J(a,e.slot)||{},{ref:n,...i}=r,s=q(l.useMemo(()=>k(t,n),[t,n])),c=N(i,e);return"style"in i&&i.style&&"style"in e&&e.style&&(typeof i.style=="function"||typeof e.style=="function"?c.style=o=>{let d=typeof i.style=="function"?i.style(o):i.style,v={...o.defaultStyle,...d},f=typeof e.style=="function"?e.style({...o,defaultStyle:v}):e.style;return{...v,...f}}:c.style={...i.style,...e.style}),[c,s]}var D=l.createContext(null);l.forwardRef(function(t,a){[t,a]=W(t,a,D);let{validationErrors:r,validationBehavior:n="native",children:i,className:s,...c}=t;const o=l.useMemo(()=>Q({className:s}),[s]);return p.jsx("form",{noValidate:n!=="native",...c,ref:a,className:o,children:p.jsx(D.Provider,{value:{...t,validationBehavior:n},children:p.jsx(F.Provider,{value:r??{},children:i})})})});export{le as $,D as F,re as a,ne as b,L as c,m as d,ae as e,ie as s,J as u};
