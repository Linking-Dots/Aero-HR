import{r as o,j as e,b as s,Q as P,S as i,c as d,d as m,e as u,f as n,F as O}from"./app-CEzniZE0.js";import{u as q,a as y,F as x,c as T,G as A,e as $,T as r,h as g,j as B,k as L,m as j,b as F,B as z,A as H}from"./App-BDoHcQM2.js";import{P as U}from"./PageHeader-D4a1Mce2.js";import{S as Q}from"./StatsCards-DaU3FK2z.js";import{F as V}from"./CheckCircleIcon-DM5o0-iI.js";import{F as R}from"./GlobeAltIcon-CgwjVQtr.js";import{F as G}from"./CogIcon-ZI6jf6MR.js";import{F as D}from"./PlusIcon-Br-Pwcea.js";import{c as h}from"./chunk-D5XJWRAV-Pu0ZQtUj.js";import{p as Y}from"./chunk-CXOJTH5M-Csoqrcjd.js";import"./app-CENRN2EE.js";import"./index-IOeOeejo.js";import"./NumberFormatter-DNR9MAW-.js";const E=({title:f,holidays:c,leaveTypes:I,userLeaves:p,stats:l,currentYear:_})=>{const v=q(),k=y(v.breakpoints.down("sm"));y(v.breakpoints.down("md"));const[J,K]=o.useState("current_year"),S=o.useMemo(()=>[{title:"Available PTO",value:Object.values(l).reduce((a,t)=>a+t.available,0),icon:e(x,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Days available",trend:"+2 from last month"},{title:"Used This Year",value:Object.values(l).reduce((a,t)=>a+t.used,0),icon:e(V,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Days taken",trend:`${Math.round(Object.values(l).reduce((a,t)=>a+t.used,0)/Object.values(l).reduce((a,t)=>a+t.allocated,0)*100)}% of allocation`},{title:"Pending Requests",value:Object.values(l).reduce((a,t)=>a+t.pending,0),icon:e(T,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Awaiting approval",trend:p.filter(a=>a.status==="pending").length+" requests"},{title:"Company Holidays",value:c.length,icon:e(R,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"This year",trend:c.filter(a=>new Date(a.from_date)>new Date).length+" upcoming"}],[l,c,p]),N=o.useMemo(()=>c.filter(a=>new Date(a.from_date)>new Date).slice(0,3).map(a=>({...a,daysUntil:Math.ceil((new Date(a.from_date)-new Date)/(1e3*60*60*24))})),[c]),b=o.useMemo(()=>p.slice(0,5),[p]),C=o.useMemo(()=>Object.entries(l).map(([a,t])=>({type:a,...t,percentage:Math.round(t.used/t.allocated*100)||0})),[l]),M=[{label:"Request Time Off",icon:e(D,{className:"w-4 h-4"}),color:"primary",onClick:()=>i.visit(route("leaves-employee")),description:"Submit new request"},{label:"Admin Panel",icon:e(j,{className:"w-4 h-4"}),color:"secondary",onClick:()=>i.visit(route("leaves")),description:"Manage all leaves"},{label:"Leave Reports",icon:e(F,{className:"w-4 h-4"}),color:"success",onClick:()=>i.visit(route("leave-summary")),description:"Analytics & insights"}];return s(O,{children:[e(P,{title:f}),e(z,{sx:{display:"flex",justifyContent:"center",p:2},children:e(A,{in:!0,timeout:800,children:e($,{children:e(U,{title:"Time Off Management",subtitle:"Manage leave requests, holidays, and time-off policies",icon:e(x,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:k?"Request":"Request Time Off",icon:e(D,{className:"w-4 h-4"}),onClick:()=>i.visit(route("leaves-employee")),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}],children:s("div",{className:"p-4 sm:p-6",children:[e(Q,{stats:S,className:"mb-6"}),s("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e("div",{className:"lg:col-span-2",children:s(d,{className:"bg-white/5 backdrop-blur-md border-white/10 h-full",children:[e(h,{className:"pb-2",children:s("div",{className:"flex items-center justify-between",children:[e(r,{variant:"h6",className:"font-semibold text-foreground",children:"Leave Balance Overview"}),e(g,{size:"sm",variant:"flat",color:"primary",children:_})]})}),e(m,{}),e(u,{className:"pt-4",children:e("div",{className:"space-y-4",children:C.map((a,t)=>s("div",{className:"space-y-2",children:[s("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm font-medium text-foreground",children:a.type}),s("span",{className:"text-xs text-default-500",children:[a.used,"/",a.allocated," days"]})]}),e(Y,{value:a.percentage,color:a.percentage>80?"danger":a.percentage>60?"warning":"success",className:"max-w-full",size:"sm",showValueLabel:!0,formatOptions:{style:"percent",maximumFractionDigits:0}}),s("div",{className:"flex items-center justify-between text-xs",children:[s("span",{className:"text-green-500",children:["Available: ",a.available," days"]}),a.pending>0&&s("span",{className:"text-orange-500",children:["Pending: ",a.pending," days"]})]})]},t))})})]})}),e("div",{className:"space-y-4",children:s(d,{className:"bg-white/5 backdrop-blur-md border-white/10",children:[e(h,{children:e(r,{variant:"h6",className:"font-semibold text-foreground",children:"Quick Actions"})}),e(m,{}),e(u,{className:"pt-4",children:e("div",{className:"space-y-3",children:M.map((a,t)=>e(n,{variant:"flat",color:a.color,startContent:a.icon,className:"w-full justify-start",onPress:a.onClick,children:s("div",{className:"flex flex-col items-start",children:[e("span",{className:"font-medium",children:a.label}),e("span",{className:"text-xs opacity-70",children:a.description})]})},t))})})]})})]}),s("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s(d,{className:"bg-white/5 backdrop-blur-md border-white/10",children:[e(h,{className:"pb-2",children:s("div",{className:"flex items-center justify-between",children:[e(r,{variant:"h6",className:"font-semibold text-foreground",children:"Upcoming Company Holidays"}),e(n,{size:"sm",variant:"light",onPress:()=>i.visit(route("holidays")),children:"View All"})]})}),e(m,{}),e(u,{className:"pt-4",children:N.length>0?e("div",{className:"space-y-3",children:N.map((a,t)=>s("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[s("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),s("div",{children:[e(r,{variant:"subtitle2",className:"font-medium text-foreground",children:a.title}),e(r,{variant:"caption",className:"text-default-500",children:new Date(a.from_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:a.from_date.includes(new Date().getFullYear())?void 0:"numeric"})})]})]}),s(g,{size:"sm",variant:"flat",color:"danger",children:[a.daysUntil," days"]})]},t))}):s("div",{className:"text-center py-4",children:[e(B,{className:"w-8 h-8 mx-auto text-default-300 mb-2"}),e(r,{variant:"body2",color:"textSecondary",children:"No upcoming holidays"})]})})]}),s(d,{className:"bg-white/5 backdrop-blur-md border-white/10",children:[e(h,{className:"pb-2",children:s("div",{className:"flex items-center justify-between",children:[e(r,{variant:"h6",className:"font-semibold text-foreground",children:"Recent Leave Requests"}),e(n,{size:"sm",variant:"light",onPress:()=>i.visit(route("leaves-employee")),children:"View All"})]})}),e(m,{}),e(u,{className:"pt-4",children:b.length>0?e("div",{className:"space-y-3",children:b.map((a,t)=>{var w;return s("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[s("div",{className:"flex items-center gap-3",children:[e("div",{className:`w-2 h-2 rounded-full ${a.status==="approved"?"bg-green-400":a.status==="pending"?"bg-orange-400":"bg-red-400"}`}),s("div",{children:[e(r,{variant:"subtitle2",className:"font-medium text-foreground",children:((w=a.leave_setting)==null?void 0:w.type)||"Leave"}),s(r,{variant:"caption",className:"text-default-500",children:[new Date(a.from_date).toLocaleDateString()," - ",new Date(a.to_date).toLocaleDateString()]})]})]}),e(g,{size:"sm",variant:"flat",color:a.status==="approved"?"success":a.status==="pending"?"warning":"danger",children:a.status})]},t)})}):s("div",{className:"text-center py-4",children:[e(L,{className:"w-8 h-8 mx-auto text-default-300 mb-2"}),e(r,{variant:"body2",color:"textSecondary",children:"No recent requests"})]})})]})]}),e("div",{className:"mt-6",children:s(d,{className:"bg-white/5 backdrop-blur-md border-white/10",children:[e(h,{children:e(r,{variant:"h6",className:"font-semibold text-foreground",children:"Time Off Management"})}),e(m,{}),e(u,{className:"pt-4",children:s("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s(n,{variant:"flat",color:"primary",startContent:e(j,{className:"w-4 h-4"}),onPress:()=>i.visit(route("leaves")),className:"h-16 flex-col",children:[e("span",{className:"font-medium",children:"Leave Requests"}),e("span",{className:"text-xs opacity-70",children:"Manage team requests"})]}),s(n,{variant:"flat",color:"secondary",startContent:e(F,{className:"w-4 h-4"}),onPress:()=>i.visit(route("leave-summary")),className:"h-16 flex-col",children:[e("span",{className:"font-medium",children:"Leave Summary"}),e("span",{className:"text-xs opacity-70",children:"View all balances"})]}),s(n,{variant:"flat",color:"success",startContent:e(R,{className:"w-4 h-4"}),onPress:()=>i.visit(route("holidays")),className:"h-16 flex-col",children:[e("span",{className:"font-medium",children:"Holidays"}),e("span",{className:"text-xs opacity-70",children:"Manage company holidays"})]}),s(n,{variant:"flat",color:"warning",startContent:e(G,{className:"w-4 h-4"}),onPress:()=>i.visit(route("settings.leave")),className:"h-16 flex-col",children:[e("span",{className:"font-medium",children:"Settings"}),e("span",{className:"text-xs opacity-70",children:"Leave policies"})]})]})})]})})]})})})})})]})};E.layout=f=>e(H,{children:f});export{E as default};
