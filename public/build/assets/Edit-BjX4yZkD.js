import{x as k,r as x,b as t,j as a,Q as f,t as y}from"./app-_fBEAKGv.js";import"./app-CX8GSXRI.js";function T({}){var m;const{props:h}=usePage(),{onboarding:n}=h,{data:d,setData:c,put:g,processing:v,errors:p}=k({start_date:n.start_date||"",expected_completion_date:n.expected_completion_date||"",actual_completion_date:n.actual_completion_date||"",status:n.status||"pending",notes:n.notes||"",tasks:((m=n.tasks)==null?void 0:m.map(e=>({id:e.id,task:e.task,description:e.description,due_date:e.due_date,completed_date:e.completed_date,status:e.status,assigned_to:e.assigned_to,notes:e.notes})))||[]}),[i,r]=x.useState({task:"",description:"",due_date:"",assigned_to:""}),_=()=>{i.task&&(c("tasks",[...d.tasks,{...i,status:"pending"}]),r({task:"",description:"",due_date:"",assigned_to:""}))},N=e=>{const l=[...d.tasks];l.splice(e,1),c("tasks",l)},o=(e,l,s)=>{const u=[...d.tasks];u[e]={...u[e],[l]:s},c("tasks",u)},b=e=>{e.preventDefault(),g(route("hr.onboarding.update",n.id))};return t("div",{className:"space-y-6",children:[a(f,{title:`Edit Onboarding #${n.id}`}),t("h1",{className:"text-xl font-semibold",children:["Edit Onboarding #",n.id]}),t("form",{onSubmit:b,className:"space-y-6",children:[t("div",{className:"grid md:grid-cols-3 gap-6",children:[t("div",{className:"space-y-4",children:[t("div",{children:[a("label",{className:"form-label",children:"Start Date"}),a("input",{type:"date",className:"input",value:d.start_date,onChange:e=>c("start_date",e.target.value)}),p.start_date&&a("p",{className:"error-text",children:p.start_date})]}),t("div",{children:[a("label",{className:"form-label",children:"Expected Completion"}),a("input",{type:"date",className:"input",value:d.expected_completion_date,onChange:e=>c("expected_completion_date",e.target.value)}),p.expected_completion_date&&a("p",{className:"error-text",children:p.expected_completion_date})]}),t("div",{children:[a("label",{className:"form-label",children:"Actual Completion"}),a("input",{type:"date",className:"input",value:d.actual_completion_date,onChange:e=>c("actual_completion_date",e.target.value)})]}),t("div",{children:[a("label",{className:"form-label",children:"Status"}),a("select",{className:"input",value:d.status,onChange:e=>c("status",e.target.value),children:["pending","in_progress","completed","cancelled"].map(e=>a("option",{value:e,children:e.replace("_","-")},e))})]}),t("div",{children:[a("label",{className:"form-label",children:"Notes"}),a("textarea",{className:"textarea",value:d.notes,onChange:e=>c("notes",e.target.value)})]})]}),a("div",{className:"md:col-span-2 space-y-4",children:t("div",{className:"bg-white shadow rounded p-4 space-y-4",children:[a("h2",{className:"font-medium",children:"Tasks"}),t("div",{className:"grid md:grid-cols-6 gap-2 items-end text-xs",children:[t("div",{className:"md:col-span-2",children:[a("label",{className:"form-label",children:"Task"}),a("input",{className:"input",value:i.task,onChange:e=>r({...i,task:e.target.value})})]}),t("div",{children:[a("label",{className:"form-label",children:"Due"}),a("input",{type:"date",className:"input",value:i.due_date,onChange:e=>r({...i,due_date:e.target.value})})]}),t("div",{children:[a("label",{className:"form-label",children:"Assignee ID"}),a("input",{className:"input",value:i.assigned_to,onChange:e=>r({...i,assigned_to:e.target.value})})]}),t("div",{children:[a("label",{className:"form-label",children:"Status"}),a("select",{className:"input",value:i.status||"pending",onChange:e=>r({...i,status:e.target.value}),children:["pending","in_progress","completed","not-applicable"].map(e=>a("option",{value:e,children:e.replace("_","-")},e))})]}),a("button",{type:"button",onClick:_,className:"btn btn-secondary w-full",children:"Add"})]}),t("div",{children:[d.tasks.length===0&&a("p",{className:"text-xs text-gray-500",children:"No tasks."}),a("ul",{className:"divide-y mt-2",children:d.tasks.map((e,l)=>t("li",{className:"py-2 space-y-2",children:[t("div",{className:"flex items-start justify-between",children:[a("input",{className:"input flex-1 mr-2",value:e.task,onChange:s=>o(l,"task",s.target.value)}),a("button",{type:"button",className:"link text-red-600",onClick:()=>N(l),children:"Remove"})]}),t("div",{className:"grid md:grid-cols-6 gap-2 text-xs",children:[a("input",{className:"input md:col-span-2",placeholder:"Description",value:e.description||"",onChange:s=>o(l,"description",s.target.value)}),a("input",{type:"date",className:"input",value:e.due_date||"",onChange:s=>o(l,"due_date",s.target.value)}),a("input",{className:"input",placeholder:"Assignee",value:e.assigned_to||"",onChange:s=>o(l,"assigned_to",s.target.value)}),a("select",{className:"input",value:e.status,onChange:s=>o(l,"status",s.target.value),children:["pending","in_progress","completed","not-applicable"].map(s=>a("option",{value:s,children:s.replace("_","-")},s))}),a("input",{type:"date",className:"input",value:e.completed_date||"",onChange:s=>o(l,"completed_date",s.target.value)})]})]},l))})]})]})})]}),t("div",{className:"flex gap-3",children:[a("button",{type:"submit",className:"btn btn-primary",disabled:v,children:"Save"}),a(y,{href:route("hr.onboarding.show",n.id),className:"btn",children:"Cancel"})]})]})]})}export{T as default};
