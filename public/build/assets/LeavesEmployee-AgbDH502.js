import{q as x,j as r,a as e,Y as S,G as L,F as b}from"./app-BXg6ovw7.js";import{r as l,e as k,g as E,B as i,f as F,a as v,G as g,T as m,D as M}from"./vendor-ZOhTUyTS.js";import{A as O}from"./App-DIkTxEiN.js";import{L as B,D as q,a as w}from"./DeleteLeaveForm-DMpukLe_.js";import{A as H}from"./Add-VLT2I3LX.js";import"./Delete-6-3-DYKP.js";import"./chunk-YRZGWF2W-DR9Bd9j8.js";import"./chunk-KQ7OR4H5-I3LTVl9t.js";import"./GlassDialog-Bm_AhG7L.js";import"./LoadingButton-CAL-kczt.js";const R=({title:p,allUsers:_})=>{const{auth:s}=x().props,[n,o]=l.useState(null),[a,d]=l.useState(x().props.leavesData);console.log(a);const[D,T]=l.useState(a.allLeaves),[U,y]=l.useState(null),[A,I]=l.useState();l.useEffect(()=>{T(a.allLeaves)},[a]);const h=t=>{o(t)},j=l.useCallback((t,c)=>{y(t),o(c)},[]),G=l.useCallback(()=>{o(null),y(null)},[]),C=()=>{o(null)};return r(b,{children:[e(S,{title:p}),n==="add_leave"&&e(B,{open:n==="add_leave",setLeavesData:d,closeModal:C,leaveTypes:a.leaveTypes,leaveCounts:a.leaveCountsByUser[s.user.id]?a.leaveCountsByUser[s.user.id]:[]}),n==="edit_leave"&&e(B,{open:n==="edit_leave",setLeavesData:d,closeModal:C,leaveTypes:a.leaveTypes,leaveCounts:a.leaveCountsByUser[s.user.id]?a.leaveCountsByUser[s.user.id]:[],currentLeave:A}),n==="delete_leave"&&e(q,{open:n==="delete_leave",handleClose:G,leaveIdToDelete:U,setLeavesData:d}),e(i,{sx:{display:"flex",justifyContent:"center",p:2},children:e(k,{in:!0,children:r(L,{children:[e(E,{title:"Leaves",sx:{padding:"24px"},action:e(i,{display:"flex",gap:2,children:e(F,{title:"Add Leave",variant:"outlined",color:"success",startIcon:e(H,{}),onClick:()=>h("add_leave"),children:"Add Leave"})})}),e(v,{children:e(g,{container:!0,spacing:2,children:a.leaveTypes.map(t=>{var c,f;return e(g,{item:!0,xs:6,sm:6,md:3,children:e(L,{children:e(v,{children:r(i,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center",children:[e(m,{variant:"h6",sx:{mb:2},children:t.type})," ",r(i,{display:"flex",alignItems:"center",children:[r(i,{children:["Used:",e(m,{variant:"h4",children:a.leaveCountsByUser[s.user.id]?(c=a.leaveCountsByUser[s.user.id].find(u=>u.leave_type===t.type))==null?void 0:c.days_used:0})]}),e(M,{orientation:"vertical",flexItem:!0,sx:{mx:2}})," ",r(i,{children:["Remaining:",e(m,{variant:"h4",children:a.leaveCountsByUser[s.user.id]?(f=a.leaveCountsByUser[s.user.id].find(u=>u.leave_type===t.type))==null?void 0:f.remaining_days:0})]})]})]})})})},t.type)})})}),e(v,{children:e(w,{setLeavesData:d,handleClickOpen:j,setCurrentLeave:I,openModal:h,allLeaves:D,allUsers:_})})]})})})]})};R.layout=p=>e(O,{children:p});export{R as default};
