import{r as s,j as e,b as t,Q as B,i as u,F as v,g as V,d as Y,e as p,f as b}from"./app-DZ7wekd6.js";import{u as K,a as F,G as Q,c as W,ah as I,d as r,i as H,J,k as U,B as Z,A as q}from"./App-BgzboC1v.js";import{F as R}from"./CheckCircleIcon-W0xXWNcF.js";import{F as X}from"./ExclamationTriangleIcon-Cppl0Irh.js";import{C as ee}from"./CircularProgress-BsdYCmfi.js";import{c as ae}from"./chunk-D5XJWRAV-2ifSqXln.js";import{t as te,a as re,b as N,c as se,d as oe,e as x}from"./chunk-F3UDT23P-DU-BVP7B.js";import"./app-CPPT5dG3.js";import"./useHasTabbableChild-B7pyzHVN.js";import"./chunk-7F3ZLNJ6-BBZ_V3qk.js";function le({title:i,titleId:l,...d},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},d),i?s.createElement("title",{id:l},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"}))}const y=s.forwardRef(le);function ie({title:i,titleId:l,...d},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},d),i?s.createElement("title",{id:l},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const C=s.forwardRef(ie),ne="551140686722-ngg3290imab1ru0slcljlourvuvrd7t5.apps.googleusercontent.com",ce="AIzaSyCwfSbrgNYCrhdmFIlU7pS7bVVT__lwOgo",de="https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest",me="https://www.googleapis.com/auth/gmail.readonly",he=()=>{const i=K(),l=F(i.breakpoints.down("sm")),d=F(i.breakpoints.down("md")),[o,k]=s.useState(null),[S,E]=s.useState([]),[_,j]=s.useState(!1),[m,A]=s.useState(""),[T,D]=s.useState(new Set),P=[{title:"Total Emails",value:S.length,icon:e(y,{className:"w-5 h-5"}),color:"text-blue-600",description:"Emails loaded"},{title:"Selected",value:T.size,icon:e(R,{className:"w-5 h-5"}),color:"text-green-600",description:"Emails selected"},{title:"Status",value:o?"Connected":"Disconnected",icon:o?e(R,{className:"w-5 h-5"}):e(X,{className:"w-5 h-5"}),color:o?"text-green-600":"text-orange-600",description:"Gmail connection"}];s.useEffect(()=>{(()=>{const n=document.createElement("script");n.src="https://apis.google.com/js/api.js",n.async=!0,n.defer=!0,n.onload=()=>{window.gapi.load("client",$)};const c=document.createElement("script");c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.onload=z,document.body.appendChild(n),document.body.appendChild(c)})()},[]);const $=async()=>{await window.gapi.client.init({apiKey:ce,discoveryDocs:[de]})},z=()=>{window.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:ne,scope:me,callback:""})},G=()=>{window.tokenClient.callback=async a=>{if(a.error!==void 0)throw a;k(window.gapi.client.getToken().access_token),await L()},window.tokenClient.requestAccessToken({prompt:o?"":"consent"})},M=()=>{o&&(window.google.accounts.oauth2.revoke(o),window.gapi.client.setToken(""),k(null),E([]))},L=async()=>{j(!0);try{const c=((await window.gapi.client.gmail.users.messages.list({userId:"me",maxResults:10})).result.messages||[]).map(async O=>{const h=await window.gapi.client.gmail.users.messages.get({userId:"me",id:O.id});return{id:h.result.id,subject:g(h.result.payload.headers,"Subject"),from:g(h.result.payload.headers,"From"),date:g(h.result.payload.headers,"Date")}}),f=await Promise.all(c);E(f)}catch(a){console.error("Error fetching emails:",a)}finally{j(!1)}},w=S.filter(a=>a.subject.toLowerCase().includes(m.toLowerCase())||a.from.toLowerCase().includes(m.toLowerCase())),g=(a,n)=>{const c=a.find(f=>f.name===n);return c?c.value:"No Information"};return t(v,{children:[e(B,{title:"Gmail Integration"}),e(Z,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Q,{in:!0,children:e(W,{children:t("div",{className:"overflow-hidden",children:[e("div",{className:"bg-gradient-to-br from-slate-50/50 to-white/30 backdrop-blur-sm border-b border-white/20",children:e("div",{className:"p-6",children:t("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t("div",{className:"flex items-center gap-4",children:[e("div",{className:"p-3 rounded-xl bg-gradient-to-br from-blue-500/20 to-purple-500/20 border border-blue-500/30",children:e(I,{className:"w-8 h-8 text-blue-600"})}),t("div",{children:[e(r,{variant:l?"h5":"h4",className:"font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Gmail Integration"}),e(r,{variant:"body2",color:"textSecondary",children:"Connect and manage your Gmail messages"})]})]}),e("div",{className:"flex gap-2 flex-wrap",children:o?t(v,{children:[e(u,{color:"success",variant:"bordered",startContent:e(V,{className:"w-4 h-4"}),onPress:L,isLoading:_,className:"border-white/20 bg-white/5 hover:bg-white/10",children:"Refresh"}),e(u,{color:"danger",variant:"bordered",onPress:M,className:"border-white/20 bg-white/5 hover:bg-white/10",children:"Disconnect"})]}):e(u,{color:"primary",startContent:e(C,{className:"w-4 h-4"}),onPress:G,className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white font-medium",children:"Connect Gmail"})})]})})}),e(Y,{className:"border-white/10"}),t("div",{className:"p-6",children:[e("div",{className:"mb-6",children:e("div",{className:`grid gap-4 ${l?"grid-cols-1":d?"grid-cols-2":"grid-cols-3"}`,children:P.map((a,n)=>t(p,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200",children:[e(ae,{className:"pb-2",children:t("div",{className:"flex items-center gap-2",children:[a.icon,e(r,{variant:l?"subtitle1":"h6",className:`font-semibold ${a.color}`,children:a.title})]})}),t(b,{className:"pt-0",children:[e(r,{variant:l?"h4":"h3",className:`font-bold ${a.color}`,children:a.value}),e(r,{variant:"caption",color:"textSecondary",children:a.description})]})]},n))})}),o&&t(v,{children:[e("div",{className:"mb-6",children:t("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e("div",{className:"w-full sm:w-auto sm:min-w-[300px]",children:e(H,{label:"Search Messages",placeholder:"Search by subject or sender...",value:m,onChange:a=>A(a.target.value),startContent:e(J,{className:"w-4 h-4"}),variant:"bordered",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:l?"sm":"md"})}),e("div",{className:"flex gap-2 flex-wrap",children:t(U,{startContent:e(y,{className:"w-4 h-4"}),variant:"flat",color:"primary",size:l?"sm":"md",className:"bg-white/10 backdrop-blur-md border-white/20",children:[w.length," messages"]})})]})}),t("div",{className:"min-h-96",children:[t(r,{variant:"h6",className:"mb-4 flex items-center gap-2",children:[e(y,{className:"w-5 h-5"}),"Gmail Messages"]}),_?e(p,{className:"bg-white/10 backdrop-blur-md border-white/20",children:t(b,{className:"text-center py-12",children:[e(ee,{size:40}),e(r,{className:"mt-4",color:"textSecondary",children:"Loading emails..."})]})}):w.length>0?e("div",{className:"overflow-hidden rounded-lg",children:t(te,{"aria-label":"Gmail messages table",classNames:{wrapper:"bg-white/10 backdrop-blur-md border-white/20",th:"bg-white/20 text-default-foreground",td:"border-white/10"},selectionMode:"multiple",selectedKeys:T,onSelectionChange:D,children:[t(re,{children:[e(N,{children:"FROM"}),e(N,{children:"SUBJECT"}),e(N,{children:"DATE"})]}),e(se,{children:w.map(a=>t(oe,{children:[e(x,{children:e(r,{variant:"body2",className:"font-medium truncate max-w-[200px]",children:a.from})}),e(x,{children:e(r,{variant:"body2",className:"truncate max-w-[300px]",children:a.subject})}),e(x,{children:e(r,{variant:"body2",color:"textSecondary",className:"text-xs",children:new Date(a.date).toLocaleDateString()})})]},a.id))})]})}):e(p,{className:"bg-white/10 backdrop-blur-md border-white/20",children:t(b,{className:"text-center py-12",children:[e(I,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e(r,{variant:"h6",className:"mb-2",children:"No Emails Found"}),e(r,{color:"textSecondary",children:m?"No emails match your search criteria.":"Connect to Gmail to view your messages."})]})})]})]}),!o&&e(p,{className:"bg-white/10 backdrop-blur-md border-white/20",children:t(b,{className:"text-center py-12",children:[e(C,{className:"w-16 h-16 mx-auto mb-4 text-blue-400"}),e(r,{variant:"h6",className:"mb-2",children:"Connect Your Gmail Account"}),e(r,{color:"textSecondary",className:"mb-4",children:'Click "Connect Gmail" to authorize access to your Gmail messages.'}),e(u,{color:"primary",startContent:e(C,{className:"w-4 h-4"}),onPress:G,className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white font-medium",children:"Connect Gmail"})]})})]})]})})})})]})};he.layout=i=>e(q,{children:i});export{he as default};
