import{r as i,i as W,j as s,a as oe,b as t,Q as Je,F as Ce,o as Xe}from"./app-z4s5sYKZ.js";import{x as pe,y as ge,n as be,_ as he,aE as Ye,o as L,a9 as Ze,s as Y,p as ne,q as fe,a4 as Ke,a6 as er,u as rr,a as Re,ab as ce,aF as Ne,aG as sr,j as T,B as de,d as ae,T as C,G as or,c as ar,E as Se,i as tr,a7 as ir,h as te,I as Ae,aH as nr,aI as lr,A as cr}from"./App-lYuiCeFz.js";import{P as dr}from"./PageHeader-CqkUxZm7.js";import{S as mr}from"./StatsCards-n9TjQSht.js";import{F as ur}from"./FunnelIcon-Bt_0o0GB.js";import{a as Pe,b as ke,c as Me}from"./DialogContent-D88NsPJ_.js";import{F as _e}from"./PlusIcon-BnsbFFF2.js";import{D as Fe}from"./DialogTitle--yJ9U4gg.js";import{T as me}from"./TextField-yuj0Q4Bl.js";import{B as $e}from"./Button-flahXtBE.js";import{L as je}from"./LoadingButton-BMUrW638.js";import{F as pr}from"./ExclamationTriangleIcon-CBcuXhrB.js";import{F as gr}from"./PencilSquareIcon-z0dCwqxJ.js";import{F as br}from"./TrashIcon-tECU6Km-.js";import{u as hr}from"./useSlot-C2BSLxE1.js";import{C as fr}from"./Checkbox-Dmh4GR6-.js";import{F as xr}from"./DocumentArrowDownIcon-DoFLhWLA.js";import{F as yr}from"./PresentationChartLineIcon-Ud-SRZL9.js";import"./app-DNvvDii_.js";import"./chunk-D5XJWRAV-DYHUiYgb.js";import"./Select-j5AnG5eG.js";import"./Popover-DvUmpdej.js";import"./List-WeVe4rDG.js";import"./CircularProgress-DIt3rVlg.js";const De=i.createContext({});function vr(r){return ge("MuiAccordion",r)}const ie=pe("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),wr=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],Cr=r=>{const{classes:a,square:u,expanded:l,disabled:R,disableGutters:x}=r;return fe({root:["root",!u&&"rounded",l&&"expanded",R&&"disabled",!x&&"gutters"],region:["region"]},vr,a)},Rr=Y(Ke,{name:"MuiAccordion",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:u}=r;return[{[`& .${ie.region}`]:a.region},a.root,!u.square&&a.rounded,!u.disableGutters&&a.gutters]}})(({theme:r})=>{const a={duration:r.transitions.duration.shortest};return{position:"relative",transition:r.transitions.create(["margin"],a),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(r.vars||r).palette.divider,transition:r.transitions.create(["opacity","background-color"],a)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${ie.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${ie.disabled}`]:{backgroundColor:(r.vars||r).palette.action.disabledBackground}}},({theme:r})=>({variants:[{props:a=>!a.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(r.vars||r).shape.borderRadius,borderTopRightRadius:(r.vars||r).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(r.vars||r).shape.borderRadius,borderBottomRightRadius:(r.vars||r).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:a=>!a.disableGutters,style:{[`&.${ie.expanded}`]:{margin:"16px 0"}}}]})),Nr=i.forwardRef(function(a,u){const l=be({props:a,name:"MuiAccordion"}),{children:R,className:x,defaultExpanded:M=!1,disabled:_=!1,disableGutters:E=!1,expanded:y,onChange:F,square:N=!1,slots:Q={},slotProps:v={},TransitionComponent:G,TransitionProps:b}=l,B=he(l,wr),[h,$]=Ye({controlled:y,default:M,name:"Accordion",state:"expanded"}),A=i.useCallback(f=>{$(!h),F&&F(f,!h)},[h,F,$]),[S,...Z]=i.Children.toArray(R),O=i.useMemo(()=>({expanded:h,disabled:_,disableGutters:E,toggle:A}),[h,_,E,A]),P=L({},l,{square:N,disabled:_,disableGutters:E,expanded:h}),U=Cr(P),K=L({transition:G},Q),V=L({transition:b},v),[D,ee]=hr("transition",{elementType:Ze,externalForwardedProps:{slots:K,slotProps:V},ownerState:P});return W.jsxs(Rr,L({className:ne(U.root,x),ref:u,ownerState:P,square:N},B,{children:[W.jsx(De.Provider,{value:O,children:S}),W.jsx(D,L({in:h,timeout:"auto"},ee,{children:W.jsx("div",{"aria-labelledby":S.props.id,id:S.props["aria-controls"],role:"region",className:U.region,children:Z})}))]}))});function Sr(r){return ge("MuiAccordionDetails",r)}pe("MuiAccordionDetails",["root"]);const Ar=["className"],Pr=r=>{const{classes:a}=r;return fe({root:["root"]},Sr,a)},kr=Y("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(r,a)=>a.root})(({theme:r})=>({padding:r.spacing(1,2,2)})),Mr=i.forwardRef(function(a,u){const l=be({props:a,name:"MuiAccordionDetails"}),{className:R}=l,x=he(l,Ar),M=l,_=Pr(M);return W.jsx(kr,L({className:ne(_.root,R),ref:u,ownerState:M},x))});function _r(r){return ge("MuiAccordionSummary",r)}const H=pe("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Fr=["children","className","expandIcon","focusVisibleClassName","onClick"],$r=r=>{const{classes:a,expanded:u,disabled:l,disableGutters:R}=r;return fe({root:["root",u&&"expanded",l&&"disabled",!R&&"gutters"],focusVisible:["focusVisible"],content:["content",u&&"expanded",!R&&"contentGutters"],expandIconWrapper:["expandIconWrapper",u&&"expanded"]},_r,a)},jr=Y(er,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(r,a)=>a.root})(({theme:r})=>{const a={duration:r.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:r.spacing(0,2),transition:r.transitions.create(["min-height","background-color"],a),[`&.${H.focusVisible}`]:{backgroundColor:(r.vars||r).palette.action.focus},[`&.${H.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity},[`&:hover:not(.${H.disabled})`]:{cursor:"pointer"},variants:[{props:u=>!u.disableGutters,style:{[`&.${H.expanded}`]:{minHeight:64}}}]}}),Br=Y("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(r,a)=>a.content})(({theme:r})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:a=>!a.disableGutters,style:{transition:r.transitions.create(["margin"],{duration:r.transitions.duration.shortest}),[`&.${H.expanded}`]:{margin:"20px 0"}}}]})),Dr=Y("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(r,a)=>a.expandIconWrapper})(({theme:r})=>({display:"flex",color:(r.vars||r).palette.action.active,transform:"rotate(0deg)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shortest}),[`&.${H.expanded}`]:{transform:"rotate(180deg)"}})),Tr=i.forwardRef(function(a,u){const l=be({props:a,name:"MuiAccordionSummary"}),{children:R,className:x,expandIcon:M,focusVisibleClassName:_,onClick:E}=l,y=he(l,Fr),{disabled:F=!1,disableGutters:N,expanded:Q,toggle:v}=i.useContext(De),G=h=>{v&&v(h),E&&E(h)},b=L({},l,{expanded:Q,disabled:F,disableGutters:N}),B=$r(b);return W.jsxs(jr,L({focusRipple:!1,disableRipple:!0,disabled:F,component:"div","aria-expanded":Q,className:ne(B.root,x),focusVisibleClassName:ne(B.focusVisible,_),onClick:G,ref:u,ownerState:b},y,{children:[W.jsx(Br,{className:B.content,ownerState:b,children:R}),M&&W.jsx(Dr,{className:B.expandIconWrapper,ownerState:b,children:M})]}))}),ue=r=>Array.isArray(r)?[...r]:[],Be=r=>r&&typeof r=="object"&&!Array.isArray(r)?{...r}:{},Er=r=>{const a=ue(r.roles),u=ue(r.permissions),l=Be(r.permissions_grouped),R=ue(r.role_has_permissions);Be(r.enterprise_modules);const x=!!r.can_manage_super_admin,M=r.title,_=rr(),E=Re(_.breakpoints.down("sm"));Re(_.breakpoints.down("md"));const[y,F]=i.useState(a),[N,Q]=i.useState(u),[v,G]=i.useState(R),[b,B]=i.useState(a.length>0?a[0].id:null),[h,$]=i.useState(new Set),[A,S]=i.useState(!1),[Z,O]=i.useState(!1),[P,U]=i.useState(null),[K,V]=i.useState(!1),[D,ee]=i.useState(null),[f,xe]=i.useState(""),[j,ye]=i.useState("all"),[re,q]=i.useState({name:"",description:"",permissions:[],hierarchy_level:10}),d=i.useMemo(()=>y.find(e=>e.id===b)||null,[y,b]);i.useEffect(()=>{if(b){const e=le(b);$(new Set(e))}else $(new Set)},[b,v]);const z=i.useMemo(()=>({totalRoles:Array.isArray(y)?y.length:0,totalPermissions:Array.isArray(N)?N.length:0,activeRole:(d==null?void 0:d.name)||"None Selected",grantedPermissions:h.size}),[y,N,d,h]),Te=i.useMemo(()=>[{title:"Total Roles",value:z.totalRoles,icon:s(ce,{}),color:"text-blue-600",iconBg:"bg-blue-500/20",description:"System roles"},{title:"Permissions",value:z.totalPermissions,icon:s(Ne,{}),color:"text-green-600",iconBg:"bg-green-500/20",description:"Available permissions"},{title:"Active Role",value:z.activeRole==="None Selected"?"None":z.activeRole,icon:s(sr,{}),color:"text-purple-600",iconBg:"bg-purple-500/20",description:"Currently selected",customStyle:z.activeRole==="None Selected"?{fontSize:"1rem"}:{}},{title:"Granted",value:z.grantedPermissions,icon:s(ur,{}),color:"text-orange-600",iconBg:"bg-orange-500/20",description:"Active permissions"}],[z]);i.useMemo(()=>{if(!l||typeof l!="object")return[];let e=[];return Object.entries(l).forEach(([o,n])=>{if(j==="all"||j===o){const m=Array.isArray(n.permissions)?n.permissions.filter(c=>f===""||c.name&&c.name.toLowerCase().includes(f.toLowerCase())||c.display_name&&c.display_name.toLowerCase().includes(f.toLowerCase())):[];e=[...e,...m]}}),e},[l,f,j]);const Ee=i.useMemo(()=>{if(!l||typeof l!="object")return{};const e={};return Object.entries(l).forEach(([o,n])=>{if(j==="all"||j===o){const m=Array.isArray(n.permissions)?n.permissions.filter(c=>f===""||c.name&&c.name.toLowerCase().includes(f.toLowerCase())||c.display_name&&c.display_name.toLowerCase().includes(f.toLowerCase())):[];m.length>0&&(e[o]={...n,permissions:m})}}),e},[l,f,j]),Ge=i.useMemo(()=>!l||typeof l!="object"?[]:Object.keys(l).sort(),[l]),le=i.useCallback(e=>Array.isArray(v)?v.filter(o=>o&&o.role_id===e).map(o=>o.permission_id).filter(Boolean):[],[v]),I=(e,o)=>{if(!Array.isArray(v)||!Array.isArray(N))return!1;const n=v.filter(c=>c&&c.role_id===e),m=N.find(c=>c&&c.name===o);return m&&n.some(c=>c.permission_id===m.id)};i.useCallback(e=>!d||!l[e]?!1:l[e].permissions.every(n=>I(d.id,n.name)),[d,l,I]),i.useCallback(e=>!d||!l[e]?!1:l[e].permissions.some(n=>I(d.id,n.name)),[d,l,I]);const Ie=e=>e.name==="Super Administrator"?x:!0,Le=i.useCallback(e=>{B(e);const o=v.filter(n=>n.role_id===e).map(n=>n.permission_id);$(new Set(o))},[v]),We=i.useCallback(e=>{xe(e)},[]),ze=i.useCallback(e=>{ye(e)},[]),Oe=i.useCallback(()=>{O(!0)},[]),ve=i.useCallback(()=>{O(!1),U(null),q({name:"",description:"",permissions:[],hierarchy_level:10})},[]),we=i.useCallback(async e=>{var o,n;if(!(!d||A)){S(!0);try{const m=I(d.id,e),c=m?"revoke":"grant";if((await oe.post("/admin/roles/update-permission",{role_id:d.id,permission:e,action:c})).status===200){const p=N.find(k=>k.name===e);p&&(m?(G(k=>k.filter(g=>!(g.role_id===d.id&&g.permission_id===p.id))),$(k=>{const g=new Set(k);return g.delete(p.id),g})):(G(k=>[...k,{role_id:d.id,permission_id:p.id}]),$(k=>new Set([...k,p.id])))),T.success(`Permission ${c}ed successfully`)}}catch(m){console.error("Error updating permission:",m),T.error(((n=(o=m.response)==null?void 0:o.data)==null?void 0:n.message)||"Failed to update permission")}finally{S(!1)}}},[d,A,I,N,G,$]),Ue=i.useCallback(async e=>{var o,n;if(!(!d||A)){S(!0);try{const m=await oe.post("/admin/roles/update-module",{roleId:d.id,module:e,action:"toggle"});if(m.status===200){G(m.data.role_has_permissions);const c=m.data.role_has_permissions.filter(w=>w.role_id===d.id).map(w=>w.permission_id);$(new Set(c)),T.success("Module permissions updated successfully")}}catch(m){console.error("Error updating module permissions:",m),T.error(((n=(o=m.response)==null?void 0:o.data)==null?void 0:n.message)||"Failed to update module permissions")}finally{S(!1)}}},[d,A]),Ve=async()=>{var e,o;S(!0);try{const n=P?`/admin/roles/${P.id}`:"/admin/roles",c=await oe[P?"put":"post"](n,re);c.status===200&&(P?(F(w=>w.map(p=>p.id===P.id?c.data.role:p)),T.success("Role updated successfully")):(F(w=>[...w,c.data.role]),T.success("Role created successfully")),O(!1),U(null),q({name:"",description:"",permissions:[],hierarchy_level:10}))}catch(n){console.error("Error saving role:",n),T.error(((o=(e=n.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to save role")}finally{S(!1)}},qe=async()=>{var e,o;if(D){S(!0);try{(await oe.delete(`/admin/roles/${D.id}`)).status===200&&(F(m=>m.filter(c=>c.id!==D.id)),b===D.id&&B(y.length>1?y[0].id:null),T.success("Role deleted successfully"))}catch(n){console.error("Error deleting role:",n),T.error(((o=(e=n.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to delete role")}finally{S(!1),V(!1),ee(null)}}},He=e=>{U(e),q({name:e.name,description:e.description||"",permissions:le(e.id),hierarchy_level:e.hierarchy_level||10}),O(!0)},Qe=e=>{ee(e),V(!0)};return t(Ce,{children:[s(Je,{title:M}),Z&&t(Pe,{open:Z,onClose:ve,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"24px"}},children:[s(Fe,{children:t(de,{sx:{display:"flex",alignItems:"center",gap:2},children:[s(_e,{className:"w-6 h-6"}),P?"Edit Role":"Create New Role"]})}),s(ke,{children:t(ae,{container:!0,spacing:3,sx:{mt:1},children:[s(ae,{item:!0,xs:12,sm:6,children:s(me,{fullWidth:!0,label:"Role Name",value:re.name,onChange:e=>q(o=>({...o,name:e.target.value})),required:!0})}),t(ae,{item:!0,xs:12,sm:6,children:["                                ",s(me,{fullWidth:!0,label:"Hierarchy Level",type:"number",value:re.hierarchy_level,onChange:e=>q(o=>({...o,hierarchy_level:parseInt(e.target.value)})),helperText:"Role priority level (1-50, lower numbers = higher priority)",inputProps:{min:1,max:50},disabled:!x})]}),s(ae,{item:!0,xs:12,children:s(me,{fullWidth:!0,label:"Description",multiline:!0,rows:3,value:re.description,onChange:e=>q(o=>({...o,description:e.target.value}))})})]})}),t(Me,{sx:{p:3},children:[s($e,{onClick:ve,children:"Cancel"}),s(je,{variant:"contained",onClick:Ve,loading:A,sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{background:"linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%)"}},children:P?"Update Role":"Create Role"})]})]}),K&&t(Pe,{open:K,onClose:()=>V(!1),PaperProps:{sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"24px"}},children:[s(Fe,{children:t(de,{sx:{display:"flex",alignItems:"center",gap:2},children:[s(pr,{className:"w-6 h-6 text-red-500"}),"Confirm Delete"]})}),s(ke,{children:t(C,{children:['Are you sure you want to delete the role "',D==null?void 0:D.name,'"? This action cannot be undone.']})}),t(Me,{sx:{p:3},children:[s($e,{onClick:()=>V(!1),children:"Cancel"}),s(je,{variant:"contained",color:"error",onClick:qe,loading:A,children:"Delete Role"})]})]}),s(de,{sx:{display:"flex",justifyContent:"center",p:2},children:s(or,{in:!0,children:s(ar,{children:t(dr,{title:"Role Management",subtitle:"Manage roles, permissions, and access control",icon:s(yr,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:"Create Role",icon:s(_e,{className:"w-4 h-4"}),onPress:Oe,className:"bg-gradient-to-r from-[rgba(var(--theme-primary-rgb),0.2)] to-[rgba(var(--theme-secondary-rgb),0.2)] hover:from-[rgba(var(--theme-primary-rgb),0.3)] hover:to-[rgba(var(--theme-secondary-rgb),0.3)] border border-[rgba(var(--theme-primary-rgb),0.3)]"},{label:"Export",icon:s(xr,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-success-rgb),0.3)] bg-[rgba(var(--theme-success-rgb),0.05)] hover:bg-[rgba(var(--theme-success-rgb),0.1)]"}],children:["                                ",t("div",{className:"p-6",children:[s(mr,{stats:Te}),s(Se,{in:!0,timeout:1200,children:s("div",{className:"mb-6",children:t("div",{className:"flex flex-col gap-4",children:[t("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[s("div",{className:"w-full sm:flex-1",children:s(tr,{label:"Search Permissions",variant:"bordered",placeholder:"Search permissions by name or module...",value:f,onValueChange:We,startContent:s(ir,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:E?"sm":"md"})}),s("div",{className:"flex gap-2 w-full sm:w-auto",children:s("div",{className:"flex-1 sm:min-w-[150px]",children:t("select",{className:"w-full px-3 py-2 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",value:j,onChange:e=>ze(e.target.value),children:[s("option",{value:"all",children:"All Modules"}),Ge.map(e=>s("option",{value:e,children:e},e))]})})})]}),(f||j!=="all")&&t("div",{className:"flex flex-wrap gap-2",children:[f&&t(te,{variant:"flat",color:"primary",size:"sm",onClose:()=>xe(""),children:["Search: ",f]}),j!=="all"&&t(te,{variant:"flat",color:"secondary",size:"sm",onClose:()=>ye("all"),children:["Module: ",j]})]})]})})}),s(Se,{in:!0,timeout:1400,children:t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s("div",{className:"lg:col-span-1",children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-lg p-4",children:[s("div",{className:"flex items-center justify-between mb-4",children:t(C,{variant:"h6",className:"font-bold flex items-center gap-2",children:[s(ce,{className:"w-5 h-5"}),"Roles (",y.length,")"]})}),s("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:y.map(e=>s("div",{className:`p-3 rounded-lg border transition-all duration-200 cursor-pointer ${b===e.id?"bg-gradient-to-r from-blue-500/20 to-purple-500/20 border-blue-400/50":"bg-white/5 border-white/10 hover:bg-white/10"}`,onClick:()=>Le(e.id),children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center gap-3",children:[s("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ${b===e.id?"bg-gradient-to-r from-blue-500 to-purple-500":"bg-gray-500"}`,children:e.name.charAt(0).toUpperCase()}),t("div",{children:[s(C,{variant:"body2",className:"font-medium",children:e.name}),t(C,{variant:"caption",color:"textSecondary",children:[le(e.id).length," permissions"]}),e.name==="Super Administrator"&&s(te,{label:"System",size:"sm",className:"ml-1"})]})]}),Ie(e)&&t("div",{className:"flex gap-1",children:[s(Ae,{size:"small",onClick:o=>{o.stopPropagation(),He(e)},className:"text-gray-400 hover:text-blue-400",children:s(gr,{className:"w-4 h-4"})}),s(Ae,{size:"small",onClick:o=>{o.stopPropagation(),Qe(e)},className:"text-gray-400 hover:text-red-400",children:s(br,{className:"w-4 h-4"})})]})]})},e.id))})]})}),s("div",{className:"lg:col-span-2",children:s("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-lg p-4",children:d?t(Ce,{children:[t("div",{className:"flex items-center justify-between mb-4",children:[t(C,{variant:"h6",className:"font-bold flex items-center gap-2",children:[s(Ne,{className:"w-5 h-5"}),d.name," Permissions"]}),s(te,{label:`${h.size} granted`,color:"primary",variant:"flat"})]}),"                                                        ",s("div",{className:"max-h-96 overflow-y-auto space-y-3",children:Object.entries(Ee).map(([e,o])=>{const n=o.permissions,m=n.filter(g=>I(d.id,g.name)).length,c=n.length,w=m===c,p=m>0,k=c>0?Math.round(m/c*100):0;return t(Nr,{sx:{background:p?"linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(168, 85, 247, 0.15))":"rgba(255, 255, 255, 0.05)",border:p?"1px solid rgba(102, 126, 234, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px !important","&:before":{display:"none"},"&.Mui-expanded":{background:p?"linear-gradient(135deg, rgba(102, 126, 234, 0.25), rgba(168, 85, 247, 0.25))":"rgba(255, 255, 255, 0.08)",borderColor:p?"rgba(102, 126, 234, 0.5)":"rgba(255, 255, 255, 0.2)"},"&:hover":{background:p?"linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(168, 85, 247, 0.2))":"rgba(255, 255, 255, 0.08)"}},children:[s(Tr,{expandIcon:s(Xe,{className:"w-5 h-5 text-gray-400"}),sx:{borderRadius:"16px","&.Mui-expanded":{borderRadius:"16px 16px 0 0"},minHeight:"64px","& .MuiAccordionSummary-content":{margin:"12px 0",alignItems:"center"}},children:t("div",{className:"flex items-center justify-between w-full mr-4",children:[t("div",{className:"flex items-center gap-3",children:[t("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm ${w?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":p?"bg-gradient-to-r from-orange-500 to-amber-500 text-white":"bg-gray-500/20 text-gray-400"}`,children:[k,"%"]}),"                                                                        ",t("div",{children:[s(C,{variant:"subtitle1",className:"font-semibold text-white",children:o.name}),s(C,{variant:"caption",color:"textSecondary",className:"block",children:o.description}),s("div",{className:"flex items-center gap-2 mt-1",children:t(C,{variant:"caption",color:"textSecondary",children:[m," of ",c," permissions granted"]})})]})]}),t("div",{className:"flex items-center gap-2",children:[t("div",{className:"text-right mr-2",children:[s(C,{variant:"caption",color:"textSecondary",className:"block",children:"Module Toggle"}),s("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${w?"bg-green-500/20 text-green-400 border border-green-500/30":p?"bg-orange-500/20 text-orange-400 border border-orange-500/30":"bg-gray-500/20 text-gray-400 border border-gray-500/30"}`,children:w?"Full Access":p?"Partial":"No Access"})]}),"                                                                                    ",s(nr,{checked:w,onChange:g=>{g.stopPropagation(),Ue(e)},disabled:A||(d==null?void 0:d.name)==="Super Administrator"&&!x,sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#10b981","&:hover":{backgroundColor:"rgba(16, 185, 129, 0.08)"}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#10b981"},"& .MuiSwitch-track":{backgroundColor:p?"#f59e0b":"#6b7280"}}})]})]})}),"                                                                        ",s(Mr,{sx:{pt:0,pb:3,px:3},children:s("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:n.map(g=>{const J=I(d.id,g.name),se=A||(d==null?void 0:d.name)==="Super Administrator"&&!x;return s("div",{className:`p-3 border rounded-xl transition-all duration-200 ${se?"cursor-not-allowed opacity-50":"cursor-pointer hover:bg-white/5"} ${J?"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-500/30":"bg-white/5 border-white/10 hover:border-white/20"}`,onClick:X=>{X.preventDefault(),X.stopPropagation(),se||we(g.name)},children:s(lr,{control:s(fr,{checked:J,onChange:X=>{X.preventDefault(),X.stopPropagation(),se||we(g.name)},disabled:se,sx:{color:J?"#10b981":"rgba(255, 255, 255, 0.5)","&.Mui-checked":{color:"#10b981"},"&:hover":{backgroundColor:"rgba(16, 185, 129, 0.08)"}}}),label:t("div",{children:[s(C,{variant:"body2",className:`font-medium ${J?"text-green-400":"text-white"}`,children:g.display_name||g.name}),s(C,{variant:"caption",className:`${J?"text-green-300/70":"text-gray-400"}`,children:g.name})]}),className:"m-0 w-full pointer-events-none"})},g.id)})})})]},e)})})]}):t("div",{className:"flex flex-col items-center justify-center h-48 text-center",children:[s(ce,{className:"w-16 h-16 text-gray-400 mb-4"}),s(C,{variant:"h6",color:"textSecondary",children:"Select a role to manage permissions"}),s(C,{variant:"body2",color:"textSecondary",children:"Choose a role from the left panel to view and edit its permissions                                                        "}),"                                                    "]})})})]})})]})]})})})})]})};Er.layout=r=>s(cr,{children:r});export{Er as default};
