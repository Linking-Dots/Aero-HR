import{b as e,a as n,J as A,r as i,F as k,Q}from"./app-WmnCG5Fz.js";import{T as E,u as B,I as U,G as F,E as L,e as $,i as I,b as j,d as J,g as O,B as V,A as z}from"./App-0uPz_bAn.js";import{P as X}from"./PageHeader-Bf4j3zU9.js";import{S as Z}from"./StatsCards-CZDQB0V2.js";import{E as K}from"./Edit-Be1kS5HN.js";import{D as ee}from"./Delete-BsL4Cslu.js";import{a as te,b as re,c as ae,d as oe,e as le,t as se}from"./chunk-F3UDT23P-BsXw7IEw.js";import{t as P}from"./chunk-7ZZXWEXF-BmpCvzUQ.js";import{C as ie}from"./Clear-D4MRFZIQ.js";import{G as M}from"./GlassDialog-kOw4xbGN.js";import{D as G}from"./DialogTitle-Dsnnaw8D.js";import{T}from"./TextField-DU2E4T2B.js";import{b as R,c as W}from"./DialogContent-gof1vnkQ.js";import{L as ne}from"./LoadingButton-DZDXZxCX.js";import{C as Y}from"./CircularProgress-CIBZ8liK.js";import{D as de}from"./DialogContentText-B6QZJiKn.js";import{B as H}from"./Button-DPHVCAGE.js";import{F as ce}from"./ChartBarIcon-DRSFaDW-.js";import{F as ue}from"./CheckCircleIcon-CBAc1kti.js";import{F as pe}from"./PlusIcon-BXx3UOyn.js";import"./app-DNvvDii_.js";import"./chunk-D5XJWRAV-CO6zSkN0.js";import"./useHasTabbableChild-WTz0rn8D.js";import"./chunk-7F3ZLNJ6-BhrcPkoD.js";import"./Select-CvEed4dx.js";import"./Popover-CYXCxQSs.js";import"./List-CVlkUtIP.js";const me=({holidaysData:c,handleClickOpen:u,setCurrentHoliday:g,openModal:m,setHolidaysData:t})=>{const b=(a,s)=>{const o=a[s];switch(s){case"title":return o;case"from_date":return new Date(o).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"});case"to_date":return new Date(o).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"});case"actions":return n("div",{className:"relative flex items-center gap-2",children:[e(P,{content:"Edit Holiday",children:e("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>{g(a),m("edit_holiday")},children:e(K,{})})}),e(P,{content:"Delete Holiday",color:"danger",children:e("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:()=>u(a.id,"delete_holiday"),children:e(ee,{})})})]});default:return o}},r=[{name:"Title",uid:"title"},{name:"From Date",uid:"from_date"},{name:"To Date",uid:"to_date"},{name:"Actions",uid:"actions"}];return e("div",{style:{maxHeight:"84vh",overflowY:"auto"},children:c.length===0?e(E,{variant:"h6",align:"center",sx:{mt:2},children:"No holidays"}):n(se,{isStriped:!0,selectionMode:"multiple",selectionBehavior:"toggle",isHeaderSticky:!0,removeWrapper:!0,"aria-label":"Holiday Table",children:[e(te,{columns:r,children:a=>e(re,{align:a.uid==="actions"?"center":"start",children:a.name},a.uid)}),e(ae,{items:c,children:a=>e(oe,{children:s=>e(le,{style:{whiteSpace:"nowrap"},children:b(a,s)})},a.id)})]})})},N=({open:c,closeModal:u,holidaysData:g,setHolidaysData:m,currentHoliday:t})=>{const{auth:b}=A().props,r=B(),[a,s]=i.useState((t==null?void 0:t.title)||""),[o,D]=i.useState((t==null?void 0:t.from_date)||""),[v,_]=i.useState((t==null?void 0:t.to_date)||""),[p,d]=i.useState({}),[f,h]=i.useState(!1);return n(M,{open:c,onClose:u,fullWidth:!0,maxWidth:"sm",children:[n(G,{sx:{display:"flex",alignItems:"center"},children:[e(E,{variant:"h6",children:"Add Holiday"}),e(U,{onClick:u,sx:{position:"absolute",top:8,right:16},children:e(ie,{})})]}),n("form",{onSubmit:async y=>{y.preventDefault(),h(!0);const q=new Promise(async(C,x)=>{try{const l={title:a,fromDate:o,toDate:v};t&&(l.id=t.id);const S=await axios.post(route("holiday-add"),l);S.status===200&&(m(S.data.holidays),C([S.data.message||"Holiday added successfully"]),u())}catch(l){h(!1),l.response?(l.response.status===422?(d(l.response.data.errors||{}),x(l.response.statusText||"Failed to add holiday")):x("An unexpected error occurred. Please try again later."),console.error(l.response)):l.request?(x("No response received from the server. Please check your internet connection."),console.error(l.request)):(x("An error occurred while setting up the request."),console.error("Error",l.message))}finally{h(!1)}});L.promise(q,{pending:{render(){return n("div",{style:{display:"flex",alignItems:"center"},children:[e(Y,{}),e("span",{style:{marginLeft:"8px"},children:"Adding holiday..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:C}){return e(k,{children:C.map((x,l)=>e("div",{children:x},l))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:C}){return e(k,{children:C})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})},children:[e(R,{children:n(F,{container:!0,spacing:2,children:[e(F,{item:!0,xs:12,md:6,children:e(T,{label:"Title",type:"text",fullWidth:!0,value:a,onChange:y=>s(y.target.value),InputLabelProps:{shrink:!0},error:!!p.title,helperText:p.title})}),e(F,{item:!0,xs:12,md:6,children:e(T,{label:"From",type:"date",fullWidth:!0,value:o,onChange:y=>D(y.target.value),InputLabelProps:{shrink:!0},error:!!p.fromDate,helperText:p.fromDate})}),e(F,{item:!0,xs:12,md:6,children:e(T,{label:"To",type:"date",fullWidth:!0,value:v,onChange:y=>_(y.target.value),InputLabelProps:{shrink:!0},error:!!p.toDate,helperText:p.toDate})})]})}),e(W,{sx:{padding:"16px",justifyContent:"center"},children:e(ne,{type:"submit",variant:"outlined",color:"primary",loading:f,disabled:f,sx:{borderRadius:"50px"},children:"Submit"})})]})]})},he=({open:c,handleClose:u,holidayIdToDelete:g,setHolidaysData:m})=>{const t=B();return n(M,{open:c,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e(G,{id:"alert-dialog-title",children:"Confirm Deletion"}),e(R,{children:e(de,{id:"alert-dialog-description",children:"Are you sure you want to delete this holiday? This action cannot be undone."})}),n(W,{children:[e(H,{onClick:u,color:"primary",children:"Cancel"}),e(H,{onClick:()=>{const r=new Promise(async(a,s)=>{try{const o=await axios.delete(route("holiday-delete",{id:g,route:route().current()}));o.status===200&&(m(o.data.holidays),a("Holiday deleted successfully"))}catch(o){console.error("Error deleting task:",o),s(o.response.data.error||"Failed to delete holiday")}finally{u()}});L.promise(r,{pending:{render(){return n("div",{style:{display:"flex",alignItems:"center"},children:[e(Y,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting holiday..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:t.glassCard.background,border:t.glassCard.border,color:t.palette.text.primary}},success:{render({data:a}){return e(k,{children:a})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:t.glassCard.background,border:t.glassCard.border,color:t.palette.text.primary}},error:{render({data:a}){return e(k,{children:a})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:t.glassCard.background,border:t.glassCard.border,color:t.palette.text.primary}}})},color:"error",autoFocus:!0,children:"Delete"})]})]})},ye=({title:c})=>{const{auth:u,holidays:g}=A().props,m=B();$(m.breakpoints.down("sm"));const[t,b]=i.useState({type:null,holidayId:null,currentHoliday:null}),[r,a]=i.useState(g),s=i.useCallback((d,f=null,h=null)=>{b({type:d,holidayId:f,currentHoliday:h})},[]),o=i.useCallback(()=>{b({type:null,holidayId:null,currentHoliday:null})},[]),D=i.useCallback(d=>{a(d)},[]),v=i.useMemo(()=>{const d=new Date().getFullYear(),f=r.filter(w=>new Date(w.date).getFullYear()===d),h=r.filter(w=>new Date(w.date)>new Date);return[{title:"Total",value:r.length,icon:e(ce,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All holidays"},{title:"This Year",value:f.length,icon:e(I,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Current year holidays"},{title:"Upcoming",value:h.length,icon:e(ue,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Future holidays"}]},[r]),_=[{label:"Add Holiday",icon:e(pe,{className:"w-4 h-4"}),onPress:()=>s("add_holiday"),className:O.primaryButton}],p=i.useMemo(()=>({open:!!t.type,closeModal:o,setHolidaysData:D,holidaysData:r,currentHoliday:t.currentHoliday}),[t.type,o,D,r,t.currentHoliday]);return n(k,{children:[e(Q,{title:c}),t.type==="add_holiday"&&e(N,{...p}),t.type==="edit_holiday"&&e(N,{...p}),t.type==="delete_holiday"&&e(he,{open:!0,holidayId:t.holidayId,setHolidaysData:D,closeModal:o,holidaysData:r}),e(V,{sx:{display:"flex",justifyContent:"center",p:2},children:e(j,{in:!0,children:e(J,{children:e(X,{title:"Holiday Management",subtitle:"Manage company holidays and special occasions",icon:e(I,{className:"w-8 h-8"}),actionButtons:_,children:n("div",{className:"p-6",children:[e(Z,{stats:v,gridCols:"grid-cols-3"}),e(me,{holidaysData:r,onEdit:d=>s("edit_holiday",null,d),onDelete:d=>s("delete_holiday",d)})]})})})})})]})};ye.layout=c=>e(z,{children:c});export{ye as default};
