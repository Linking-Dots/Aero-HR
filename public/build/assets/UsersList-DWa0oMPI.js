import{r as o,b as t,j as e,s as de,f as Z,t as vt,F as dt,a as Ke,Q as wt,c as J,e as K}from"./app-MpRbYhkS.js";import{u as ue,ap as Ze,aq as Xe,ar as ce,d as oe,as as Ye,aF as Nt,o as ie,av as ct,au as yt,r as U,B as ne,T as w,I as me,f as y,S as R,a as et,aw as he,X as tt,c as _t,b as at,G as Pt,e as Ct,i as kt,p as Rt,ax as St,q as Ft,h as ee,A as It}from"./App-ChX5VV_r.js";import{P as At}from"./PageHeader-CC10cuU_.js";import{S as jt}from"./StatsCards-CJ5Ssr_v.js";import{F as Ut}from"./EllipsisVerticalIcon-DNOdx7A-.js";import{F as mt}from"./PencilIcon-Cak8D3Xc.js";import{t as Tt,a as $t,b as Et,c as Lt,d as Dt,e as zt}from"./chunk-F3UDT23P-DKqst6lu.js";import{p as ht}from"./chunk-O5I3QTYU-BaX5EXwf.js";import{u as ut}from"./chunk-R6AK6OQ4-Cxa4-o0g.js";import{C as Ot}from"./Clear-CsKEgwOF.js";import{G as Wt}from"./GlassDialog-CrLmwJCc.js";import{P as Bt}from"./Password-YNHgIGSt.js";import{V as rt,a as st}from"./VisibilityOff-DWRn3A7f.js";import{D as Mt}from"./DialogTitle-B87vulL7.js";import{A as Gt}from"./Avatar-M_iWVyCW.js";import{P as Vt}from"./PhotoCamera-hZ8NRYfp.js";import{T as $,F as se}from"./TextField-UdoyefGR.js";import{I as le}from"./InputLabel-CPjNQET0.js";import{M as E}from"./MenuItem-PLPDg3_f.js";import{b as qt,c as Ht}from"./DialogContent-Bq3dEBgs.js";import{L as Qt}from"./LoadingButton-CCeyjCVT.js";import{s as X,l as te}from"./chunk-2GIFKCNQ-Bnl4m-aj.js";import{F as lt}from"./CheckCircleIcon-BmWdTM3l.js";import{F as it}from"./XCircleIcon-B4LCdjsW.js";import{F as Jt}from"./TrophyIcon-CvXHlo0w.js";import{F as Kt}from"./UserPlusIcon-CZRFAfxc.js";import{F as Zt}from"./ChartPieIcon-BEjMOqHB.js";import{F as Xt}from"./ExclamationTriangleIcon-BE7yaTBp.js";import{F as Yt}from"./TableCellsIcon-Bnkn_f2f.js";import{b as ea,F as ta}from"./AdjustmentsHorizontalIcon-NmyeYt19.js";import{C as aa}from"./CircularProgress-BVgMTZG7.js";import"./app-CYPnucT-.js";import"./chunk-D5XJWRAV-Dkfk7po4.js";import"./chunk-MZRCPRP2-B90AE6mW.js";import"./LiveAnnouncer-C2FyYgAC.js";import"./useHasTabbableChild-CnYlH9ZU.js";import"./chunk-7F3ZLNJ6-CF7c3QhX.js";import"./index-CokAva9Y.js";import"./useSlot-D_8OGX0s.js";import"./Select-yj1GpTXy.js";import"./Popover-DRLuHBe9.js";import"./List-zZ64sibn.js";import"./listItemTextClasses-LbtaCQDN.js";import"./dividerClasses-DyD1oX6F.js";import"./Button-CiQQsF2p.js";import"./chunk-2PG5BJX6-3Oho7bh0.js";function ra({title:i,titleId:A,...S},b){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:b,"aria-labelledby":A},S),i?o.createElement("title",{id:A},i):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const nt=o.forwardRef(ra),sa=({allUsers:i,roles:A,isMobile:S,isTablet:b,setUsers:L,pagination:f,onPageChange:N,onRowsPerPageChange:P,totalUsers:F=0,onEdit:V,loading:m=!1,updateUserOptimized:Y,deleteUserOptimized:d,toggleUserStatusOptimized:O,updateUserRolesOptimized:W})=>{const[j,q]=o.useState({});ue();const h=(a,r,v)=>{q(c=>({...c,[`${a}-${r}`]:v}))},D=(a,r)=>j[`${a}-${r}`]||!1;async function B(a,r){h(a,"role",!0);const v=new Promise(async(c,p)=>{var z;try{const l=await axios.post(route("user.updateRole",{id:a}),{roles:r});l.status===200&&(W&&W(a,r),c([l.data.message||"Role updated successfully"]))}catch(l){((z=l.response)==null?void 0:z.status)===422?p(l.response.data.errors||["Failed to update user role."]):p(["An unexpected error occurred. Please try again later."])}finally{h(a,"role",!1)}});return U.promise(v,{pending:"Updating employee role...",success:{render({data:c}){return c.join(", ")}},error:{render({data:c}){return Array.isArray(c)?c.join(", "):c}}}),v}const H=o.useMemo(()=>{const a=[{name:"#",uid:"sl"},{name:"USER",uid:"user"},{name:"EMAIL",uid:"email"},{name:"DEPARTMENT",uid:"department"},{name:"STATUS",uid:"status"},{name:"ROLES",uid:"roles"},{name:"ACTIONS",uid:"actions"}];return!S&&!b?a.splice(3,0,{name:"PHONE",uid:"phone"}):S&&a.splice(a.findIndex(r=>r.uid==="department"),1),a},[S,b]),T=async(a,r)=>{if(!D(a,"status")){h(a,"status",!0);try{O?(O(a,!r),U.success(`User status ${r?"deactivated":"activated"} successfully`)):L&&(L(v=>v.map(c=>c.id===a?{...c,active:!r}:c)),U.success(`User status ${r?"deactivated":"activated"} successfully`))}catch(v){console.error("Error toggling user status:",v),U.error("Failed to update user status")}finally{h(a,"status",!1)}}},M=(a,r,v)=>{var p;const c=a[r];switch(r){case"sl":const _=(f!=null&&f.currentPage&&(f!=null&&f.perPage)?Number((f.currentPage-1)*f.perPage):0)+(typeof v=="number"?v:0)+1;return e("div",{className:"flex items-center justify-center",children:e("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e("span",{className:"text-sm font-semibold text-foreground",children:_})})});case"user":return e(ut,{avatarProps:{radius:"lg",src:a==null?void 0:a.profile_image,size:"sm",fallback:e(oe,{className:"w-4 h-4"})},name:(a==null?void 0:a.name)||"",classNames:{name:"font-semibold text-foreground",description:"text-default-500"}});case"email":return t("div",{className:"flex items-center",children:[e(yt,{className:"w-4 h-4 text-default-400 mr-2"}),e("span",{className:"text-sm",children:a.email})]});case"phone":return t("div",{className:"flex items-center",children:[e(ct,{className:"w-4 h-4 text-default-400 mr-2"}),e("span",{className:"text-sm",children:a.phone||"N/A"})]});case"department":return t("div",{className:"flex items-center",children:[e(ie,{className:"w-4 h-4 text-default-400 mr-2"}),e("span",{className:"text-sm",children:(a==null?void 0:a.department)||"N/A"})]});case"status":return t("div",{className:"flex items-center justify-center",children:[e(Nt,{size:"sm",color:a.active?"success":"danger",isSelected:a.active,isDisabled:D(a.id,"status"),startContent:D(a.id,"status")?e(de,{size:"sm"}):null,onChange:()=>T(a.id,a.active),classNames:{wrapper:"group-data-[selected=true]:bg-success-500 group-data-[selected=false]:bg-danger-500"}}),e("span",{className:"ml-2 text-xs",children:a.active?"Active":"Inactive"})]});case"roles":const I=((p=a.roles)==null?void 0:p.map(u=>typeof u=="object"&&u!==null?u.name:u))||[],g=new Set(I),G=Array.from(g).join(", ")||"No Roles";return e("div",{className:"flex items-center",children:t(Ye,{isDisabled:D(a.id,"role"),className:"max-w-[220px]",children:[e(Ze,{children:e(Z,{className:"capitalize",variant:"bordered",size:"sm",startContent:D(a.id,"role")?e(de,{size:"sm"}):null,children:G})}),e(Xe,{disallowEmptySelection:!1,"aria-label":"Multiple selection example",closeOnSelect:!1,selectedKeys:g,selectionMode:"multiple",variant:"flat",onSelectionChange:u=>{const Q=Array.from(u);B(a.id,Q)},children:(A||[]).map(u=>e(ce,{children:typeof u=="object"&&u!==null?u.name:u},typeof u=="object"&&u!==null?u.name:u))})]})});case"actions":return e("div",{className:"flex justify-center items-center",children:t(Ye,{children:[e(Ze,{children:e(Z,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",children:e(Ut,{className:"w-4 h-4"})})}),t(Xe,{"aria-label":"User Actions",children:[e(ce,{textValue:"View Profile",href:route("profile",{user:a.id}),as:vt,className:"text-blue-500",startContent:e(oe,{className:"w-4 h-4"}),children:"View Profile"}),e(ce,{textValue:"Edit User",onPress:u=>{u.preventDefault(),V&&V(a)},className:"text-amber-500",startContent:e(mt,{className:"w-4 h-4"}),children:"Edit"})]})]})});default:return c}};return t("div",{className:"w-full overflow-hidden flex flex-col border border-white/10 rounded-lg",style:{maxHeight:"calc(100vh - 200px)"},children:[e("div",{className:"overflow-auto flex-grow",children:t(Tt,{"aria-label":"Users table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs sticky top-0 z-10",td:"border-b border-white/5 py-3",table:"border-collapse",thead:"bg-white/5",tr:"hover:bg-white/5"},children:[e($t,{columns:H,children:a=>e(Et,{align:a.uid==="actions"||a.uid==="sl"?"center":"start",width:a.uid==="sl"?60:void 0,children:a.name},a.uid)}),e(Lt,{items:i||[],emptyContent:"No users found",loadingContent:e(de,{}),isLoading:m,children:(a,r)=>{const v=i?i.findIndex(c=>c.id===a.id):r;return e(Dt,{children:c=>e(zt,{children:M(a,c,v)})},a.id)}})]})}),!i||!F||m?null:t("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10 bg-white/5 backdrop-blur-md",children:[t("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(f.currentPage-1)*f.perPage+1," to ",Math.min(f.currentPage*f.perPage,F)," of ",F," users"]}),e(ht,{total:Math.ceil(F/f.perPage),initialPage:f.currentPage,page:f.currentPage,onChange:N,size:S?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]})]})},ot=({user:i,allUsers:A,departments:S,designations:b,setUsers:L,open:f,closeModal:N,editMode:P=!1})=>{const[F,V]=o.useState(!1),[m,Y]=o.useState({id:(i==null?void 0:i.id)||"",name:(i==null?void 0:i.name)||"",user_name:(i==null?void 0:i.user_name)||"",gender:(i==null?void 0:i.gender)||"",birthday:(i==null?void 0:i.birthday)||"",date_of_joining:(i==null?void 0:i.date_of_joining)||"",address:(i==null?void 0:i.address)||"",employee_id:(i==null?void 0:i.employee_id)||"",phone:(i==null?void 0:i.phone)||"",email:(i==null?void 0:i.email)||"",department_id:(i==null?void 0:i.department_id)||"",designation_id:(i==null?void 0:i.designation_id)||"",report_to:(i==null?void 0:i.report_to)||"",password:"",confirmPassword:"",roles:(i==null?void 0:i.roles)||[]}),[d,O]=o.useState({}),[W,j]=o.useState(!1),[q,h]=o.useState(!1),[D,B]=o.useState((i==null?void 0:i.profile_image)||null),[H,T]=o.useState(null),[M,C]=o.useState(A),a=ue();o.useEffect(()=>{i!=null&&i.profile_image&&B(i.profile_image)},[i]);const r=async l=>{var I;l.preventDefault(),j(!0);const _=new FormData;if(Object.keys(m).forEach(g=>{g==="roles"&&Array.isArray(m[g])?m[g].forEach((G,u)=>{_.append(`roles[${u}]`,G)}):m[g]!==null&&m[g]!==void 0&&_.append(g,m[g])}),H){const g=H.type;if(["image/jpeg","image/jpg","image/png"].includes(g))_.append("profile_image",H);else{U.error("Invalid file type. Only JPEG and PNG are allowed.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:a.glassCard.background,border:a.glassCard.border,color:a.palette.text.primary}}),j(!1);return}}try{const g=P?route("updateUser",{id:i.id}):route("addUser"),G=P?"put":"post",u=await axios[G](g,_);u.status===200&&(L&&L(P?Q=>Q.map(ae=>ae.id===u.data.user.id?u.data.user:ae):Q=>[...Q,u.data.user]),U.success(((I=u.data.messages)==null?void 0:I.length)>0?u.data.messages.join(" "):`User ${P?"updated":"added"} successfully`,{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:a.glassCard.background,border:a.glassCard.border,color:a.palette.text.primary}}),N())}catch(g){j(!1),v(g)}finally{j(!1)}},v=l=>{l.response?l.response.status===422?(O(l.response.data.errors||{}),U.error(l.response.data.error||`Failed to ${P?"update":"add"} user.`,{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:a.glassCard.background,border:a.glassCard.border,color:a.palette.text.primary}})):U.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:a.glassCard.background,border:a.glassCard.border,color:a.palette.text.primary}}):l.request?U.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:a.glassCard.background,border:a.glassCard.border,color:a.palette.text.primary}}):U.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:a.glassCard.background,border:a.glassCard.border,color:a.palette.text.primary}})},c=l=>{const _=l.target.files[0];if(_){const I=URL.createObjectURL(_);B(I),T(_)}},p=(l,_)=>{Y(I=>({...I,[l]:_})),d[l]&&O(I=>{const g={...I};return delete g[l],g})},z=()=>{V(!F)};return t(Wt,{open:f,onClose:N,fullWidth:!0,maxWidth:"md",sx:{"& .MuiPaper-root":{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:a.glassCard.background,border:a.glassCard.border,borderRadius:"16px",color:a.palette.text.primary,boxShadow:a.glassCard.boxShadow}},children:[e(Mt,{sx:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",pb:2},children:t(ne,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e(w,{variant:"h6",component:"div",sx:{fontWeight:600},children:P?"Edit User":"Add New User"}),e(me,{"aria-label":"close",onClick:N,sx:{color:a.palette.grey[500],"&:hover":{color:a.palette.primary.main}},children:e(Ot,{})})]})}),e(qt,{sx:{pt:3},children:e("form",{onSubmit:r,children:t(y,{container:!0,spacing:3,children:[e(y,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center",mb:2},children:t(ne,{onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),sx:{position:"relative"},children:[e(Gt,{src:D,alt:"Profile",sx:{width:120,height:120,border:"4px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",filter:q?"brightness(70%)":"brightness(100%)",transition:"all 0.3s ease"}}),t(ne,{component:"label",htmlFor:"icon-button-file",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:q?1:0,transition:"opacity 0.3s ease",cursor:"pointer"},children:[e("input",{accept:"image/*",id:"icon-button-file",type:"file",style:{display:"none"},onChange:c}),e(Vt,{sx:{color:"white",fontSize:32}})]})]})}),e(y,{item:!0,xs:12,md:6,children:e(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Full Name",value:m.name,onChange:l=>p("name",l.target.value),error:!!d.name,helperText:d.name,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:a.palette.text.secondary}},required:!0})})}),e(y,{item:!0,xs:12,md:6,children:e(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Username",value:m.user_name,onChange:l=>p("user_name",l.target.value),error:!!d.user_name,helperText:d.user_name,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:a.palette.text.secondary}},required:!0})})}),e(y,{item:!0,xs:12,md:6,children:e(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Email",type:"email",value:m.email,onChange:l=>p("email",l.target.value),error:!!d.email,helperText:d.email,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:a.palette.text.secondary}},required:!0})})}),e(y,{item:!0,xs:12,md:6,children:e(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Phone",value:m.phone,onChange:l=>p("phone",l.target.value),error:!!d.phone,helperText:d.phone,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:a.palette.text.secondary}}})})}),e(y,{item:!0,xs:12,md:6,children:t(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(le,{id:"department-label",sx:{color:a.palette.text.secondary},children:"Department"}),t(X,{labelId:"department-label",value:m.department_id,onChange:l=>p("department_id",l.target.value),label:"Department",error:!!d.department_id,sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[e(E,{value:"",children:e("em",{children:"None"})}),S==null?void 0:S.map(l=>e(E,{value:l.id,children:l.name},l.id))]}),d.department_id&&e(se,{error:!0,children:d.department_id})]})}),e(y,{item:!0,xs:12,md:6,children:t(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(le,{id:"designation-label",sx:{color:a.palette.text.secondary},children:"Designation"}),t(X,{labelId:"designation-label",value:m.designation_id,onChange:l=>p("designation_id",l.target.value),label:"Designation",error:!!d.designation_id,sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[e(E,{value:"",children:e("em",{children:"None"})}),b==null?void 0:b.map(l=>e(E,{value:l.id,children:l.name},l.id))]}),d.designation_id&&e(se,{error:!0,children:d.designation_id})]})}),e(y,{item:!0,xs:12,md:6,children:t(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(le,{id:"gender-label",sx:{color:a.palette.text.secondary},children:"Gender"}),t(X,{labelId:"gender-label",value:m.gender,onChange:l=>p("gender",l.target.value),label:"Gender",error:!!d.gender,sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[e(E,{value:"",children:e("em",{children:"Select Gender"})}),e(E,{value:"male",children:"Male"}),e(E,{value:"female",children:"Female"}),e(E,{value:"other",children:"Other"})]}),d.gender&&e(se,{error:!0,children:d.gender})]})}),e(y,{item:!0,xs:12,md:6,children:e(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Employee ID",value:m.employee_id,onChange:l=>p("employee_id",l.target.value),error:!!d.employee_id,helperText:d.employee_id,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:a.palette.text.secondary}}})})}),e(y,{item:!0,xs:12,md:6,children:e(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Date of Birth",type:"date",value:m.birthday,onChange:l=>p("birthday",l.target.value),error:!!d.birthday,helperText:d.birthday,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{shrink:!0,sx:{color:a.palette.text.secondary}}})})}),e(y,{item:!0,xs:12,md:6,children:e(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Date of Joining",type:"date",value:m.date_of_joining,onChange:l=>p("date_of_joining",l.target.value),error:!!d.date_of_joining,helperText:d.date_of_joining,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{shrink:!0,sx:{color:a.palette.text.secondary}}})})}),e(y,{item:!0,xs:12,md:6,children:t(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(le,{id:"report-to-label",sx:{color:a.palette.text.secondary},children:"Reports To"}),t(X,{labelId:"report-to-label",value:m.report_to,onChange:l=>p("report_to",l.target.value),label:"Reports To",error:!!d.report_to,sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[e(E,{value:"",children:e("em",{children:"None"})}),M==null?void 0:M.filter(l=>l.id!==m.id).map(l=>e(E,{value:l.id,children:l.name},l.id))]}),d.report_to&&e(se,{error:!0,children:d.report_to})]})}),e(y,{item:!0,xs:12,children:e(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Address",multiline:!0,rows:3,value:m.address,onChange:l=>p("address",l.target.value),error:!!d.address,helperText:d.address,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:a.palette.text.secondary}}})})}),!P&&t(dt,{children:[e(y,{item:!0,xs:12,md:6,children:e(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Password",type:F?"text":"password",value:m.password,onChange:l=>p("password",l.target.value),error:!!d.password,helperText:d.password,required:!P,InputProps:{endAdornment:e(me,{"aria-label":"toggle password visibility",onClick:z,edge:"end",children:F?e(rt,{}):e(st,{})}),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:a.palette.text.secondary}}})})}),e(y,{item:!0,xs:12,md:6,children:e(R,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Confirm Password",type:F?"text":"password",value:m.confirmPassword,onChange:l=>p("confirmPassword",l.target.value),error:!!d.confirmPassword,helperText:d.confirmPassword||(m.password!==m.confirmPassword&&m.confirmPassword?"Passwords do not match":""),required:!P,InputProps:{endAdornment:e(me,{"aria-label":"toggle password visibility",onClick:z,edge:"end",children:F?e(rt,{}):e(st,{})}),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:a.palette.text.secondary}}})})})]})]})})}),t(Ht,{sx:{justifyContent:"space-between",p:3,borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[e(Button,{onClick:N,variant:"bordered",color:"default",size:"lg",className:"bg-white/5 hover:bg-white/10 border border-white/10",children:"Cancel"}),e(Qt,{onClick:r,loading:W,loadingPosition:"start",startIcon:e(Bt,{}),variant:"contained",sx:{background:"linear-gradient(45deg, #3a7bd5 0%, #2456bd 100%)",boxShadow:"0 4px 20px 0 rgba(58, 123, 213, 0.4)","&:hover":{background:"linear-gradient(45deg, #2456bd 0%, #1a3c8a 100%)"}},children:P?"Update User":"Add User"})]})]})},la=({title:i,roles:A})=>{var pe,be,ge,fe,xe,ve,we,Ne,ye,_e,Pe,Ce,ke,Re,Se,Fe,Ie,Ae,je,Ue,Te,$e,Ee,Le,De,ze,Oe;const S=ue(),b=et(S.breakpoints.down("sm")),L=et(S.breakpoints.down("md")),[f,N]=o.useState([]),[P,F]=o.useState(!0),[V,m]=o.useState(null),[Y,d]=o.useState(0),[O,W]=o.useState(1),[j,q]=o.useState(null),[h,D]=o.useState({search:"",role:"all",status:"all",department:"all"}),[B,H]=o.useState(!1),[T,M]=o.useState("table"),[C,a]=o.useState({currentPage:1,perPage:10,total:f.length}),[r,v]=o.useState({overview:{total_users:0,active_users:0,inactive_users:0,deleted_users:0,total_roles:0,total_departments:0},distribution:{by_role:[],by_department:[],by_status:[]},activity:{recent_registrations:{new_users_30_days:0,new_users_90_days:0,new_users_year:0,recently_active:0},user_growth_rate:0,current_month_registrations:0},security:{access_metrics:{users_with_roles:0,users_without_roles:0,admin_users:0,regular_users:0},role_distribution:[]},health:{status_ratio:{active_percentage:0,inactive_percentage:0,deleted_percentage:0},system_metrics:{user_activation_rate:0,role_coverage:0,department_coverage:0}},quick_metrics:{total_users:0,active_ratio:0,role_diversity:0,department_diversity:0,recent_activity:0,system_health_score:0}}),c=o.useMemo(()=>({data:f,total:Y,current_page:C.currentPage,per_page:C.perPage,last_page:O}),[f,Y,C.currentPage,C.perPage,O]),p=o.useCallback(async()=>{try{const{data:s}=await Ke.get(route("users.stats"));s.stats&&v(s.stats)}catch(s){console.error("Error fetching user stats:",s)}},[]),z=o.useCallback(async()=>{F(!0);try{const s=await Ke.get(route("users.paginate"),{params:{page:C.currentPage,perPage:C.perPage,search:h.search||void 0,role:h.role!=="all"?h.role:void 0,status:h.status!=="all"?h.status:void 0,department:h.department!=="all"?h.department:void 0}});if(s.status===200){const{users:n}=s.data;n.data&&Array.isArray(n.data)?(N(n.data),d(n.total||n.data.length),W(n.last_page||1)):Array.isArray(n)?(N(n),d(n.length),W(1)):(console.error("Unexpected users data format:",n),N([]),d(0),W(1))}}catch(s){console.error("Error fetching users:",s),U.error("Failed to load users data"),N([])}finally{F(!1)}},[h,C.currentPage,C.perPage]);o.useEffect(()=>{z()},[z]),o.useEffect(()=>{p();const s=setInterval(p,6e4);return()=>clearInterval(s)},[p]);const l=(s,n)=>{D(x=>({...x,[s]:n})),a(x=>({...x,currentPage:1}))},_=s=>{a(n=>({...n,currentPage:s})),window.scrollTo({top:0,behavior:"smooth"})},I=s=>{a(n=>({...n,currentPage:1,perPage:s}))},g=o.useCallback((s,n=null)=>{q(s),m(n)},[]),G=o.useCallback(()=>{q(null),m(null)},[]),u=o.useCallback(s=>{N(s)},[]),Q=o.useCallback(s=>{N(n=>n.map(x=>x.id===s.id?{...x,...s}:x))},[]),ae=o.useCallback(s=>{N(n=>n.filter(x=>x.id!==s)),p()},[p]),pt=o.useCallback((s,n)=>{N(x=>x.map(k=>k.id===s?{...k,active:n}:k)),p()},[p]),bt=o.useCallback((s,n)=>{N(x=>x.map(k=>k.id===s?{...k,roles:n}:k))},[]),gt=({user:s,index:n})=>{var x;return e(J,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>window.location.href=route("profile",{user:s.id}),children:t(K,{className:"p-4 flex flex-col h-full",children:[t("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e(ut,{avatarProps:{radius:"lg",src:s==null?void 0:s.profile_image,size:"md",fallback:e(oe,{className:"w-5 h-5"})},classNames:{name:"font-semibold text-foreground text-sm",description:"text-default-500 text-xs"}}),e("div",{className:"flex-1 min-w-0",children:t("div",{className:"flex items-start justify-between",children:[t("div",{children:[e("h3",{className:"font-semibold text-foreground text-sm line-clamp-1",children:s.name}),e("p",{className:"text-default-500 text-xs",children:s.email})]}),e(Z,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground ml-2",onPress:k=>{k.stopPropagation(),window.location.href=route("profile",{user:s.id})},children:e(mt,{className:"w-4 h-4"})})]})})]}),t("div",{className:"flex-1 flex flex-col gap-3",children:[s.phone&&t("div",{className:"flex items-center gap-2 text-sm",children:[e(ct,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs line-clamp-1",children:s.phone})]}),(s.department||s.department_id)&&t("div",{className:"flex items-center gap-2 text-sm",children:[e(ie,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs",children:typeof s.department=="string"?s.department:"N/A"})]})]}),t("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[e(ee,{size:"sm",variant:s.active?"solid":"bordered",color:s.active?"success":"danger",className:"text-xs",startContent:s.active?e(lt,{className:"w-3 h-3"}):e(it,{className:"w-3 h-3"}),children:s.active?"Active":"Inactive"}),(x=s.roles)==null?void 0:x.map((k,re)=>e(ee,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e(oe,{className:"w-3 h-3"}),children:k},re))]})]})})},ft=o.useMemo(()=>{var s,n,x,k,re,We,Be,Me,Ge,Ve,qe,He,Qe,Je;return[{title:"Total Users",value:((s=r==null?void 0:r.overview)==null?void 0:s.total_users)||0,icon:e(he,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All users"},{title:"Active Users",value:((n=r==null?void 0:r.overview)==null?void 0:n.active_users)||0,icon:e(lt,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((k=(x=r==null?void 0:r.health)==null?void 0:x.status_ratio)==null?void 0:k.active_percentage)||0}% Active`},{title:"Inactive Users",value:((re=r==null?void 0:r.overview)==null?void 0:re.inactive_users)||0,icon:e(it,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:`${((Be=(We=r==null?void 0:r.health)==null?void 0:We.status_ratio)==null?void 0:Be.inactive_percentage)||0}% Inactive`},{title:"Total Roles",value:((Me=r==null?void 0:r.overview)==null?void 0:Me.total_roles)||0,icon:e(tt,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Role diversity"},{title:"Role Coverage",value:`${((Ve=(Ge=r==null?void 0:r.health)==null?void 0:Ge.system_metrics)==null?void 0:Ve.role_coverage)||0}%`,icon:e(Jt,{className:"w-5 h-5"}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Users with roles"},{title:"Recent Activity",value:((He=(qe=r==null?void 0:r.activity)==null?void 0:qe.recent_registrations)==null?void 0:He.recently_active)||0,icon:e(_t,{className:"w-5 h-5"}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Active last 7 days"},{title:"System Health",value:`${((Qe=r==null?void 0:r.quick_metrics)==null?void 0:Qe.system_health_score)||0}%`,icon:e(nt,{className:"w-5 h-5"}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Overall health"},{title:"Departments",value:((Je=r==null?void 0:r.overview)==null?void 0:Je.total_departments)||0,icon:e(ie,{className:"w-5 h-5"}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Department diversity"}]},[r]),xt=o.useMemo(()=>{const s=[];return s.push({label:b?"Add":"Add User",icon:e(Kt,{className:"w-4 h-4"}),onPress:()=>g("add"),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}),s.push({label:b?"":"Export",isIconOnly:b,icon:e(at,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),s},[b,g]);return t(dt,{children:[e(wt,{title:i}),j==="add"&&e(ot,{user:null,open:j==="add",setUsers:u,closeModal:G,editMode:!1}),j==="edit"&&V&&e(ot,{user:V,open:j==="edit",setUsers:u,closeModal:G,editMode:!0}),e(ne,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Pt,{in:!0,children:e(Ct,{children:e(At,{title:"Users Management",subtitle:"Manage users accounts and roles",icon:e(he,{className:"w-8 h-8"}),actionButtons:xt,children:t("div",{className:"p-4 sm:p-6",children:[e(jt,{stats:ft,className:"mb-6"}),t("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6",children:[e(J,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(K,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e(Zt,{className:"w-5 h-5 text-purple-400"})}),t("div",{children:[e(w,{variant:"h6",className:"font-semibold text-foreground",children:"Role Distribution"}),e(w,{variant:"caption",className:"text-default-500",children:"User roles breakdown"})]})]}),e("div",{className:"space-y-3",children:(be=(pe=r==null?void 0:r.distribution)==null?void 0:pe.by_role)==null?void 0:be.slice(0,5).map((s,n)=>t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-purple-400 to-pink-400"}),e("span",{className:"text-sm text-foreground truncate",children:s.name})]}),t("div",{className:"text-right",children:[e("span",{className:"text-sm font-medium text-foreground",children:s.count}),t("span",{className:"text-xs text-default-500 ml-1",children:["(",s.percentage,"%)"]})]})]},n))})]})}),e(J,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(K,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e(ie,{className:"w-5 h-5 text-blue-400"})}),t("div",{children:[e(w,{variant:"h6",className:"font-semibold text-foreground",children:"Department Distribution"}),e(w,{variant:"caption",className:"text-default-500",children:"Users by department"})]})]}),e("div",{className:"space-y-3",children:(fe=(ge=r==null?void 0:r.distribution)==null?void 0:ge.by_department)==null?void 0:fe.slice(0,5).map((s,n)=>t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-blue-400 to-cyan-400"}),e("span",{className:"text-sm text-foreground truncate",children:s.name})]}),t("div",{className:"text-right",children:[e("span",{className:"text-sm font-medium text-foreground",children:s.count}),t("span",{className:"text-xs text-default-500 ml-1",children:["(",s.percentage,"%)"]})]})]},n))})]})}),e(J,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(K,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-red-500/20 rounded-lg",children:e(tt,{className:"w-5 h-5 text-red-400"})}),t("div",{children:[e(w,{variant:"h6",className:"font-semibold text-foreground",children:"Security Metrics"}),e(w,{variant:"caption",className:"text-default-500",children:"Access control overview"})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Users with Roles"}),e("span",{className:"text-sm font-medium text-green-400",children:((ve=(xe=r==null?void 0:r.security)==null?void 0:xe.access_metrics)==null?void 0:ve.users_with_roles)||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Users without Roles"}),e("span",{className:"text-sm font-medium text-red-400",children:((Ne=(we=r==null?void 0:r.security)==null?void 0:we.access_metrics)==null?void 0:Ne.users_without_roles)||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Admin Users"}),e("span",{className:"text-sm font-medium text-orange-400",children:((_e=(ye=r==null?void 0:r.security)==null?void 0:ye.access_metrics)==null?void 0:_e.admin_users)||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Role Coverage"}),t("span",{className:"text-sm font-medium text-blue-400",children:[((Ce=(Pe=r==null?void 0:r.health)==null?void 0:Pe.system_metrics)==null?void 0:Ce.role_coverage)||0,"%"]})]})]})]})}),e(J,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(K,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e(at,{className:"w-5 h-5 text-green-400"})}),t("div",{children:[e(w,{variant:"h6",className:"font-semibold text-foreground",children:"Activity Trends"}),e(w,{variant:"caption",className:"text-default-500",children:"Recent user activity"})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Recently Active"}),e("span",{className:"text-sm font-medium text-green-400",children:((Re=(ke=r==null?void 0:r.activity)==null?void 0:ke.recent_registrations)==null?void 0:Re.recently_active)||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"New (30 days)"}),e("span",{className:"text-sm font-medium text-blue-400",children:((Fe=(Se=r==null?void 0:r.activity)==null?void 0:Se.recent_registrations)==null?void 0:Fe.new_users_30_days)||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"New (90 days)"}),e("span",{className:"text-sm font-medium text-cyan-400",children:((Ae=(Ie=r==null?void 0:r.activity)==null?void 0:Ie.recent_registrations)==null?void 0:Ae.new_users_90_days)||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Growth Rate"}),t("span",{className:"text-sm font-medium text-purple-400",children:[((je=r==null?void 0:r.activity)==null?void 0:je.user_growth_rate)||0,"%"]})]})]})]})}),e(J,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(K,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-teal-500/20 rounded-lg",children:e(nt,{className:"w-5 h-5 text-teal-400"})}),t("div",{children:[e(w,{variant:"h6",className:"font-semibold text-foreground",children:"System Health"}),e(w,{variant:"caption",className:"text-default-500",children:"Overall system metrics"})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Health Score"}),t("span",{className:"text-sm font-medium text-teal-400",children:[((Ue=r==null?void 0:r.quick_metrics)==null?void 0:Ue.system_health_score)||0,"%"]})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Activation Rate"}),t("span",{className:"text-sm font-medium text-green-400",children:[(($e=(Te=r==null?void 0:r.health)==null?void 0:Te.system_metrics)==null?void 0:$e.user_activation_rate)||0,"%"]})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Dept. Coverage"}),t("span",{className:"text-sm font-medium text-blue-400",children:[((Le=(Ee=r==null?void 0:r.health)==null?void 0:Ee.system_metrics)==null?void 0:Le.department_coverage)||0,"%"]})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Total Departments"}),e("span",{className:"text-sm font-medium text-purple-400",children:((De=r==null?void 0:r.overview)==null?void 0:De.total_departments)||0})]})]})]})}),e(J,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(K,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:e(Xt,{className:"w-5 h-5 text-yellow-400"})}),t("div",{children:[e(w,{variant:"h6",className:"font-semibold text-foreground",children:"Status Breakdown"}),e(w,{variant:"caption",className:"text-default-500",children:"User status distribution"})]})]}),e("div",{className:"space-y-3",children:(Oe=(ze=r==null?void 0:r.distribution)==null?void 0:ze.by_status)==null?void 0:Oe.map((s,n)=>t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center gap-2",children:[e("div",{className:`w-3 h-3 rounded-full ${s.name==="Active"?"bg-green-400":s.name==="Inactive"?"bg-red-400":"bg-gray-400"}`}),e("span",{className:"text-sm text-foreground",children:s.name})]}),t("div",{className:"text-right",children:[e("span",{className:"text-sm font-medium text-foreground",children:s.count}),t("span",{className:"text-xs text-default-500 ml-1",children:["(",s.percentage,"%)"]})]})]},n))})]})})]}),t("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(kt,{label:"Search Users",variant:"bordered",placeholder:"Search by name, email or phone...",value:h.search,onValueChange:s=>l("search",s),startContent:e(Rt,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:b?"sm":"md"})}),t("div",{className:"flex gap-2 items-end",children:[t(ea,{variant:"bordered",className:"bg-white/5",children:[t(Z,{isIconOnly:b,color:T==="table"?"primary":"default",onPress:()=>M("table"),className:T==="table"?"bg-blue-500/20":"",children:[e(Yt,{className:"w-4 h-4"}),!b&&e("span",{className:"ml-1",children:"Table"})]}),t(Z,{isIconOnly:b,color:T==="grid"?"primary":"default",onPress:()=>M("grid"),className:T==="grid"?"bg-blue-500/20":"",children:[e(St,{className:"w-4 h-4"}),!b&&e("span",{className:"ml-1",children:"Grid"})]})]}),t(Z,{isIconOnly:b,variant:"bordered",onPress:()=>H(!B),className:B?"bg-purple-500/20":"bg-white/5",children:[e(ta,{className:"w-4 h-4"}),!b&&e("span",{className:"ml-1",children:"Filters"})]})]})]}),B&&e(Ft,{in:!0,timeout:300,children:t("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t(X,{label:"Status",variant:"bordered",selectedKeys:h.status!=="all"?[h.status]:[],onSelectionChange:s=>{const n=Array.from(s)[0]||"all";l("status",n)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(te,{value:"all",children:"All Statuses"},"all"),e(te,{value:"active",children:"Active Only"},"active"),e(te,{value:"inactive",children:"Inactive Only"},"inactive")]}),t(X,{label:"Role",variant:"bordered",selectedKeys:h.role!=="all"?[h.role]:[],onSelectionChange:s=>{const n=Array.from(s)[0]||"all";l("role",n)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(te,{value:"all",children:"All Roles"},"all"),A==null?void 0:A.map(s=>e(te,{value:s.toLowerCase(),children:s},s.toLowerCase()))]})]}),(h.search||h.status!=="all"||h.role!=="all")&&t("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[h.search&&t(ee,{variant:"flat",color:"primary",size:"sm",onClose:()=>l("search",""),children:["Search: ",h.search]}),h.status!=="all"&&t(ee,{variant:"flat",color:"secondary",size:"sm",onClose:()=>l("status","all"),children:["Status: ",h.status==="active"?"Active":"Inactive"]}),h.role!=="all"&&t(ee,{variant:"flat",color:"warning",size:"sm",onClose:()=>l("role","all"),children:["Role: ",h.role]})]})]})}),t("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:t(w,{variant:"h6",className:"font-semibold text-foreground",children:[T==="table"?"User Table":"User Grid",t("span",{className:"text-sm text-default-500 ml-2",children:["(",c.total||0," ",c.total===1?"user":"users",")"]})]})}),P?t("div",{className:"text-center py-8",children:[e(aa,{size:40}),e(w,{className:"mt-4",color:"textSecondary",children:"Loading users data..."})]}):T==="table"?e(sa,{allUsers:c.data,roles:A,setUsers:u,isMobile:b,isTablet:L,pagination:C,onPageChange:_,onRowsPerPageChange:I,totalUsers:c.total,loading:P,onEdit:s=>g("edit",s),updateUserOptimized:Q,deleteUserOptimized:ae,toggleUserStatusOptimized:pt,updateUserRolesOptimized:bt}):t("div",{className:"p-4",children:[c.data&&c.data.length>0?e("div",{className:`grid gap-4 ${b?"grid-cols-1":L?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:c.data.map((s,n)=>e(gt,{user:s,index:n},s.id))}):t("div",{className:"text-center py-8",children:[e(he,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e(w,{variant:"body1",color:"textSecondary",children:"No users found"}),e(w,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),c.data&&c.data.length>0&&e("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e(ht,{total:Math.ceil(c.total/C.perPage),initialPage:C.currentPage,page:C.currentPage,onChange:_,size:b?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})})]})};la.layout=i=>e(It,{children:i});export{la as default};
