import{j as n,a as e}from"./app-BpFr8bAu.js";import{r}from"./vendor-CTZgMKHz.js";const N="551140686722-ngg3290imab1ru0slcljlourvuvrd7t5.apps.googleusercontent.com",y="AIzaSyCwfSbrgNYCrhdmFIlU7pS7bVVT__lwOgo",f="https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest",C="https://www.googleapis.com/auth/gmail.readonly",E=()=>{const[i,d]=r.useState(null),[h,m]=r.useState([]);r.useEffect(()=>{(()=>{const s=document.createElement("script");s.src="https://apis.google.com/js/api.js",s.async=!0,s.defer=!0,s.onload=()=>{window.gapi.load("client",p)};const a=document.createElement("script");a.src="https://accounts.google.com/gsi/client",a.async=!0,a.defer=!0,a.onload=g,document.body.appendChild(s),document.body.appendChild(a)})()},[]);const p=async()=>{await window.gapi.client.init({apiKey:y,discoveryDocs:[f]})},g=()=>{window.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:N,scope:C,callback:""})},w=()=>{window.tokenClient.callback=async t=>{if(t.error!==void 0)throw t;d(window.gapi.client.getToken().access_token),await u()},window.tokenClient.requestAccessToken({prompt:i?"":"consent"})},b=()=>{i&&(window.google.accounts.oauth2.revoke(i),window.gapi.client.setToken(""),d(null),m([]))},u=async()=>{try{const a=((await window.gapi.client.gmail.users.messages.list({userId:"me",maxResults:10})).result.messages||[]).map(async k=>{const c=await window.gapi.client.gmail.users.messages.get({userId:"me",id:k.id});return{id:c.result.id,subject:o(c.result.payload.headers,"Subject"),from:o(c.result.payload.headers,"From"),date:o(c.result.payload.headers,"Date")}}),l=await Promise.all(a);m(l)}catch(t){console.error("Error fetching emails:",t)}},o=(t,s)=>{const a=t.find(l=>l.name===s);return a?a.value:"No Information"};return n("div",{className:"card-body",children:[n("div",{className:"auth-buttons",children:[e("button",{onClick:w,children:"Authorize"}),e("button",{onClick:b,children:"Sign Out"})]}),n("div",{className:"email-header",children:[n("div",{className:"top-action-left",children:[e("button",{className:"btn btn-white",children:"Select"}),e("button",{className:"btn btn-white",children:"Actions"}),e("button",{className:"btn btn-white",children:"Folders"}),e("button",{className:"btn btn-white",children:"Tags"}),e("input",{type:"text",placeholder:"Search Messages",className:"form-control search-message"})]}),n("div",{className:"top-action-right",children:[e("button",{className:"btn btn-white","aria-label":"Refresh",onClick:u,children:"Refresh"}),n("span",{className:"text-muted",children:["Showing 10 of ",h.length]})]})]}),e("div",{className:"email-content",children:n("table",{className:"table table-inbox table-hover",children:[e("thead",{children:n("tr",{children:[e("th",{children:e("input",{type:"checkbox",className:"checkbox-all"})}),e("th",{children:"From"}),e("th",{children:"Subject"}),e("th",{children:"Date"})]})}),e("tbody",{children:h.map((t,s)=>n("tr",{className:"clickable-row",children:[e("td",{children:e("input",{type:"checkbox",className:"checkmail"})}),e("td",{className:"name",children:t.from}),e("td",{className:"subject",children:t.subject}),e("td",{className:"mail-date",children:t.date})]},s))})]})})]})};export{E as default};
