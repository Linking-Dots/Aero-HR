import{q as m,j as p,a as e,Y as S,G as C,F as k}from"./app-CjgqAK5G.js";import{r as s,e as E,g as F,B as i,f as I,a as u,G as L,T as f}from"./vendor-BBvAslwD.js";import{A as M}from"./App-I5knmf6E.js";import{L as x,D as b,a as O}from"./DeleteLeaveForm-D5QvuMQ9.js";import{A as q}from"./Add-BYPmDwqQ.js";import"./Edit-BO9iAtx3.js";import"./Delete-DjXAdUVS.js";import"./GlassDialog-CvrtYDzh.js";import"./LoadingButton-DHZxIi3J.js";const w=({title:c,allUsers:T})=>{const{auth:l}=m().props,[n,r]=s.useState(null),[a,o]=s.useState(m().props.leavesData),[g,B]=s.useState(a.allLeaves),[_,v]=s.useState(null),[A,D]=s.useState();s.useEffect(()=>{B(a.allLeaves)},[a]);const y=t=>{r(t)},U=s.useCallback((t,d)=>{v(t),r(d)},[]),j=s.useCallback(()=>{r(null),v(null)},[]),h=()=>{r(null)};return p(k,{children:[e(S,{title:c}),n==="add_leave"&&e(x,{open:n==="add_leave",setLeavesData:o,closeModal:h,leaveTypes:a.leaveTypes,leaveCounts:a.leaveCountsByUser[l.user.id]?a.leaveCountsByUser[l.user.id]:[]}),n==="edit_leave"&&e(x,{open:n==="edit_leave",setLeavesData:o,closeModal:h,leaveTypes:a.leaveTypes,leaveCounts:a.leaveCountsByUser[l.user.id]?a.leaveCountsByUser[l.user.id]:[],currentLeave:A}),n==="delete_leave"&&e(b,{open:n==="delete_leave",handleClose:j,leaveIdToDelete:_,setLeavesData:o}),e(i,{sx:{display:"flex",justifyContent:"center",p:2},children:e(E,{in:!0,children:p(C,{children:[e(F,{title:"Leaves",sx:{padding:"24px"},action:e(i,{display:"flex",gap:2,children:e(I,{title:"Add Leave",variant:"outlined",color:"success",startIcon:e(q,{}),onClick:()=>y("add_leave"),children:"Add Leave"})})}),e(u,{children:e(L,{container:!0,spacing:2,children:a.leaveTypes.map(t=>{var d;return e(L,{item:!0,xs:6,sm:6,md:3,children:e(C,{children:e(u,{children:e(i,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center",children:p(i,{children:[e(f,{variant:"h6",children:t.type}),e(f,{variant:"h4",children:a.leaveCountsByUser[l.user.id]?(d=a.leaveCountsByUser[l.user.id].find(G=>G.leave_type===t.type))==null?void 0:d.days_used:0})]})})})})},t.type)})})}),e(u,{children:e(O,{setLeavesData:o,handleClickOpen:U,setCurrentLeave:D,openModal:y,allLeaves:g,allUsers:T})})]})})})]})};w.layout=c=>e(M,{children:c});export{w as default};
