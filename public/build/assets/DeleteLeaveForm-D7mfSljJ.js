import{r as l,R as ve,J as qe,a as Ye,j as e,b as n,h as _e,d as De,F as Q}from"./app-z4s5sYKZ.js";import{u as ye,a as ue,j as be,I as ne,B as p,ad as Qe,T as x,ak as ke,ag as Se,ah as Te,ai as he,F as J,aa as Fe,N as se,b as fe,h as Re,aq as Xe,ar as Ke,ac as Le,c as Ve,d as $,J as $e}from"./App-lYuiCeFz.js";import{a as Ie,F as Pe}from"./PencilIcon-H8rDExDO.js";import{F as Be}from"./TrashIcon-tECU6Km-.js";import{F as ea,b as aa,a as ta}from"./XCircleIcon-CnsrqKVm.js";import{F as ge}from"./UserIcon-CThnUmFQ.js";import{C as ra}from"./CardContent-Dr_xO4Ae.js";import{a as I}from"./colorManipulator-fGOXFJsc.js";import{e as M,t as sa,a as oa,b as na,c as la,d as ia}from"./chunk-F3UDT23P-DmHXsHIa.js";import{t as Ee}from"./chunk-7ZZXWEXF-DBReItMz.js";import{u as je}from"./chunk-R6AK6OQ4-D-AbbXCy.js";import{p as Me}from"./chunk-O5I3QTYU-CzsU2vYt.js";import{C as da}from"./Clear-Cu6tDWXb.js";import{G as He}from"./GlassDialog-BPHbPfG8.js";import{D as Oe}from"./DialogTitle--yJ9U4gg.js";import{I as We,F as ze,T as Y}from"./TextField-yuj0Q4Bl.js";import{S as Ue}from"./Select-j5AnG5eG.js";import{M as oe}from"./MenuItem-bff8aMgb.js";import{A as ca}from"./Avatar-ChToq-_v.js";import{b as Ge,c as Ze}from"./DialogContent-D88NsPJ_.js";import{L as ma}from"./LoadingButton-BMUrW638.js";import{C as Je}from"./CircularProgress-DIt3rVlg.js";import{D as pa}from"./DialogContentText-ORhoOKkT.js";import{B as Ae}from"./Button-flahXtBE.js";function ua({title:N,titleId:f,...u},C){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:C,"aria-labelledby":f},u),N?l.createElement("title",{id:f},N):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const ha=l.forwardRef(ua);function fa({title:N,titleId:f,...u},C){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:C,"aria-labelledby":f},u),N?l.createElement("title",{id:f},N):null,l.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const ga=l.forwardRef(fa),ya=ve.forwardRef(({leaves:N,allUsers:f,handleClickOpen:u,setCurrentLeave:C,openModal:o,setLeaves:P,setCurrentPage:B,currentPage:W,totalRows:z,lastPage:U,perPage:w,selectedMonth:le,employee:E,isAdminView:g=!1,onBulkApprove:q,onBulkReject:H,canApproveLeaves:c=!1,canEditLeaves:m=!1,canDeleteLeaves:k=!1,fetchLeavesStats:S},xe)=>{var r,i;const{auth:T}=qe().props,b=ye(),v=ue("(min-width: 1025px)"),O=ue("(min-width: 641px) and (max-width: 1024px)"),X=ue("(max-width: 640px)"),[F,K]=l.useState(!1),[R,L]=l.useState(null),[G,ie]=l.useState(new Set);(r=T.permissions)!=null&&r.includes("leaves.view"),(i=T.permissions)!=null&&i.includes("leave.own.view");const V=g&&(c||m||k),_={New:{color:"primary",icon:ta,bgColor:I(b.palette.primary.main,.1),textColor:b.palette.primary.main},Pending:{color:"warning",icon:ga,bgColor:I(b.palette.warning.main,.1),textColor:b.palette.warning.main},Approved:{color:"success",icon:aa,bgColor:I(b.palette.success.main,.1),textColor:b.palette.success.main},Declined:{color:"danger",icon:ea,bgColor:I(b.palette.error.main,.1),textColor:b.palette.error.main}},ee=a=>{switch(a==null?void 0:a.toLowerCase()){case"casual":return e(Ke,{className:"w-3 h-3 text-blue-500"});case"weekend":return e(Xe,{className:"w-3 h-3 text-yellow-500"});case"sick":return e(ha,{className:"w-3 h-3 text-red-500"});case"earned":return e(fe,{className:"w-3 h-3 text-green-500"});default:return e(se,{className:"w-3 h-3 text-primary"})}},ae=l.useCallback(a=>{B&&B(a)},[B]),h=l.useCallback(async(a,t)=>{if(F)return;K(!0),L(`${a.id}-${t}`);const s=new Promise(async(d,y)=>{var D,Ce,Ne;try{const A=await Ye.post(route("leave-update-status"),{id:a.id,status:t});A.status===200&&(P(me=>me.map(pe=>pe.id===a.id?{...pe,status:t}:pe)),S(),d(A.data.message||"Leave status updated successfully"))}catch(A){const me=((Ce=(D=A.response)==null?void 0:D.data)==null?void 0:Ce.message)||((Ne=A.response)==null?void 0:Ne.statusText)||"Failed to update leave status";y(me),console.error(A)}finally{K(!1),L(null)}});be.promise(s,{pending:"Updating leave status...",success:"Leave status updated successfully!",error:"Failed to update leave status"})},[P,F]),te=a=>{const t=_[a]||_.New,s=t.icon;return e(Re,{size:"sm",variant:"flat",color:t.color,startContent:e(s,{className:"w-3 h-3"}),classNames:{base:"h-6",content:"text-xs font-medium"},children:a})},Z=(a,t)=>{const s=new Date(a),d=new Date(t),y=Math.abs(d-s),D=Math.ceil(y/(1e3*60*60*24))+1;return D===1?"1 day":`${D} days`},j=a=>new Date(a).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"}),de=a=>(f==null?void 0:f.find(t=>String(t.id)===String(a)))||{name:"Unknown User",phone:""},ce=({leave:a})=>{const t=de(a.user_id),s=Z(a.from_date,a.to_date);return _[a.status]||_.New,e(Ve,{className:"mb-2",shadow:"sm",children:n(ra,{className:"p-3",children:[n(p,{className:"flex items-start justify-between mb-3",children:[e(p,{className:"flex items-center gap-3 flex-1",children:g&&e(je,{avatarProps:{radius:"lg",size:"sm",src:t==null?void 0:t.profile_image,fallback:e(ge,{className:"w-4 h-4"})},name:e(x,{variant:"body2",fontWeight:"medium",children:t==null?void 0:t.name}),description:e(x,{variant:"caption",color:"textSecondary",children:t==null?void 0:t.phone})})}),n(p,{className:"flex items-center gap-2",children:[te(a.status),V&&n(ke,{children:[e(Se,{children:e(ne,{size:"small",children:e(Pe,{className:"w-4 h-4"})})}),n(Te,{"aria-label":"Leave actions",children:[m&&e(he,{startContent:e(Ie,{className:"w-4 h-4"}),onPress:()=>{C(a),o("edit_leave")},children:"Edit Leave"},"edit"),k&&e(he,{className:"text-danger",color:"danger",startContent:e(Be,{className:"w-4 h-4"}),onPress:()=>u(a.id,"delete_leave"),children:"Delete Leave"},"delete")]})]})]})]}),e(De,{className:"my-3"}),n(Le,{spacing:2,children:[n(p,{className:"flex items-center gap-2",children:[e(se,{className:"w-4 h-4 text-primary"}),e(x,{variant:"body2",fontWeight:"medium",children:a.leave_type})]}),n(p,{className:"flex items-center gap-2",children:[e(J,{className:"w-4 h-4 text-default-500"}),n(x,{variant:"body2",color:"textSecondary",children:[j(a.from_date)," - ",j(a.to_date)]}),e(Re,{size:"sm",variant:"bordered",color:"default",children:s})]}),a.reason&&n(p,{className:"flex items-start gap-2",children:[e(fe,{className:"w-4 h-4 text-default-500 mt-0.5"}),e(x,{variant:"body2",color:"textSecondary",className:"flex-1",children:a.reason})]})]}),g&&c&&n(Q,{children:[e(De,{className:"my-3"}),e(p,{className:"flex gap-2",children:["Approved","Declined"].map(d=>e(_e,{size:"sm",variant:a.status===d?"solid":"bordered",color:_[d].color,isLoading:R===`${a.id}-${d}`,onPress:()=>h(a,d),startContent:!R||R!==`${a.id}-${d}`?ve.createElement(_[d].icon,{className:"w-3 h-3"}):null,classNames:{base:"flex-1"},children:d},d))})]})]})})},we=l.useCallback((a,t)=>{const s=de(a.user_id);switch(t){case"employee":return e(M,{className:"whitespace-nowrap",children:e(je,{avatarProps:{radius:"lg",size:"sm",src:s==null?void 0:s.profile_image,fallback:e(ge,{className:"w-4 h-4"})},description:e(x,{variant:"caption",className:"text-xs",children:s==null?void 0:s.phone}),name:e(x,{variant:"body2",className:"text-sm font-medium",children:s==null?void 0:s.name})})});case"leave_type":return e(M,{children:n(p,{className:"flex items-center gap-1",children:[ee(a.leave_type),e(x,{variant:"body2",className:"text-sm font-medium capitalize",children:a.leave_type})]})});case"from_date":case"to_date":return e(M,{children:n(p,{className:"flex items-center gap-1",children:[e(J,{className:"w-3 h-3 text-default-500"}),n(p,{children:[e(x,{variant:"body2",className:"text-sm",children:j(a[t])}),t==="from_date"&&e(x,{variant:"caption",className:"text-xs",color:"textSecondary",children:Z(a.from_date,a.to_date)})]})]})});case"status":return e(M,{children:n(p,{className:"flex items-center gap-2",children:[te(a.status),g&&c&&n(ke,{children:[e(Se,{children:e(_e,{isIconOnly:!0,size:"sm",variant:"light",isDisabled:F,children:e(Pe,{className:"w-4 h-4"})})}),e(Te,{"aria-label":"Status actions",onAction:d=>h(a,d),children:Object.keys(_).map(d=>{const y=_[d],D=y.icon;return e(he,{startContent:e(D,{className:"w-4 h-4"}),color:y.color,children:d},d)})})]})]})});case"reason":return e(M,{children:e(Qe,{title:a.reason||"No reason provided",children:e(x,{variant:"caption",className:"max-w-xs truncate cursor-help text-xs",color:"textSecondary",children:a.reason||"No reason provided"})})});case"actions":return e(M,{children:n(p,{className:"flex items-center gap-1",children:[m&&e(Ee,{content:"Edit Leave",children:e(ne,{size:"small",onClick:()=>{C(a),o("edit_leave")},sx:{background:I(b.palette.primary.main,.1),"&:hover":{background:I(b.palette.primary.main,.2)}},children:e(Ie,{className:"w-4 h-4"})})}),k&&e(Ee,{content:"Delete Leave",color:"danger",children:e(ne,{size:"small",onClick:()=>{C(a),u(a.id,"delete_leave")},sx:{background:I(b.palette.error.main,.1),"&:hover":{background:I(b.palette.error.main,.2)}},children:e(Be,{className:"w-4 h-4"})})})]})});default:return e(M,{children:a[t]})}},[g,c,v,F,b,C,o,u,h]),re=[...g?[{name:"Employee",uid:"employee",icon:ge}]:[],{name:"Leave Type",uid:"leave_type",icon:se},{name:"From Date",uid:"from_date",icon:J},{name:"To Date",uid:"to_date",icon:J},{name:"Status",uid:"status",icon:fe},{name:"Reason",uid:"reason",icon:se},...g?[{name:"Actions",uid:"actions"}]:[]];return X?n(p,{className:"space-y-4",children:[e(Fe,{className:"max-h-[70vh]",children:N.map(a=>e(ce,{leave:a},a.id))}),z>w&&e(p,{className:"flex justify-center pt-4",children:e(Me,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:W,total:U,onChange:ae,size:"sm"})})]}):n(p,{sx:{maxHeight:"84vh",overflowY:"auto"},children:[e(Fe,{className:"max-h-[70vh]",children:n(sa,{isStriped:!0,selectionMode:"none",isCompact:!0,isHeaderSticky:!0,removeWrapper:!0,"aria-label":"Leave Management Table",classNames:{wrapper:"min-h-[200px]",table:"min-h-[300px]",thead:"[&>tr]:first:shadow-small bg-default-100/80",tbody:"divide-y divide-default-200/50",tr:"group hover:bg-default-50/50 transition-colors h-12",td:"py-2 px-3 text-sm",th:"py-2 px-3 text-xs font-semibold"},children:[e(oa,{columns:re,children:a=>e(na,{align:a.uid==="actions"?"center":"start",className:"bg-default-100/80 backdrop-blur-md",children:n(p,{className:"flex items-center gap-1",children:[a.icon&&e(a.icon,{className:"w-3 h-3"}),e("span",{className:"text-xs font-semibold",children:a.name})]})},a.uid)}),e(la,{items:N,emptyContent:n(p,{className:"flex flex-col items-center justify-center py-8 text-center",children:[e(J,{className:"w-12 h-12 text-default-300 mb-4"}),e(x,{variant:"h6",color:"textSecondary",children:"No leaves found"}),e(x,{variant:"body2",color:"textSecondary",children:E?`No leaves found for "${E}"`:"No leave requests for the selected period"})]}),children:a=>e(ia,{children:t=>we(a,t)},a.id)})]})}),z>w&&e(p,{className:"py-4 flex justify-center",children:e(Me,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:W,total:U,onChange:ae,size:O?"sm":"md"})})]})});ya.displayName="LeaveEmployeeTable";const qa=({open:N,closeModal:f,leavesData:u,setLeavesData:C,currentLeave:o,allUsers:P,setTotalRows:B,setLastPage:W,setLeaves:z,handleMonthChange:U,employee:w,selectedMonth:le,addLeaveOptimized:E,updateLeaveOptimized:g,fetchLeavesStats:q})=>{var re;const{auth:H}=qe().props,c=ye(),[m,k]=l.useState((o==null?void 0:o.user_id)||H.user.id),[S,xe]=l.useState((u==null?void 0:u.leaveTypes)||[]),[T,b]=l.useState([]),[v,O]=l.useState((o==null?void 0:o.leave_type)||""),X=r=>{if(!r)return new Date().toISOString().split("T")[0];if(typeof r=="string"&&r.match(/^\d{4}-\d{2}-\d{2}$/))return r;if(typeof r=="string"&&r.includes("T")){if(r.includes("T18:00:00")){const a=r.split("T")[0].split("-"),t=parseInt(a[0]),s=parseInt(a[1]),d=parseInt(a[2])+1;return new Date(t,s-1,d).toISOString().split("T")[0]}return r.split("T")[0]}try{const i=new Date(r);if(isNaN(i.getTime()))return new Date().toISOString().split("T")[0];const a=i.getFullYear(),t=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${a}-${t}-${s}`}catch(i){return console.error("Error formatting date:",i),new Date().toISOString().split("T")[0]}},[F,K]=l.useState(o!=null&&o.from_date?X(o.from_date):""),[R,L]=l.useState(o!=null&&o.to_date?X(o.to_date):""),[G,ie]=l.useState((o==null?void 0:o.no_of_days)||""),[V,_]=l.useState(""),[ee,ae]=l.useState((o==null?void 0:o.reason)||""),[h,te]=l.useState({}),[Z,j]=l.useState(!1),[de,ce]=l.useState("");return l.useEffect(()=>{var r,i;if(u){xe(u.leaveTypes||[]);const a=((r=u.leaveCountsByUser)==null?void 0:r[m])||[];if(b(a),S.length>0&&!v&&!o&&O(S[0].type),o&&!v){const t=(i=u.leaveTypes)==null?void 0:i.find(s=>s.id===o.leave_type);t&&O(t.type)}}},[u,m,o]),l.useEffect(()=>{if(!v||!T||!S)return;const r=T.find(t=>t.leave_type===v),i=(r==null?void 0:r.days_used)||0;ce(i);const a=S.find(t=>t.type===v);if(a){const t=a.days-i;_(t),o&&G>t&&ie(t)}},[v,T,S,o,G]),l.useEffect(()=>{ie(((i,a)=>{if(!i||!a)return"";const t=new Date(i),s=new Date(a);if(t>s)return"";const d=s.getTime()-t.getTime();return Math.ceil(d/(1e3*3600*24))+1})(F,R))},[F,R]),n(He,{open:N,onClose:f,fullWidth:!0,maxWidth:"sm",children:[n(Oe,{sx:{display:"flex",alignItems:"center"},children:[e(x,{variant:"h6",children:o?"Edit Leave":"Add Leave"}),e(ne,{onClick:f,sx:{position:"absolute",top:8,right:16},children:e(da,{})})]}),n("form",{onSubmit:async r=>{r.preventDefault(),j(!0);const i=new Promise(async(a,t)=>{try{const s={route:route().current(),user_id:m,leaveType:v,fromDate:F,toDate:R,daysCount:G,leaveReason:ee,employee:w,month:le},d=o?route("leave-update"):route("leave-add");o&&(s.id=o.id);const y=await axios.post(d,s);y.status===200&&(C(y.data.leavesData),o&&g&&y.data.leave?(g(y.data.leave),q()):E&&y.data.leave&&(E(y.data.leave),q(),B(D=>D+1)),f(),a([y.data.message||"Leave application submitted successfully"]))}catch(s){console.error(s),j(!1),s.response?(s.response.status===422?(te(s.response.data.errors||{}),t(s.response.data.error||"Failed to submit leave application")):t("An unexpected error occurred. Please try again later."),console.error(s.response.data.error)):s.request?(t("No response received from the server. Please check your internet connection."),console.error(s.request)):(t("An error occurred while setting up the request."),console.error("Error",s.message))}finally{j(!1)}});be.promise(i,{pending:{render(){return n("div",{style:{display:"flex",alignItems:"center"},children:[e(Je,{}),e("span",{style:{marginLeft:"8px"},children:"Submitting leave application..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:c.glassCard.background,border:c.glassCard.border,color:c.palette.text.primary}},success:{render({data:a}){return e(Q,{children:a.map((t,s)=>e("div",{children:t},s))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:c.glassCard.background,border:c.glassCard.border,color:c.palette.text.primary}},error:{render({data:a}){return e(Q,{children:a})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:c.glassCard.background,border:c.glassCard.border,color:c.palette.text.primary}}})},children:[e(Ge,{children:n($,{container:!0,spacing:2,children:[e($,{item:!0,xs:12,md:6,children:n($e,{fullWidth:!0,children:[e(We,{id:"leave-type-label",children:"Leave Type"}),n(Ue,{labelId:"leave-type-label",value:v||"",onChange:r=>O(r.target.value),label:"Leave Type",error:!!h.leaveType,disabled:!1,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:c.glassCard.background,border:c.glassCard.border,borderRadius:2,boxShadow:c.glassCard.boxShadow,maxHeight:300}}},children:[e(oe,{value:"",disabled:!0,children:"Select Leave Type"}),S.map(r=>{const i=T==null?void 0:T.find(s=>s.leave_type===r.type),t=(i?r.days-i.days_used:r.days)<=0;return e(oe,{value:r.type,disabled:t,title:t?"No remaining leaves available":"",children:n(p,{display:"flex",justifyContent:"space-between",width:"100%",children:[e("span",{children:r.type}),e("span",{children:i?`${i.days_used} / ${r.days} days`:`${r.days} days`})]})},r.id)})]}),e(ze,{children:h.leaveType})]})}),e($,{item:!0,xs:12,md:6,children:e(Y,{label:"From",type:"date",fullWidth:!0,value:F,onChange:r=>K(r.target.value),InputLabelProps:{shrink:!0},error:!!h.fromDate,helperText:h.fromDate})}),e($,{item:!0,xs:12,md:6,children:e(Y,{label:"To",type:"date",fullWidth:!0,value:R,onChange:r=>L(r.target.value),InputLabelProps:{shrink:!0},error:!!h.toDate,helperText:h.toDate})}),e($,{item:!0,xs:12,md:6,children:e(Y,{label:"Number of days",type:"text",fullWidth:!0,value:G,InputProps:{readOnly:!0},error:!!h.daysCount,helperText:h.daysCount})}),e($,{item:!0,xs:12,md:6,children:e(Y,{label:"Remaining Leaves",type:"text",fullWidth:!0,value:`${V} day${V!==1?"s":""}`,InputProps:{readOnly:!0,endAdornment:n(x,{variant:"caption",color:"textSecondary",sx:{ml:1},children:["of ",((re=S.find(r=>r.type===v))==null?void 0:re.days)||0," total"]})},error:!!h.remainingLeaves,helperText:h.remainingLeaves})}),route().current()==="leaves"&&e($,{item:!0,xs:12,md:6,children:n($e,{fullWidth:!0,children:[e(We,{id:"leave-employee-label",children:"Employee"}),n(Ue,{variant:"outlined",fullWidth:!0,labelId:"leave-employee-label",value:m||"na",error:!!h.user_id,onChange:r=>k(r.target.value),label:"Employee",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:c.glassCard.background,border:c.glassCard.border,borderRadius:2,boxShadow:c.glassCard.boxShadow}}},children:[e(oe,{value:"na",disabled:!0,children:"Please select"}),P.map(r=>e(oe,{value:r.id,children:n(p,{sx:{display:"flex"},children:[e(ca,{src:r.profile_image,alt:r.name||"Not assigned",sx:{borderRadius:"50%",width:23,height:23,display:"flex",mr:1}}),r.name]})},r.id))]}),e(ze,{children:h.user_id})]})}),e($,{item:!0,xs:12,children:e(Y,{label:"Leave Reason",multiline:!0,rows:4,fullWidth:!0,value:ee,onChange:r=>ae(r.target.value),error:!!h.leaveReason,helperText:h.leaveReason})})]})}),e(Ze,{sx:{padding:"16px",justifyContent:"center"},children:e(ma,{type:"submit",variant:"outlined",color:"primary",loading:Z,disabled:Z,sx:{borderRadius:"50px"},children:"Submit"})})]})]})},Ha=({open:N,closeModal:f,leaveId:u,setLeavesData:C,setLeaves:o,setTotalRows:P,setLastPage:B,setError:W,deleteLeaveOptimized:z,fetchLeavesStats:U})=>{const w=ye();return n(He,{open:N,onClose:f,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e(Oe,{id:"alert-dialog-title",children:"Confirm Deletion"}),e(Ge,{children:e(pa,{id:"alert-dialog-description",children:"Are you sure you want to delete this leave? This action cannot be undone."})}),n(Ze,{children:[e(Ae,{onClick:f,color:"primary",children:"Cancel"}),e(Ae,{onClick:()=>{const E=new Promise(async(g,q)=>{var H,c;try{const m=await axios.delete(route("leave-delete",{id:u,route:route().current()}));m.status===200&&(z?(z(u),P(k=>k-1),U()):(C(m.data.leavesData),P(m.data.leaves.total),B(m.data.leaves.last_page),o(m.data.leaves.data),W(!1),U()),g("Leave application deleted successfully"))}catch(m){if(console.error("Error deleting task:",m),m.response.status===404){const{leavesData:k}=m.response.data;C(k),W(((c=(H=m.response)==null?void 0:H.data)==null?void 0:c.message)||"Error retrieving data.")}q(m.response.data.error||"Failed to delete leave application")}finally{f()}});be.promise(E,{pending:{render(){return n("div",{style:{display:"flex",alignItems:"center"},children:[e(Je,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting leave application..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:w.glassCard.background,border:w.glassCard.border,color:w.palette.text.primary}},success:{render({data:g}){return e(Q,{children:g})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:w.glassCard.background,border:w.glassCard.border,color:w.palette.text.primary}},error:{render({data:g}){return e(Q,{children:g})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:w.glassCard.background,border:w.glassCard.border,color:w.palette.text.primary}}})},color:"error",autoFocus:!0,children:"Delete"})]})]})};export{Ha as D,qa as L,ya as a};
