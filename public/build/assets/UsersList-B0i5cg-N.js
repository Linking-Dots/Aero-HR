import{r as d,j as e,b as i,i as T,t as me,s as ae,F as se,J as pe,Q as he,d as ge,f as fe,e as be}from"./app-gqB4O3VB.js";import{u as ee,Y as ue,Z as ve,$ as X,aj as te,X as xe,k as E,m as we,ak as re,P as $,d as G,I as K,f as N,B as J,i as D,a as le,G as ye,c as Ne,J as Ce,al as _e,am as Se,h as ie,A as Fe}from"./App-C15qU46z.js";import{P as ke}from"./PageHeader-Dykoyn4W.js";import{S as Pe}from"./StatsCards-B3ikuQwV.js";import{a as De,F as Z}from"./PencilIcon-CtbeDUQ0.js";import{F as oe}from"./TrashIcon-CYWCaUEP.js";import{F as Ae}from"./ShieldCheckIcon-wP-oZRWo.js";import{F as ne,b as Re,a as Ue,c as je}from"./UserPlusIcon-BaDA48Un.js";import{F as de}from"./UserIcon-CssGHMTX.js";import{a as $e,b as Be,c as Ie,d as Me,e as Ee,t as Te}from"./chunk-F3UDT23P-pQkwlmbd.js";import{t as Y}from"./chunk-7ZZXWEXF-DML0PTh9.js";import{s as V,l as U}from"./chunk-2GIFKCNQ-CKP9tqL-.js";import{u as ce}from"./chunk-R6AK6OQ4-CBGgmCSc.js";import{C as Le,G as ze}from"./GlassDialog-BAVkR8cC.js";import{V as We,a as Oe}from"./VisibilityOff-ANnEHRt3.js";import{D as Ge}from"./DialogTitle-B6rbiOec.js";import{A as Ve}from"./Avatar-DHTg9E_n.js";import{P as qe}from"./PhotoCamera-C2hgPnmc.js";import{b as Je,c as Qe}from"./DialogContent-Dt-14mXe.js";import{L as He}from"./LoadingButton-CDhQw4-E.js";import{F as Xe}from"./ChartBarIcon-nfzXzDsU.js";import{F as Ke}from"./CheckCircleIcon-aQgu8xAy.js";import{F as Ye}from"./XCircleIcon-C1kJYuUd.js";import{F as Ze}from"./FunnelIcon-BlCMWwDq.js";import{F as ea}from"./TableCellsIcon-KNTFRlfm.js";import"./app-Ce0FNRT8.js";import"./chunk-D5XJWRAV-B_zHgeQ4.js";import"./useHasTabbableChild-5mizgJDk.js";import"./chunk-7F3ZLNJ6-DeN66o28.js";import"./index-Chjiymov.js";import"./useSlot-DW0lXzka.js";import"./Button-CW-Us0kA.js";import"./CircularProgress-DfbVc7jt.js";const aa=({allUsers:r,roles:j,isMobile:C,isTablet:B,setUsers:F})=>{const[x,k]=d.useState(r),[I,L]=d.useState({});ee(),d.useEffect(()=>{k(r)},[r]);const o={active:"success",inactive:"danger"},A=(a,m,h)=>{L(c=>({...c,[`${a}-${m}`]:h}))},n=(a,m)=>I[`${a}-${m}`]||!1;async function O(a,m){A(a,"role",!0);const h=new Promise(async(c,p)=>{var _;try{const u=await axios.post(route("user.updateRole",{id:a}),{roles:m});if(u.status===200){const P=x.map(w=>w.id===a?{...w,roles:m}:w);k(P),F&&F(w=>w.map(S=>S.id===a?{...S,roles:m}:S)),c([u.data.messages||"Role updated successfully"])}}catch(u){((_=u.response)==null?void 0:_.status)===422?p(u.response.data.errors||["Failed to update user role."]):p(["An unexpected error occurred. Please try again later."])}finally{A(a,"role",!1)}});$.promise(h,{pending:"Updating employee role...",success:{render({data:c}){return c.join(", ")}},error:{render({data:c}){return Array.isArray(c)?c.join(", "):c}}})}const R=async(a,m)=>{A(a,"status",!0);const h=new Promise(async(c,p)=>{var _;try{const u=await axios.put(route("user.toggleStatus",{id:a}),{active:m});if(u.status===200){const P=x.map(w=>w.id===a?{...w,active:m}:w);k(P),F&&F(w=>w.map(S=>S.id===a?{...S,active:m}:S)),c([u.data.message||"User status updated successfully"])}}catch(u){((_=u.response)==null?void 0:_.status)===422?p(u.response.data.errors||["Failed to update user status."]):p(["An unexpected error occurred. Please try again later."])}finally{A(a,"status",!1)}});$.promise(h,{pending:"Updating user status...",success:{render({data:c}){return c.join(", ")}},error:{render({data:c}){return Array.isArray(c)?c.join(", "):c}}})},z=async a=>{A(a,"delete",!0);const m=new Promise(async(h,c)=>{try{const p=await fetch(route("profile.delete"),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({user_id:a})}),_=await p.json();if(p.ok){const u=x.filter(P=>P.id!==a);k(u),F&&F(P=>P.filter(w=>w.id!==a)),h([_.message])}else c([_.message])}catch{c(["An error occurred while deleting user. Please try again."])}finally{A(a,"delete",!1)}});$.promise(m,{pending:"Deleting user...",success:{render({data:h}){return h.join(", ")}},error:{render({data:h}){return Array.isArray(h)?h.join(", "):h}}})},s=(a,m,h)=>{const c=a[m];switch(m){case"sl":return e("div",{className:"flex items-center justify-center",children:e("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e("span",{className:"text-sm font-semibold text-foreground",children:h+1})})});case"user":return i("div",{children:[e(ce,{avatarProps:{radius:"lg",src:a==null?void 0:a.profile_image,size:C?"sm":"md",fallback:e(de,{className:"w-4 h-4"})},name:a==null?void 0:a.name,description:C?null:a==null?void 0:a.email,classNames:{name:"font-semibold text-foreground text-left",description:"text-default-500 text-left",wrapper:"justify-start"}}),C&&i("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10",children:[i("div",{className:"flex items-center gap-1",children:[e(re,{className:"w-3 h-3"}),a==null?void 0:a.email]}),(a==null?void 0:a.phone)&&i("div",{className:"flex items-center gap-1",children:[e(ne,{className:"w-3 h-3"}),a==null?void 0:a.phone]})]})]});case"contact":return i("div",{className:"flex flex-col gap-2",children:[i("div",{className:"flex items-center gap-2 text-sm",children:[e(re,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-foreground",children:a==null?void 0:a.email})]}),(a==null?void 0:a.phone)&&i("div",{className:"flex items-center gap-2 text-sm",children:[e(ne,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-foreground",children:a==null?void 0:a.phone})]})]});case"status":return i("div",{className:"flex flex-col gap-2",children:[e(E,{className:"capitalize",color:o[a.active?"active":"inactive"],size:"sm",variant:"flat",children:a.active?"Active":"Inactive"}),!C&&i("div",{className:"flex items-center gap-2 text-xs text-default-500",children:[e(we,{className:"w-3 h-3"}),(a==null?void 0:a.created_at)||"N/A"]})]});case"role":return e("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e(V,{size:"sm",label:"User Roles","aria-label":`Select roles for ${a==null?void 0:a.name}`,placeholder:"Select roles",selectionMode:"multiple",selectedKeys:new Set(a.roles),onSelectionChange:p=>O(a.id,Array.from(p)),isDisabled:!a.active||n(a.id,"role"),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",value:"text-foreground",popoverContent:"bg-white/10 backdrop-blur-md border-white/20",label:"text-xs text-default-500"},startContent:n(a.id,"role")?e(ae,{size:"sm"}):e(Ae,{className:"w-4 h-4"}),children:j.map(p=>e(U,{value:p.name,children:p.name},p.name))})});case"actions":return C?i(xe,{classNames:{content:"bg-white/10 backdrop-blur-md border-white/20"},children:[e(ue,{children:e(T,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400","aria-label":`Actions for ${a==null?void 0:a.name}`,children:e(De,{className:"w-4 h-4"})})}),i(ve,{"aria-label":"User actions",children:[e(X,{startContent:e(Z,{className:"w-4 h-4"}),onPress:()=>window.location.href=route("profile",{user:a.id}),children:"Edit User"},"edit"),e(X,{startContent:e(te,{size:"sm",isSelected:a.active}),onPress:()=>R(a.id,!a.active),isDisabled:n(a.id,"status"),children:a.active?"Deactivate":"Activate"},"toggle"),e(X,{className:"text-danger",color:"danger",startContent:e(oe,{className:"w-4 h-4"}),onPress:()=>z(a.id),isDisabled:n(a.id,"delete"),children:"Delete User"},"delete")]})]}):i("div",{className:"relative flex items-center gap-2",children:[e(Y,{content:"Edit User",placement:"top",children:e(T,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",as:me,href:route("profile",{user:a.id}),"aria-label":`Edit ${a==null?void 0:a.name}`,children:e(Z,{className:"w-4 h-4"})})}),e(Y,{content:a.active?"Deactivate User":"Activate User",placement:"top",children:e(te,{size:"sm",isSelected:a.active,onValueChange:()=>R(a.id,!a.active),isDisabled:n(a.id,"status"),"aria-label":`${a.active?"Deactivate":"Activate"} ${a==null?void 0:a.name}`,classNames:{wrapper:"bg-white/20 backdrop-blur-md"}})}),e(Y,{content:"Delete User",color:"danger",placement:"top",children:e(T,{isIconOnly:!0,size:"sm",variant:"light",className:"text-danger-400 hover:text-danger",onPress:()=>z(a.id),isDisabled:n(a.id,"delete"),"aria-label":`Delete ${a==null?void 0:a.name}`,children:n(a.id,"delete")?e(ae,{size:"sm",color:"danger"}):e(oe,{className:"w-4 h-4"})})})]});default:return c||"N/A"}},W=d.useMemo(()=>C?[{name:"Sl",uid:"sl"},{name:"User",uid:"user"},{name:"Status",uid:"status"},{name:"Actions",uid:"actions"}]:B?[{name:"Sl",uid:"sl"},{name:"User",uid:"user"},{name:"Role",uid:"role"},{name:"Status",uid:"status"},{name:"Actions",uid:"actions"}]:[{name:"Sl",uid:"sl"},{name:"User",uid:"user"},{name:"Contact",uid:"contact"},{name:"Role",uid:"role"},{name:"Status",uid:"status"},{name:"Actions",uid:"actions"}],[C,B]);return e("div",{className:"w-full",children:i(Te,{"aria-label":"Users table with custom cells",classNames:{wrapper:"bg-transparent",th:"bg-white/10 backdrop-blur-md text-foreground font-semibold",td:"border-b border-white/10",tbody:"divide-y divide-white/10"},removeWrapper:!0,isHeaderSticky:!0,isCompact:C,className:"min-h-[400px]",children:[e($e,{columns:W,children:a=>e(Be,{align:a.uid==="actions"||a.uid==="sl"?"center":"start",className:"bg-white/10 backdrop-blur-md",width:a.uid==="sl"?60:void 0,children:a.name},a.uid)}),e(Ie,{items:x,emptyContent:"No users found",children:x.map((a,m)=>e(Me,{className:"hover:bg-white/5 transition-colors duration-200",children:W.map(h=>e(Ee,{className:"py-3",children:s(a,h.uid,m)},h.uid))},a.id))})]})})},ta=({user:r,allUsers:j,departments:C,designations:B,setUser:F,open:x,closeModal:k})=>{const[I,L]=d.useState(!1),[o,A]=d.useState({id:r==null?void 0:r.id,name:(r==null?void 0:r.name)||"",user_name:(r==null?void 0:r.user_name)||"",gender:(r==null?void 0:r.gender)||"",birthday:(r==null?void 0:r.birthday)||"",date_of_joining:(r==null?void 0:r.date_of_joining)||"",address:(r==null?void 0:r.address)||"",employee_id:(r==null?void 0:r.employee_id)||"",phone:(r==null?void 0:r.phone)||"",email:(r==null?void 0:r.email)||"",department:(r==null?void 0:r.department)||"",designation:(r==null?void 0:r.designation)||"",report_to:(r==null?void 0:r.report_to)||"",password:"",confirmPassword:""}),[n,O]=d.useState({id:r==null?void 0:r.id}),[R,z]=d.useState(!1),[s,W]=d.useState({}),[a,m]=d.useState(!1),[h,c]=d.useState(!1),[p,_]=d.useState(null),[u,P]=d.useState(null),[w,S]=d.useState(B),[q,M]=d.useState(j),f=ee(),Q=async t=>{var g;t.preventDefault(),m(!0);const b=new FormData;if(Object.keys(o).forEach(y=>{b.append(y,o[y])}),u){const y=u.type;if(["image/jpeg","image/jpg","image/png"].includes(y))b.append("profile_image",u);else{$.error("Invalid file type. Only JPEG and PNG are allowed.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:f.glassCard.background,border:f.glassCard.border,color:f.palette.text.primary}}),m(!1);return}}try{const y=await axios.post(route("addUser"),b);y.status===200&&(F(y.data.user),$.success(((g=y.data.messages)==null?void 0:g.length)>0?y.data.messages.join(" "):"Profile information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:f.glassCard.background,border:f.glassCard.border,color:f.palette.text.primary}}),k())}catch(y){m(!1),H(y)}finally{m(!1)}},H=t=>{t.response?t.response.status===422?(W(t.response.data.errors||{}),$.error(t.response.data.error||"Failed to update profile information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:f.glassCard.background,border:f.glassCard.border,color:f.palette.text.primary}})):$.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:f.glassCard.background,border:f.glassCard.border,color:f.palette.text.primary}}):t.request?$.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:f.glassCard.background,border:f.glassCard.border,color:f.palette.text.primary}}):$.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:f.glassCard.background,border:f.glassCard.border,color:f.palette.text.primary}})},l=t=>{const b=t.target.files[0];if(b){const g=URL.createObjectURL(b);_(g),P(b)}},v=(t,b)=>{A(g=>{const y={...g,[t]:b};return b===""&&delete y[t],y}),O(g=>{const y={...g,[t]:b};return b===""&&delete y[t],y})};return d.useEffect(()=>{(r==null?void 0:r.department)!==o.department&&(o.designation=null,o.report_to=null),S(B.filter(g=>g.department_id===(n.department||o.department))),M(j.filter(g=>g.department===(n.department||o.department)));const t={...n};for(const g in t)r&&g!=="id"&&t[g]===r[g]&&delete t[g];const b=Object.keys(t).length>1;z(b)},[o,n]),i(ze,{open:x,onClose:k,children:[i(Ge,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(G,{children:"Profile Information"}),e(K,{variant:"outlined",color:"primary",onClick:k,sx:{position:"absolute",top:8,right:16},children:e(Le,{})})]}),i("form",{onSubmit:Q,children:[e(Je,{children:i(N,{container:!0,spacing:2,children:[e(N,{item:!0,xs:12,display:"flex",alignItems:"center",justifyContent:"center",children:i(J,{position:"relative",display:"inline-block",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[e(Ve,{alt:n.name||o.name,src:p||(r==null?void 0:r.profile_image),sx:{width:100,height:100}}),h&&e(se,{children:e(J,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:"rgba(0, 0, 0, 0.5)",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"},children:e(K,{color:"primary",component:"span",children:e(qe,{})})})}),e("input",{accept:"image/*",style:{display:"none"},id:"upload-button",type:"file",onChange:l}),e("label",{htmlFor:"upload-button",children:e(J,{sx:{position:"absolute",width:"100%",height:"100%",top:0,left:0,borderRadius:"50%",cursor:"pointer"}})})]})}),e(N,{item:!0,xs:12,md:6,children:e(D,{type:"text",label:"Name",variant:"bordered",isInvalid:!!s.name,errorMessage:s.name,fullWidth:!0,value:n.name||o.name||"",onChange:t=>v("name",t.target.value)})}),e(N,{item:!0,xs:12,md:6,children:e(D,{label:"Username",fullWidth:!0,value:n.user_name||o.user_name||"",onChange:t=>v("user_name",t.target.value),type:"text",variant:"bordered",isInvalid:!!s.user_name,errorMessage:s.user_name})}),e(N,{item:!0,xs:12,md:6,children:e(D,{label:"Email Adress",fullWidth:!0,value:n.email||o.email,onChange:t=>v("email",t.target.value),type:"email",variant:"bordered",isInvalid:!!s.email,errorMessage:s.email})}),e(N,{item:!0,xs:12,md:6,children:e(D,{label:"Phone Number",fullWidth:!0,value:n.phone||o.phone,onChange:t=>v("phone",t.target.value),type:"tel",variant:"bordered",isInvalid:!!s.phone,errorMessage:s.phone})}),e(N,{item:!0,xs:12,md:6,children:e(D,{variant:"bordered",errorMessage:s.password,isInvalid:!!s.password,label:"Password",type:I?"text":"password",value:n.password||o.password,onChange:t=>v("password",t.target.value),fullWidth:!0,endContent:e(K,{onClick:()=>L(!I),edge:"end",children:I?e(We,{}):e(Oe,{})})})}),e(N,{item:!0,xs:12,md:6,children:e(D,{label:"Confirm Password",type:"password",variant:"bordered",errorMessage:s.confirmPassword,isInvalid:!!s.confirmPassword,value:n.confirmPassword||o.confirmPassword,onChange:t=>v("confirmPassword",t.target.value),fullWidth:!0})}),e(N,{item:!0,xs:12,md:6,children:i(V,{variant:"bordered",fullWidth:!0,label:"Gender",placeholder:"Select Gender",value:n.gender||o.gender||"na",onChange:t=>{v("gender",t.target?t.target.value:t)},errorMessage:!!s.gender,popoverProps:{classNames:{content:"bg-transparent backdrop-blur-lg border-inherit"}},children:[e(U,{value:"na",disabled:!0,children:"Select Gender"}),e(U,{value:"Male",children:"Male"}),e(U,{value:"Female",children:"Female"})]})}),e(N,{item:!0,xs:12,md:6,children:e(D,{label:"Birth Date",type:"date",fullWidth:!0,variant:"bordered",value:n.birthday||o.birthday||"",onChange:t=>v("birthday",t.target.value),isInvalid:!!s.birthday,errorMessage:s.birthday})}),e(N,{item:!0,xs:12,md:6,children:e(D,{label:"Joining Date",type:"date",variant:"bordered",fullWidth:!0,value:n.date_of_joining||o.date_of_joining||"",onChange:t=>v("date_of_joining",t.target.value),isInvalid:!!s.date_of_joining,errorMessage:s.date_of_joining})}),e(N,{item:!0,xs:12,children:e(D,{label:"Address",fullWidth:!0,type:"text",variant:"bordered",value:n.address||o.address,onChange:t=>v("address",t.target.value),isInvalid:!!s.address,errorMessage:s.address})}),e(N,{item:!0,xs:12,md:6,children:e(D,{label:"Employee ID",type:"text",variant:"bordered",fullWidth:!0,value:n.employee_id||o.employee_id||"",onChange:t=>v("employee_id",t.target.value),isInvalid:!!s.employee_id,errorMessage:s.employee_id})}),e(N,{item:!0,xs:12,md:6,children:i(V,{variant:"bordered",fullWidth:!0,label:"Department",placeholder:"Select Department",value:n.department||o.department||"na",onChange:t=>{v("department",t.target?t.target.value:t)},errorMessage:!!s.department,popoverProps:{classNames:{content:"bg-transparent backdrop-blur-lg"}},children:[e(U,{value:"na",disabled:!0,children:"Select Department"}),C.map(t=>e(U,{value:t.id,children:t.name},t.id))]})}),e(N,{item:!0,xs:12,md:6,children:i(V,{variant:"bordered",fullWidth:!0,label:"Designation",placeholder:"Select Designation",value:n.designation||o.designation||"na",onChange:t=>{v("designation",t.target?t.target.value:t)},errorMessage:s.designation?"This field is required":"",disabled:!(r!=null&&r.department),popoverProps:{classNames:{content:"bg-transparent backdrop-blur-lg"}},children:[e(U,{value:"na",disabled:!0,children:"Select Designation"}),w.map(t=>e(U,{value:t.id,children:t.title},t.id))]})}),e(N,{item:!0,xs:12,md:6,children:i(V,{variant:"bordered",fullWidth:!0,label:"Reports To",placeholder:"Select Reports To",value:n.report_to||o.report_to,onChange:t=>{v("report_to",t.target?t.target.value:t)},errorMessage:s.report_to?"This field is required":"",disabled:(r==null?void 0:r.report_to)==="na",popoverProps:{classNames:{content:"bg-transparent backdrop-blur-lg"}},children:[e(U,{value:"na",disabled:!0,children:"--"}),q.map(t=>e(U,{value:t.id,children:t.name},t.id))]})})]})}),e(Qe,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(He,{disabled:!R,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:a,children:"Submit"})})]})]})},ra=({title:r,roles:j,departments:C,designations:B})=>{const F=ee(),x=le(F.breakpoints.down("sm")),k=le(F.breakpoints.down("md")),[I,L]=d.useState(null),[o,A]=d.useState(pe().props.allUsers),[n,O]=d.useState(""),[R,z]=d.useState("all"),[s,W]=d.useState("all"),[a,m]=d.useState("table"),[h,c]=d.useState(!1),p=d.useMemo(()=>o.filter(l=>{const v=n===""||l.name.toLowerCase().includes(n.toLowerCase())||l.email.toLowerCase().includes(n.toLowerCase()),t=R==="all"||l.roles.some(g=>g.toLowerCase()===R.toLowerCase()),b=s==="all"||s==="active"&&l.active||s==="inactive"&&!l.active;return v&&t&&b}),[o,n,R,s]),_=d.useCallback(l=>{L(l)},[]),u=d.useCallback(()=>{L(null)},[]),P=d.useCallback(l=>{O(l)},[]),w=d.useCallback(l=>{z(l)},[]),S=d.useCallback(l=>{W(l)},[]),q=d.useCallback(l=>{A(l)},[]),M=d.useMemo(()=>({total:o.length,active:o.filter(l=>l.active).length,inactive:o.filter(l=>!l.active).length,filtered:p.length}),[o,p]),f=d.useMemo(()=>[{title:"Total",value:M.total,icon:e(Xe,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All employees"},{title:"Active",value:M.active,icon:e(Ke,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Active employees"},{title:"Inactive",value:M.inactive,icon:e(Ye,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Inactive employees"},{title:"Filtered",value:M.filtered,icon:e(Ze,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Current results"}],[M]),Q=[{label:x?"Add":"Add Employee",icon:e(je,{className:"w-4 h-4"}),onPress:()=>_("add"),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}],H=({user:l,index:v})=>{var t;return e(be,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer",onPress:()=>window.location.href=route("profile",{user:l.id}),children:e(fe,{className:"p-4",children:i("div",{className:"flex items-start gap-3",children:[e(ce,{avatarProps:{radius:"lg",src:l==null?void 0:l.profile_image,size:"md",fallback:e(de,{className:"w-4 h-4"})},name:l==null?void 0:l.name,description:l==null?void 0:l.email,classNames:{name:"font-semibold text-foreground text-left text-sm",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}}),i("div",{className:"flex-1 min-w-0",children:[i("div",{className:"flex items-center justify-between mb-2",children:[e(E,{className:"capitalize",color:l.active?"success":"danger",size:"sm",variant:"flat",children:l.active?"Active":"Inactive"}),e(T,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:b=>{b.stopPropagation(),window.location.href=route("profile",{user:l.id})},children:e(Z,{className:"w-4 h-4"})})]}),e("div",{className:"flex flex-wrap gap-1 mb-2",children:(t=l.roles)==null?void 0:t.map((b,g)=>e(E,{size:"sm",variant:"bordered",className:"text-xs",children:b},g))}),(l==null?void 0:l.phone)&&e(G,{variant:"caption",className:"text-default-500 block",children:l.phone})]})]})})})};return i(se,{children:[e(he,{title:r}),I==="add"&&e(ta,{allUsers:o,departments:C,designations:B,open:I==="add",setUsers:q,closeModal:u}),e(J,{sx:{display:"flex",justifyContent:"center",p:2},children:e(ye,{in:!0,children:i(Ne,{children:["            ",e(ke,{title:"Employee Management",subtitle:"Manage employee accounts, roles, and permissions",icon:e(ie,{className:"w-8 h-8"}),actionButtons:Q,children:i("div",{className:"p-4 sm:p-6",children:[e(Pe,{stats:f,className:"mb-6"}),i("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(D,{label:"Search Employees",placeholder:"Enter name or email...",value:n,onChange:l=>P(l.target.value),startContent:e(Ce,{className:"w-4 h-4 text-default-400"}),variant:"bordered",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:x?"sm":"md"})}),i("div",{className:"flex gap-2 items-end",children:[i(Re,{variant:"bordered",className:"bg-white/5",children:[i(T,{isIconOnly:x,color:a==="table"?"primary":"default",onPress:()=>m("table"),className:a==="table"?"bg-blue-500/20":"",children:[e(ea,{className:"w-4 h-4"}),!x&&e("span",{className:"ml-1",children:"Table"})]}),i(T,{isIconOnly:x,color:a==="grid"?"primary":"default",onPress:()=>m("grid"),className:a==="grid"?"bg-blue-500/20":"",children:[e(_e,{className:"w-4 h-4"}),!x&&e("span",{className:"ml-1",children:"Grid"})]})]}),i(T,{isIconOnly:x,variant:"bordered",onPress:()=>c(!h),className:h?"bg-purple-500/20":"bg-white/5",children:[e(Ue,{className:"w-4 h-4"}),!x&&e("span",{className:"ml-1",children:"Filters"})]})]})]}),h&&e(Se,{in:!0,timeout:300,children:e("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:i("div",{className:"flex flex-wrap gap-2",children:[e(E,{variant:R==="all"?"solid":"bordered",color:"primary",onPress:()=>w("all"),className:"cursor-pointer",children:"All Roles"}),j==null?void 0:j.map(l=>e(E,{variant:R===l.name?"solid":"bordered",color:"secondary",onPress:()=>w(l.name),className:"cursor-pointer",children:l.name},l.name)),e(ge,{orientation:"vertical",className:"mx-2"}),e(E,{variant:s==="active"?"solid":"bordered",color:"success",onPress:()=>S("active"),className:"cursor-pointer",children:"Active"}),e(E,{variant:s==="inactive"?"solid":"bordered",color:"danger",onPress:()=>S("inactive"),className:"cursor-pointer",children:"Inactive"})]})})}),"                ",i("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:i(G,{variant:"h6",className:"font-semibold text-foreground",children:[a==="table"?"Employee Table":"Employee Grid",i("span",{className:"text-sm text-default-500 ml-2",children:["(",p.length," ",p.length===1?"employee":"employees",")"]})]})}),e("div",{className:"max-h-[60vh] overflow-y-auto p-4",children:a==="table"?e(aa,{allUsers:p,roles:j,departments:C,designations:B,setUsers:q,isMobile:x,isTablet:k}):i("div",{children:[e("div",{className:`grid gap-4 ${x?"grid-cols-1":k?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:p.map((l,v)=>e(H,{user:l,index:v},l.id))}),p.length===0&&i("div",{className:"text-center py-8",children:[e(ie,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e(G,{variant:"body1",color:"textSecondary",children:"No employees found"}),e(G,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]})]})})]})]})})]})})})]})};ra.layout=r=>e(Fe,{children:r});export{ra as default};
