import{r as n,j as e,g as ce,b as t,Q as oe,f as T,F as B,c as M,e as $}from"./app-CEzniZE0.js";import{u as de,a as me,m as Y,c as he,o as w,h as N,G as pe,e as ue,n as j,i as ge,p as be,q as fe,T as x,B as ve,j as we,A as Ne}from"./App-BDoHcQM2.js";import{P as xe}from"./PageHeader-D4a1Mce2.js";import{S as ye}from"./StatsCards-DaU3FK2z.js";import{F as _e}from"./CheckCircleIcon-DM5o0-iI.js";import{F as Se}from"./AdjustmentsHorizontalIcon-COakoueI.js";import{F as z}from"./PresentationChartLineIcon-BAGthj_h.js";import{F as Ce}from"./DocumentArrowDownIcon-DfH1hkuO.js";import{p as Fe}from"./chunk-CXOJTH5M-Csoqrcjd.js";import{b as Ae}from"./chunk-57V4RE7B-DgOfB7fU.js";import{s as y,l as i}from"./chunk-2GIFKCNQ-CKxsxfH_.js";import{t as Pe,a as U}from"./chunk-ML27DD5T-DOhcdNYW.js";import{t as G,a as J,b as l,c as I,d as O,e as d}from"./chunk-F3UDT23P-CooYFdyi.js";import{p as De}from"./chunk-O5I3QTYU-CkARt-O3.js";import"./app-CENRN2EE.js";import"./chunk-D5XJWRAV-Pu0ZQtUj.js";import"./index-IOeOeejo.js";import"./NumberFormatter-DNR9MAW-.js";import"./chunk-2PG5BJX6-B6C1yTx0.js";import"./chunk-7F3ZLNJ6-Bl27Usxl.js";import"./useHasTabbableChild-B2i-T3fu.js";import"./index-CokAva9Y.js";import"./features-animation-BWV5SUkx.js";import"./chunk-MZRCPRP2-CzxHrHBy.js";import"./LiveAnnouncer-BI-RabLr.js";const Ee=({title:_,summaryData:K})=>{const Q=de(),u=me(Q.breakpoints.down("sm")),{users:ke=[],departments:H=[],leave_types:Re=[],columns:Le=[],data:S=[],department_summary:A=[],stats:m={},year:P=new Date().getFullYear(),filters:q={}}=K||{},[W,D]=n.useState(!1),[c,E]=n.useState(q),[g,X]=n.useState(!1),[k,Z]=n.useState("employee"),[o,C]=n.useState(""),[F,R]=n.useState(1),[h,ee]=n.useState(15),p=n.useMemo(()=>{let a=S;return o&&(a=a.filter(r=>{var s,f;return((s=r.employee_name)==null?void 0:s.toLowerCase().includes(o.toLowerCase()))||((f=r.department)==null?void 0:f.toLowerCase().includes(o.toLowerCase()))})),a},[S,o]),ae=n.useMemo(()=>{const a=(F-1)*h,r=a+h;return p.slice(a,r)},[p,F,h]),L=Math.ceil(p.length/h),te=n.useMemo(()=>[{title:"Total Employees",value:m.total_employees||0,icon:e(Y,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Active employees"},{title:"Approved Leaves",value:m.total_approved_leaves||0,icon:e(_e,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Total approved days"},{title:"Pending Leaves",value:m.total_pending_leaves||0,icon:e(he,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Awaiting approval"},{title:"Departments",value:m.departments_count||0,icon:e(w,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Active departments"}],[m]),b=n.useCallback((a,r)=>{const s={...c,[a]:r};E(s),V(s)},[c]),V=n.useCallback(a=>{D(!0),ce.Inertia.get(route("leave-summary"),a,{preserveState:!0,replace:!0,onFinish:()=>D(!1)})},[]),re=n.useCallback(()=>{const a={year:new Date().getFullYear()};E(a),C(""),V(a)},[]),le=[{label:"Export Data",icon:e(Ce,{className:"w-4 h-4"}),onPress:()=>{console.log("Export functionality")},className:j.primaryButton},{label:"Current Year",icon:e(we,{className:"w-4 h-4"}),onPress:()=>b("year",new Date().getFullYear()),className:j.secondaryButton}],se=n.useCallback((a,r)=>{const s=a[r];switch(r){case"employee_name":return t("div",{className:"flex flex-col",children:[e("p",{className:"text-bold text-sm text-foreground",children:a.employee_name}),e("p",{className:"text-tiny text-default-400",children:a.department}),a.designation&&e("p",{className:"text-tiny text-default-500",children:a.designation})]});case"total_approved":case"total_pending":case"total_rejected":const f={total_approved:"success",total_pending:"warning",total_rejected:"danger"};return s>0?e(N,{size:"sm",variant:"flat",color:f[r],className:"min-w-12",children:s}):"";case"usage_percentage":const v=s||0,ie=v>80?"danger":v>60?"warning":"success";return t("div",{className:"flex flex-col items-center gap-1",children:[e(Fe,{size:"sm",value:v,color:ie,className:"w-16"}),t("span",{className:"text-tiny",children:[v,"%"]})]});case"total_balance":return e("div",{className:"text-center",children:e("span",{className:s<5?"text-danger":"text-foreground",children:s})});default:return s!=null&&s!==""?s:""}},[]),ne=n.useMemo(()=>{const a=new Date().getFullYear();return Array.from({length:10},(r,s)=>a-s)},[]);return t(B,{children:[e(oe,{title:_}),e(ve,{sx:{display:"flex",justifyContent:"center",p:2},children:e(pe,{in:!0,children:e(ue,{children:e(xe,{title:"Leave Summary",subtitle:"Comprehensive employee leave analytics and reporting",icon:e(z,{className:"w-8 h-8"}),variant:"gradient",actionButtons:le,children:t("div",{className:"p-6",children:[e(ye,{stats:te,className:"mb-6"}),t("div",{className:"flex flex-col gap-4 mb-6",children:[t("div",{className:"flex flex-col sm:flex-row gap-4",children:[e("div",{className:"flex-1",children:e(ge,{isClearable:!0,label:"Search Employees",variant:"bordered",placeholder:"Search by name or department...",startContent:e(be,{className:"w-4 h-4"}),value:o,onClear:()=>C(""),onValueChange:C,classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:u?"sm":"md"})}),e("div",{className:"flex gap-2 items-end",children:e(Ae,{variant:"bordered",className:"bg-white/5",children:t(T,{isIconOnly:u,color:g?"primary":"default",onPress:()=>X(!g),className:g?"bg-purple-500/20":"bg-white/5",children:[e(Se,{className:"w-4 h-4"}),!u&&e("span",{className:"ml-1",children:"Filters"})]})})})]}),g&&e(fe,{in:!0,timeout:300,children:e("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e(y,{label:"Year",variant:"bordered",selectedKeys:[String(c.year||P)],onSelectionChange:a=>{const r=Array.from(a)[0];r&&b("year",parseInt(r))},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:ne.map(a=>e(i,{value:a,textValue:String(a),children:a},a))}),t(y,{label:"Department",variant:"bordered",selectedKeys:c.department_id?[String(c.department_id)]:[],onSelectionChange:a=>{const r=Array.from(a)[0];b("department_id",r||null)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e(i,{value:"",textValue:"All Departments",children:"All Departments"},""),H.map(a=>e(i,{value:a.id,textValue:a.name,children:a.name},a.id))]}),t(y,{label:"Leave Status",variant:"bordered",selectedKeys:c.status?[c.status]:[],onSelectionChange:a=>{const r=Array.from(a)[0];b("status",r||null)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",popoverContent:"bg-white/10 backdrop-blur-lg border-white/20"},children:[e(i,{value:"",textValue:"All Status",children:"All Status"},""),e(i,{value:"Approved",textValue:"Approved",children:"Approved"},"Approved"),e(i,{value:"Pending",textValue:"Pending",children:"Pending"},"Pending"),e(i,{value:"Declined",textValue:"Declined",children:"Declined"},"Declined")]}),e("div",{className:"flex gap-2 items-end",children:e(T,{color:"primary",variant:"flat",onPress:re,size:u?"sm":"md",children:"Clear Filters"})})]})})})]}),e("div",{className:"mb-6",children:t(Pe,{selectedKey:k,onSelectionChange:Z,variant:"underlined",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full bg-primary",tab:"max-w-fit px-0 h-12"},children:[e(U,{title:t("div",{className:"flex items-center space-x-2",children:[e(Y,{className:"w-4 h-4"}),e("span",{children:"Employee Summary"})]})},"employee"),e(U,{title:t("div",{className:"flex items-center space-x-2",children:[e(w,{className:"w-4 h-4"}),e("span",{children:"Department Summary"})]})},"department")]})}),k==="employee"?t("div",{className:"space-y-4",children:[t("div",{className:"flex justify-between items-center",children:[t("span",{className:"text-default-400 text-small",children:["Total ",p.length," employees",o&&` (filtered from ${S.length})`]}),t("div",{className:"flex gap-2 items-center",children:[e("span",{className:"text-tiny text-default-400",children:"Rows per page:"}),t(y,{size:"sm",selectedKeys:[String(h)],onSelectionChange:a=>{const r=Number(Array.from(a)[0]);ee(r),R(1)},className:"w-20",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:[e(i,{value:"10",textValue:"10",children:"10"},"10"),e(i,{value:"15",textValue:"15",children:"15"},"15"),e(i,{value:"25",textValue:"25",children:"25"},"25"),e(i,{value:"50",textValue:"50",children:"50"},"50")]})]})]}),p.length>0?t(B,{children:[t(G,{"aria-label":"Employee leave summary table",isHeaderSticky:!0,classNames:{wrapper:"max-h-[600px] bg-white/5 backdrop-blur-md border-white/10",th:"bg-white/20 text-foreground border-b border-white/10",td:"border-b border-white/5"},children:[t(J,{children:[e(l,{children:"Employee"},"employee_name"),e(l,{align:"center",children:"JAN"},"JAN"),e(l,{align:"center",children:"FEB"},"FEB"),e(l,{align:"center",children:"MAR"},"MAR"),e(l,{align:"center",children:"APR"},"APR"),e(l,{align:"center",children:"MAY"},"MAY"),e(l,{align:"center",children:"JUN"},"JUN"),e(l,{align:"center",children:"JUL"},"JUL"),e(l,{align:"center",children:"AUG"},"AUG"),e(l,{align:"center",children:"SEP"},"SEP"),e(l,{align:"center",children:"OCT"},"OCT"),e(l,{align:"center",children:"NOV"},"NOV"),e(l,{align:"center",children:"DEC"},"DEC"),e(l,{align:"center",children:"Approved"},"total_approved"),e(l,{align:"center",children:"Pending"},"total_pending"),e(l,{align:"center",children:"Balance"},"total_balance"),e(l,{align:"center",children:"Usage"},"usage_percentage")]}),e(I,{items:ae,isLoading:W,children:a=>e(O,{children:r=>e(d,{children:se(a,r)})},a.id)})]}),L>1&&e("div",{className:"flex justify-center mt-4",children:e(De,{total:L,page:F,onChange:R,showControls:!0,showShadow:!0,color:"primary"})})]}):e(M,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t($,{className:"text-center py-12",children:[e(z,{className:"w-16 h-16 mx-auto mb-4 text-default-300"}),e(x,{variant:"h6",className:"mb-2 text-white",children:"No Leave Data Found"}),e(x,{variant:"body2",className:"text-gray-400",children:o?`No employees found matching "${o}"`:`No leave summary data available for ${c.year||P}.`})]})})]}):t("div",{className:"space-y-4",children:[e(x,{variant:"h6",className:"mb-4 text-white",children:"Department-wise Leave Summary"}),A.length>0?t(G,{"aria-label":"Department leave summary table",classNames:{wrapper:"bg-white/5 backdrop-blur-md border-white/10",th:"bg-white/20 text-foreground",td:"border-b border-white/5"},children:[t(J,{children:[e(l,{children:"Department"}),e(l,{align:"center",children:"Employees"}),e(l,{align:"center",children:"Total Leaves"}),e(l,{align:"center",children:"Approved"}),e(l,{align:"center",children:"Pending"}),e(l,{align:"center",children:"Avg per Employee"})]}),e(I,{children:A.map((a,r)=>t(O,{children:[e(d,{children:t("div",{className:"flex items-center gap-2",children:[e(w,{className:"w-4 h-4 text-default-400"}),e("span",{className:"font-medium",children:a.department})]})}),e(d,{className:"text-center",children:e(N,{size:"sm",variant:"flat",color:"default",children:a.employee_count})}),e(d,{className:"text-center",children:a.total_leaves}),e(d,{className:"text-center",children:e(N,{size:"sm",variant:"flat",color:"success",children:a.total_approved})}),e(d,{className:"text-center",children:e(N,{size:"sm",variant:"flat",color:"warning",children:a.total_pending})}),e(d,{className:"text-center",children:a.avg_leaves_per_employee})]},r))})]}):e(M,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t($,{className:"text-center py-8",children:[e(w,{className:"w-12 h-12 mx-auto mb-4 text-default-300"}),e(x,{variant:"body1",className:"text-white",children:"No department data available"})]})})]})]})})})})})]})};Ee.layout=_=>e(Ne,{children:_});export{Ee as default};
