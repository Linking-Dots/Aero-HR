import{V as tt,j as g,a as t,F as N,c as Wr,M as at}from"./app-bbYl1kI6.js";import{v as He,w as $e,z as Be,A as Ne,J as nt,j as me,ah as ot,t as _e,Y as it,B as Y,R as We,b as ae,c as ue,r as d,X as Ve,T as Ce,G as B,F as lt,k as st,S as ct,M as se,V as ut,Z as Ke,$ as qe,a0 as dt,f as Cr,m as pt,n as ft,o as Dr,p as je,q as mt,a2 as gt,ai as k,u as ht,e as bt,g as yt,a as kr}from"./vendor-C0ytmRDo.js";import{r as Ye,d as vt,B as ne,_ as ge,C as he,D as wr,E as _r,G as xt,b as xe,A as Ct}from"./App-tMH_xyzL.js";import{X as Dt,m as kt,A as wt}from"./minMax-DZmZXoSy.js";import{d as _t}from"./Delete-BAiJjr6w.js";import{U as ir}from"./index-BFovUKx1.js";import{l as G,s as De}from"./chunk-QEQ4EHOG-B_JtY3aW.js";import{u as ar}from"./chunk-TLBGAR4N-B2TZaP-W.js";import{i as ke}from"./chunk-IR2E3HZF-Xuh02EQw.js";import{d as St}from"./dayjs.min-dCDmUb1B.js";import{d as fr,G as Ue}from"./GlassDialog-OTwXnGRZ.js";import{L as mr}from"./LoadingButton-CaFC3OC_.js";import{u as nr,w as Ft}from"./xlsx-DjuO7_Ju.js";import{D as lr}from"./Download-By9U4f_e.js";import{d as At,p as Et}from"./Search-TODboiPf.js";import{C as Tt}from"./Clear-nJ0ET6RC.js";import"./DOMLayoutDelegate-CB854Pb2.js";import"./useLabel-CSTL5pG1.js";import"./chunk-NCVCYSZZ-Cl1KnIRb.js";import"./useFormValidationState-DoNcGZe6.js";const Ot=He($e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload"),It=He($e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description"),Pt=He($e.jsx("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm7 7V3.5L18.5 9z"}),"InsertDriveFile"),jt=He($e.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"}),"PictureAsPdf");var gr={},Rt=Ne;Object.defineProperty(gr,"__esModule",{value:!0});var zr=gr.default=void 0,Wt=Rt(Ye()),zt=Be();zr=gr.default=(0,Wt.default)((0,zt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");var hr={},Lt=Ne;Object.defineProperty(hr,"__esModule",{value:!0});var Lr=hr.default=void 0,Mt=Lt(Ye()),Ht=Be();Lr=hr.default=(0,Mt.default)((0,Ht.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2M8.5 15H7.3l-2.55-3.5V15H3.5V9h1.25l2.5 3.5V9H8.5zm5-4.74H11v1.12h2.5v1.26H11v1.11h2.5V15h-4V9h4zm7 3.74c0 .55-.45 1-1 1h-4c-.55 0-1-.45-1-1V9h1.25v4.51h1.13V9.99h1.25v3.51h1.12V9h1.25z"}),"FiberNew");var br={},$t=Ne;Object.defineProperty(br,"__esModule",{value:!0});var Mr=br.default=void 0,Bt=$t(Ye()),Nt=Be();Mr=br.default=(0,Bt.default)((0,Nt.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"}),"Replay");var yr={},Vt=Ne;Object.defineProperty(yr,"__esModule",{value:!0});var Hr=yr.default=void 0,Kt=Vt(Ye()),qt=Be();Hr=yr.default=(0,Kt.default)((0,qt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error");const Yt=nt(Dt)(({theme:e})=>({"& .rdt_Table":{backgroundColor:"transparent","& .rdt_TableHead":{"& .rdt_TableHeadRow":{backgroundColor:"transparent",color:e.palette.text.primary},top:0,zIndex:1},"& .rdt_TableBody":{overflowY:"auto",maxHeight:"52vh","& .rdt_TableRow":{minHeight:"auto",backgroundColor:"transparent",color:e.palette.text.primary,"& .rdt_TableCol":{backgroundColor:"transparent",borderBottom:`1px solid ${e.palette.divider}`,width:"auto",whiteSpace:"nowrap"}},"& .rdt_TableRow:hover":{backgroundColor:e.palette.action.hover}}}})),Ut=({allData:e,setData:r,loading:a,handleClickOpen:o,allInCharges:n,reports:s,juniors:m,reports_with_daily_works:u,openModal:b,setCurrentRow:x,filteredData:C,setFilteredData:v})=>{const{auth:w}=tt().props,y=me(),O=w.roles.includes("Administrator"),I=w.roles.includes("Supervision Engineer"),_=[{value:"new",label:"New",icon:t(Lr,{})},{value:"resubmission",label:"Resubmission",icon:t(Mr,{})},{value:"completed",label:"Completed",icon:t(zr,{})},{value:"emergency",label:"Emergency",icon:t(Hr,{})}],S=[{name:"Date",selector:i=>i.date,sortable:"true",center:"true",width:"110px"},{name:"RFI NO",selector:i=>i.number,sortable:"true",center:"true",width:"140px",cell:i=>g(N,{children:[i.number,i.reports&&i.reports.map(c=>t("div",{children:g("span",{children:[t("i",{className:"mdi mdi-circle-medium"})," ",c.ref_no]})},c.ref_no))]})},{name:"Status",selector:i=>i.status,sortable:"true",center:"true",width:"220px",style:{padding:"0px 10px 0px 10px"},cell:i=>t(De,{items:_,"aria-label":"Status",fullWidth:!0,value:i.status||"na",onChange:c=>h(i.id,"status",c.target.value),selectedKeys:[String(i.status)],style:{minWidth:"220px"},color:A(i.status),popoverProps:{classNames:{content:"bg-transparent backdrop-blur-lg border-inherit"},style:{whiteSpace:"nowrap",minWidth:"fit-content"}},placeholder:"Select Status",renderValue:c=>c.map(D=>{var j;return g("div",{className:"flex items-center gap-2 m-1",children:[(j=_.find(R=>R.value===D.data.value))==null?void 0:j.icon," ",t("span",{children:D.data.label})]},D.key)}),children:c=>t(G,{textValue:c.value,children:g("div",{className:"flex items-center gap-2",children:[c.icon," ",g("span",{style:{color:A(c.value)},children:[c.label," "]})]})},c.value)})},...I?[{name:"Assigned",selector:i=>i.assigned,sortable:"true",center:"true",cell:i=>t(De,{items:m,variant:"outlined","aria-label":"Assigned",fullWidth:!0,size:"small",value:i.assigned||"na",style:{minWidth:"260px"},onChange:c=>h(i.id,"assigned",c.target.value),popoverProps:{classNames:{content:"bg-transparent backdrop-blur-lg border-inherit"},style:{whiteSpace:"nowrap",minWidth:"fit-content"}},placeholder:"Select a junior",renderValue:c=>c.map(D=>t("div",{className:"flex items-center gap-2 m-1",children:t(ar,{style:{whiteSpace:"nowrap"},size:"sm",name:D.data.name,avatarProps:{radius:"sm",size:"sm",src:D.data.profile_image}})},D.key)),children:c=>t(G,{textValue:c.id,children:g(Y,{sx:{display:"flex"},children:[t(it,{src:c.profile_image,alt:c.name||"Not assigned",sx:{borderRadius:"50%",width:23,height:23,display:"flex",marginRight:1}}),c.name]})},c.id)})}]:[],{name:"Type",selector:i=>i.type,sortable:"true",center:"true",width:"140px"},{name:"Description",selector:i=>i.description,sortable:"true",left:"true",width:"260px",cell:i=>t(Y,{sx:{whiteSpace:"normal",wordWrap:"break-word",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:i.description})},{name:"Location",selector:i=>i.location,sortable:"true",center:"true",width:"200px",cell:i=>t(Y,{sx:{whiteSpace:"normal",wordWrap:"break-word",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:i.location})},{name:"Results",selector:i=>i.inspection_details,sortable:"true",width:"200px",center:"true",cell:i=>{const[c,D]=We.useState(!1),[j,R]=We.useState(i.inspection_details||"");return t(Y,{sx:{whiteSpace:"normal",wordWrap:"break-word",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",cursor:"pointer"},onClick:c?void 0:()=>{D(!0)},children:c?t(ae,{fullWidth:!0,value:j,onChange:oe=>{R(oe.target.value)},onBlur:()=>{D(!1),h(i.id,"inspection_details",j)},autoFocus:!0,variant:"standard",InputProps:{style:{marginBottom:0,border:"none",outline:"none",backgroundColor:"transparent",textAlign:"center"}}}):t(N,{children:i.inspection_details||"N/A"})})}},{name:"Road Type",selector:i=>i.side,sortable:"true",center:"true",width:"120px"},{name:"Quantity/Layer No.",selector:i=>i.qty_layer,sortable:"true",center:"true",width:"150px"},...O?[{name:"In charge",selector:i=>i.incharge,sortable:"true",center:"true",cell:i=>t(De,{items:n,variant:"underlined","aria-label":"Incharge",fullWidth:!0,value:i.incharge||"na",onChange:c=>h(i.id,"incharge",c.target.value),selectedKeys:[String(i.incharge)],style:{minWidth:"260px"},popoverProps:{classNames:{content:"bg-transparent backdrop-blur-lg border-inherit"},style:{whiteSpace:"nowrap",minWidth:"fit-content"}},placeholder:"Select Incharge",renderValue:c=>c.map(D=>t("div",{className:"flex items-center gap-2 m-1",children:t(ar,{style:{whiteSpace:"nowrap"},size:"sm",name:D.data.name,avatarProps:{radius:"sm",size:"sm",src:D.data.profile_image}})},D.key)),children:c=>{var D;return t(G,{textValue:c.id,children:t(ar,{style:{whiteSpace:"nowrap"},size:"sm",name:c.name,description:((D=c.designation)==null?void 0:D.title)||"Incharge",avatarProps:{radius:"sm",size:"sm",src:c.profile_image}})},c.id)}})}]:[],{name:"Planned Time",selector:i=>i.planned_time,sortable:"true",center:"true",width:"130px"},{name:"Completion Time",selector:i=>i.completion_time,sortable:"true",center:"true",width:"250px",cell:i=>t(ke,{fullWidth:!0,size:"sm",variant:"underlined",type:"datetime-local",value:i.completion_time?new Date(i.completion_time).toISOString().slice(0,16):"",onChange:c=>h(i.id,"completion_time",c.target.value),inputProps:{placeholder:"YYYY-MM-DDTHH:MM"}})},{name:"Resubmission Count",selector:i=>i.resubmission_count,sortable:"true",center:"true",width:"160px",cell:i=>t(N,{children:i.resubmission_count?`${i.resubmission_count} ${i.resubmission_count>1?"times":"time"}`:""})},...O?[{name:"RFI Submission Date",selector:i=>i.rfi_submission_date,sortable:"true",center:"true",width:"180px",cell:i=>t(ke,{fullWidth:!0,size:"sm",type:"date",variant:"underlined",onChange:c=>h(i.id,"rfi_submission_date",c.target.value),value:i.rfi_submission_date?new Date(i.rfi_submission_date).toISOString().slice(0,10):"",style:{border:"none",outline:"none",backgroundColor:"transparent"},inputProps:{placeholder:"yyyy-MM-dd"}})}]:[],...O?[{name:"Actions",center:"true",width:"150px",cell:i=>g(Y,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[t(ue,{sx:{m:1},variant:"outlined",color:"success",size:"small",onClick:()=>{x(i),b("editDailyWork")},children:t(vt,{})}),t(ue,{sx:{m:1},variant:"outlined",color:"error",size:"small",onClick:()=>o(i.id,"deleteDailyWork"),children:t(_t,{})})]})}]:[]],A=i=>{switch(i){case"new":return"primary";case"resubmission":return"warning";case"completed":return"success";case"emergency":return"danger";default:return""}},h=async(i,c,D)=>{var j,R;try{const M=await Wr.post(route("dailyWorks.update"),{id:i,[c]:D});M.status===200?(r(K=>K.map(X=>X.id===i?{...X,[c]:D}:X)),ne.success(...M.data.messages||"Task updated successfully",{icon:"游릭",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:y.glassCard.backgroundColor,border:y.glassCard.border,color:y.palette.text.primary}})):ne.error(M.data.error||`Failed to update task ${[c]}.`,{icon:"游댮",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:y.glassCard.backgroundColor,border:y.glassCard.border,color:y.palette.text.primary}})}catch(M){ne.error(((R=(j=M.response)==null?void 0:j.data)==null?void 0:R.message)||"An unexpected error occurred.",{icon:"游댮",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:y.glassCard.backgroundColor,border:y.glassCard.border,color:y.palette.text.primary}})}};return g("div",{children:[t(ot,{styles:{"& .cgTKyH":{backgroundColor:"transparent !important",color:y.palette.text.primary}}}),t(Yt,{classNames:{base:"max-h-[84vh] overflow-scroll",table:"min-h-[84vh]"},columns:S,data:e,loading:a,loadingComponent:t(_e,{}),defaultSortField:"date",highlightOnHover:!0,responsive:!0,dense:!0})]})},Gt=({open:e,closeModal:r,currentRow:a,setData:o})=>{const n=me(),[s,m]=d.useState({id:a.id||"",date:a.date||"",number:a.number||"",planned_time:a.planned_time||"",type:a.type||"Structure",location:a.location||"",description:a.description||"",side:a.side||"SR-R",qty_layer:a.qty_layer||""}),[u,b]=d.useState({}),[x,C]=d.useState(!1),[v,w]=d.useState(!1);d.useEffect(()=>{const I=Object.values(s).some(_=>_!=="");w(I)},[s]);const y=I=>{const{name:_,value:S}=I.target;m(A=>({...A,[_]:S}))};async function O(I){I.preventDefault(),C(!0);const _=new Promise(async(S,A)=>{try{const h=await fetch(route("dailyWorks.update"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({ruleSet:"details",...s})}),i=await h.json();h.ok?(o(c=>c.map(D=>D.id===s.id?{...D,...s}:D)),r(),S(i.message?[i.message]:i.messages),C(!1),r(),console.log(i.message?[i.message]:i.messages)):(C(!1),b(i.errors),A(i.errors),console.error(i.errors))}catch(h){C(!1),r(),console.log(h),A(["An unexpected error occurred."])}});ne.promise(_,{pending:{render(){return g("div",{style:{display:"flex",alignItems:"center"},children:[t(_e,{}),t("span",{style:{marginLeft:"8px"},children:"Updating daily work ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:n.glassCard.backgroundColor,border:n.glassCard.border,color:n.palette.text.primary}},success:{render({data:S}){return t(N,{children:S.map((A,h)=>t("div",{children:A},h))})},icon:"游릭",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:n.glassCard.backgroundColor,border:n.glassCard.border,color:n.palette.text.primary}},error:{render({data:S}){return t(N,{children:S.map((A,h)=>t("div",{children:A},h))})},icon:"游댮",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:n.glassCard.backgroundColor,border:n.glassCard.border,color:n.palette.text.primary}}})}return g(Ue,{open:e,onClose:r,children:[g(Ve,{style:{cursor:"move"},id:"draggable-dialog-title",children:[t(Ce,{children:"Add Task"}),t(ue,{variant:"outlined",color:"primary",onClick:r,sx:{position:"absolute",top:8,right:16},children:t(fr,{})})]}),g("form",{onSubmit:O,children:[t(Ke,{children:g(B,{container:!0,spacing:2,children:[t(B,{item:!0,xs:12,md:6,children:t(ae,{label:"RFI Date",type:"date",name:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:s.date,onChange:y,error:!!u.date,helperText:u.date})}),t(B,{item:!0,xs:12,md:6,children:t(ae,{label:"RFI Number",name:"number",fullWidth:!0,value:s.number,onChange:y,error:!!u.number,helperText:u.number})}),t(B,{item:!0,xs:12,md:6,children:t(ae,{label:"Planned Time",name:"planned_time",fullWidth:!0,InputLabelProps:{shrink:!0},value:s.planned_time,onChange:y,error:!!u.planned_time,helperText:u.planned_time})}),t(B,{item:!0,xs:12,md:6,children:g(lt,{fullWidth:!0,children:[t(st,{id:"type-label",children:"Type"}),g(ct,{select:!0,label:"Type",name:"type",fullWidth:!0,value:s.type,onChange:y,error:!!u.type,helperText:u.type,labelId:"type-label",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:n.glassCard.backgroundColor,border:n.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[t(se,{value:"Structure",children:"Structure"}),t(se,{value:"Embankment",children:"Embankment"}),t(se,{value:"Pavement",children:"Pavement"})]}),t(ut,{children:u.type})]})}),t(B,{item:!0,xs:12,md:6,children:t(ae,{label:"Location",name:"location",fullWidth:!0,value:s.location,onChange:y,error:!!u.location,helperText:u.location})}),t(B,{item:!0,xs:12,md:6,children:t(ae,{label:"Description",name:"description",fullWidth:!0,value:s.description,onChange:y,error:!!u.description,helperText:u.description})}),t(B,{item:!0,xs:12,md:6,children:g(ae,{select:!0,label:"Road Type",name:"side",fullWidth:!0,value:s.side,onChange:y,error:!!u.side,helperText:u.side,children:[t(se,{value:"SR-R",children:"SR-R"}),t(se,{value:"SR-L",children:"SR-L"}),t(se,{value:"TR-R",children:"TR-R"}),t(se,{value:"TR-L",children:"TR-L"})]})}),t(B,{item:!0,xs:12,md:6,children:t(ae,{label:"Quantity/Layer No.",name:"qty_layer",fullWidth:!0,value:s.qty_layer,onChange:y,error:!!u.qty_layer,helperText:u.qty_layer})})]})}),t(qe,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"16px"},children:t(mr,{disabled:!v,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:x,children:"Submit"})})]})]})},Xt=({open:e,handleClose:r,handleDelete:a})=>(me(),g(Ue,{open:e,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[t(Ve,{id:"alert-dialog-title",children:"Confirm Deletion"}),t(Ke,{children:t(dt,{id:"alert-dialog-description",children:"Are you sure you want to delete this task? This action cannot be undone."})}),g(qe,{children:[t(Cr,{onClick:r,color:"primary",children:"Cancel"}),t(Cr,{onClick:a,color:"error",autoFocus:!0,children:"Delete"})]})]})),Qt=({open:e,closeModal:r,data:a,users:o})=>{d.useState(!1);const n=me(),s=[{label:"Date",key:"date"},{label:"RFI No.",key:"number"},{label:"Status",key:"status"},{label:"Assigned",key:"assigned"},{label:"In charge",key:"incharge"},{label:"Type",key:"type"},{label:"Description",key:"description"},{label:"Location",key:"location"},{label:"Side",key:"side"},{label:"Quantity/Layer",key:"qty_layer"},{label:"Planned Time",key:"planned_time"},{label:"Completion Time",key:"completion_time"},{label:"Results",key:"inspection_details"},{label:"Resubmission Count",key:"resubmission_count"},{label:"RFI Submission Date",key:"rfi_submission_date"}],[m,u]=d.useState(s.map(C=>({...C,checked:!0}))),b=C=>{const v=[...m];v[C].checked=!v[C].checked,u(v)},x=async C=>{const v=new Promise((w,y)=>{try{const O=a.map(S=>{const A={};return C.forEach(h=>{if(h.checked)if(h.key==="incharge"||h.key==="assigned"){const i=o.find(c=>c.id===S[h.key]);A[h.label]=i?i.name:"N/A"}else if(h.key==="status"){const i=S[h.key];A[h.label]=i.charAt(0).toUpperCase()+i.slice(1)}else A[h.label]=S[h.key]}),A}),I=nr.json_to_sheet(O),_=nr.book_new();nr.book_append_sheet(_,I,"Daily Works"),Ft(_,"DailyWorks.xlsx"),w("Export successful!"),r()}catch(O){y("Failed to export data. Please try again."),console.error("Error exporting data to Excel:",O)}});ne.promise(v,{pending:{render(){return g("div",{style:{display:"flex",alignItems:"center"},children:[t(_e,{}),t("span",{style:{marginLeft:"8px"},children:"Exporting data to Excel ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:n.glassCard.backgroundColor,border:n.glassCard.border,color:n.palette.text.primary}},success:{render({data:w}){return t(N,{children:w})},icon:"游릭",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:n.glassCard.backgroundColor,border:n.glassCard.border,color:n.palette.text.primary}},error:{render({data:w}){return t(N,{children:w})},icon:"游댮",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:n.glassCard.backgroundColor,border:n.glassCard.border,color:n.palette.text.primary}}})};return g(Ue,{open:e,onClose:r,children:[g(Ve,{style:{cursor:"move"},id:"draggable-dialog-title",children:[t(Ce,{children:"Export Daily Works"}),t(ue,{variant:"outlined",color:"primary",onClick:r,sx:{position:"absolute",top:8,right:16},children:t(fr,{})})]}),t(Ke,{children:g(pt,{size:"small",sx:{"& .MuiTableCell-root":{padding:"4px 8px"},"& .MuiCheckbox-root":{padding:"0px"}},children:[t(ft,{children:g(Dr,{children:[t(je,{children:"Column Label"}),t(je,{align:"center",children:"Include in Export"})]})}),t(mt,{children:m.map((C,v)=>g(Dr,{children:[t(je,{children:C.label}),t(je,{align:"center",children:t(gt,{checked:C.checked,onChange:()=>b(v)})})]},C.key))})]})}),t(qe,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:t(mr,{sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",onClick:()=>x(m),startIcon:t(lr,{}),children:"Download"})})]})};var Jt=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Se(e,r){var a=Zt(e);if(typeof a.path!="string"){var o=e.webkitRelativePath;Object.defineProperty(a,"path",{value:typeof r=="string"?r:typeof o=="string"&&o.length>0?o:e.name,writable:!1,configurable:!1,enumerable:!0})}return a}function Zt(e){var r=e.name,a=r&&r.lastIndexOf(".")!==-1;if(a&&!e.type){var o=r.split(".").pop().toLowerCase(),n=Jt.get(o);n&&Object.defineProperty(e,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return e}var ea=[".DS_Store","Thumbs.db"];function ra(e){return ge(this,void 0,void 0,function(){return he(this,function(r){return ze(e)&&ta(e.dataTransfer)?[2,ia(e.dataTransfer,e.type)]:aa(e)?[2,na(e)]:Array.isArray(e)&&e.every(function(a){return"getFile"in a&&typeof a.getFile=="function"})?[2,oa(e)]:[2,[]]})})}function ta(e){return ze(e)}function aa(e){return ze(e)&&ze(e.target)}function ze(e){return typeof e=="object"&&e!==null}function na(e){return sr(e.target.files).map(function(r){return Se(r)})}function oa(e){return ge(this,void 0,void 0,function(){var r;return he(this,function(a){switch(a.label){case 0:return[4,Promise.all(e.map(function(o){return o.getFile()}))];case 1:return r=a.sent(),[2,r.map(function(o){return Se(o)})]}})})}function ia(e,r){return ge(this,void 0,void 0,function(){var a,o;return he(this,function(n){switch(n.label){case 0:return e.items?(a=sr(e.items).filter(function(s){return s.kind==="file"}),r!=="drop"?[2,a]:[4,Promise.all(a.map(la))]):[3,2];case 1:return o=n.sent(),[2,Sr($r(o))];case 2:return[2,Sr(sr(e.files).map(function(s){return Se(s)}))]}})})}function Sr(e){return e.filter(function(r){return ea.indexOf(r.name)===-1})}function sr(e){if(e===null)return[];for(var r=[],a=0;a<e.length;a++){var o=e[a];r.push(o)}return r}function la(e){if(typeof e.webkitGetAsEntry!="function")return Fr(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?Br(r):Fr(e)}function $r(e){return e.reduce(function(r,a){return wr(wr([],_r(r),!1),_r(Array.isArray(a)?$r(a):[a]),!1)},[])}function Fr(e){var r=e.getAsFile();if(!r)return Promise.reject("".concat(e," is not a File"));var a=Se(r);return Promise.resolve(a)}function sa(e){return ge(this,void 0,void 0,function(){return he(this,function(r){return[2,e.isDirectory?Br(e):ca(e)]})})}function Br(e){var r=e.createReader();return new Promise(function(a,o){var n=[];function s(){var m=this;r.readEntries(function(u){return ge(m,void 0,void 0,function(){var b,x,C;return he(this,function(v){switch(v.label){case 0:if(u.length)return[3,5];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all(n)];case 2:return b=v.sent(),a(b),[3,4];case 3:return x=v.sent(),o(x),[3,4];case 4:return[3,6];case 5:C=Promise.all(u.map(sa)),n.push(C),s(),v.label=6;case 6:return[2]}})})},function(u){o(u)})}s()})}function ca(e){return ge(this,void 0,void 0,function(){return he(this,function(r){return[2,new Promise(function(a,o){e.file(function(n){var s=Se(n,e.fullPath);a(s)},function(n){o(n)})})]})})}var ua=function(e,r){if(e&&r){var a=Array.isArray(r)?r:r.split(","),o=e.name||"",n=(e.type||"").toLowerCase(),s=n.replace(/\/.*$/,"");return a.some(function(m){var u=m.trim().toLowerCase();return u.charAt(0)==="."?o.toLowerCase().endsWith(u):u.endsWith("/*")?s===u.replace(/\/.*$/,""):n===u})}return!0};function Ar(e){return fa(e)||pa(e)||Vr(e)||da()}function da(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pa(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fa(e){if(Array.isArray(e))return cr(e)}function Er(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,o)}return a}function Tr(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Er(Object(a),!0).forEach(function(o){Nr(e,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Er(Object(a)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))})}return e}function Nr(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function we(e,r){return ha(e)||ga(e,r)||Vr(e,r)||ma()}function ma(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vr(e,r){if(e){if(typeof e=="string")return cr(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return cr(e,r)}}function cr(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=e[a];return o}function ga(e,r){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var o=[],n=!0,s=!1,m,u;try{for(a=a.call(e);!(n=(m=a.next()).done)&&(o.push(m.value),!(r&&o.length===r));n=!0);}catch(b){s=!0,u=b}finally{try{!n&&a.return!=null&&a.return()}finally{if(s)throw u}}return o}}function ha(e){if(Array.isArray(e))return e}var ba="file-invalid-type",ya="file-too-large",va="file-too-small",xa="too-many-files",Ca=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var a=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:ba,message:"File type must be ".concat(a)}},Or=function(r){return{code:ya,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},Ir=function(r){return{code:va,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},Da={code:xa,message:"Too many files"};function Kr(e,r){var a=e.type==="application/x-moz-file"||ua(e,r);return[a,a?null:Ca(r)]}function qr(e,r,a){if(ce(e.size))if(ce(r)&&ce(a)){if(e.size>a)return[!1,Or(a)];if(e.size<r)return[!1,Ir(r)]}else{if(ce(r)&&e.size<r)return[!1,Ir(r)];if(ce(a)&&e.size>a)return[!1,Or(a)]}return[!0,null]}function ce(e){return e!=null}function ka(e){var r=e.files,a=e.accept,o=e.minSize,n=e.maxSize,s=e.multiple,m=e.maxFiles,u=e.validator;return!s&&r.length>1||s&&m>=1&&r.length>m?!1:r.every(function(b){var x=Kr(b,a),C=we(x,1),v=C[0],w=qr(b,o,n),y=we(w,1),O=y[0],I=u?u(b):null;return v&&O&&!I})}function Le(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Re(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Pr(e){e.preventDefault()}function wa(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function _a(e){return e.indexOf("Edge/")!==-1}function Sa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return wa(e)||_a(e)}function U(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return function(o){for(var n=arguments.length,s=new Array(n>1?n-1:0),m=1;m<n;m++)s[m-1]=arguments[m];return r.some(function(u){return!Le(o)&&u&&u.apply(void 0,[o].concat(s)),Le(o)})}}function Fa(){return"showOpenFilePicker"in window}function Aa(e){if(ce(e)){var r=Object.entries(e).filter(function(a){var o=we(a,2),n=o[0],s=o[1],m=!0;return Yr(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),m=!1),(!Array.isArray(s)||!s.every(Ur))&&(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),m=!1),m}).reduce(function(a,o){var n=we(o,2),s=n[0],m=n[1];return Tr(Tr({},a),{},Nr({},s,m))},{});return[{description:"Files",accept:r}]}return e}function Ea(e){if(ce(e))return Object.entries(e).reduce(function(r,a){var o=we(a,2),n=o[0],s=o[1];return[].concat(Ar(r),[n],Ar(s))},[]).filter(function(r){return Yr(r)||Ur(r)}).join(",")}function Ta(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Oa(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function Yr(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Ur(e){return/^.*\.[\w]+$/.test(e)}var Ia=["children"],Pa=["open"],ja=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Ra=["refKey","onChange","onClick"];function Wa(e){return Ma(e)||La(e)||Gr(e)||za()}function za(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function La(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ma(e){if(Array.isArray(e))return ur(e)}function or(e,r){return Ba(e)||$a(e,r)||Gr(e,r)||Ha()}function Ha(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gr(e,r){if(e){if(typeof e=="string")return ur(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ur(e,r)}}function ur(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=e[a];return o}function $a(e,r){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var o=[],n=!0,s=!1,m,u;try{for(a=a.call(e);!(n=(m=a.next()).done)&&(o.push(m.value),!(r&&o.length===r));n=!0);}catch(b){s=!0,u=b}finally{try{!n&&a.return!=null&&a.return()}finally{if(s)throw u}}return o}}function Ba(e){if(Array.isArray(e))return e}function jr(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,o)}return a}function E(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?jr(Object(a),!0).forEach(function(o){dr(e,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jr(Object(a)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))})}return e}function dr(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Me(e,r){if(e==null)return{};var a=Na(e,r),o,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)o=s[n],!(r.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}function Na(e,r){if(e==null)return{};var a={},o=Object.keys(e),n,s;for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&(a[n]=e[n]);return a}var vr=d.forwardRef(function(e,r){var a=e.children,o=Me(e,Ia),n=Qr(o),s=n.open,m=Me(n,Pa);return d.useImperativeHandle(r,function(){return{open:s}},[s]),We.createElement(d.Fragment,null,a(E(E({},m),{},{open:s})))});vr.displayName="Dropzone";var Xr={disabled:!1,getFilesFromEvent:ra,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};vr.defaultProps=Xr;vr.propTypes={children:k.func,accept:k.objectOf(k.arrayOf(k.string)),multiple:k.bool,preventDropOnDocument:k.bool,noClick:k.bool,noKeyboard:k.bool,noDrag:k.bool,noDragEventsBubbling:k.bool,minSize:k.number,maxSize:k.number,maxFiles:k.number,disabled:k.bool,getFilesFromEvent:k.func,onFileDialogCancel:k.func,onFileDialogOpen:k.func,useFsAccessApi:k.bool,autoFocus:k.bool,onDragEnter:k.func,onDragLeave:k.func,onDragOver:k.func,onDrop:k.func,onDropAccepted:k.func,onDropRejected:k.func,onError:k.func,validator:k.func};var pr={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Qr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=E(E({},Xr),e),a=r.accept,o=r.disabled,n=r.getFilesFromEvent,s=r.maxSize,m=r.minSize,u=r.multiple,b=r.maxFiles,x=r.onDragEnter,C=r.onDragLeave,v=r.onDragOver,w=r.onDrop,y=r.onDropAccepted,O=r.onDropRejected,I=r.onFileDialogCancel,_=r.onFileDialogOpen,S=r.useFsAccessApi,A=r.autoFocus,h=r.preventDropOnDocument,i=r.noClick,c=r.noKeyboard,D=r.noDrag,j=r.noDragEventsBubbling,R=r.onError,M=r.validator,K=d.useMemo(function(){return Ea(a)},[a]),X=d.useMemo(function(){return Aa(a)},[a]),oe=d.useMemo(function(){return typeof _=="function"?_:Rr},[_]),Z=d.useMemo(function(){return typeof I=="function"?I:Rr},[I]),$=d.useRef(null),L=d.useRef(null),Fe=d.useReducer(Va,pr),Ae=or(Fe,2),be=Ae[0],V=Ae[1],Ee=be.isFocused,ee=be.isFileDialogActive,re=d.useRef(typeof window<"u"&&window.isSecureContext&&S&&Fa()),F=function(){!re.current&&ee&&setTimeout(function(){if(L.current){var p=L.current.files;p.length||(V({type:"closeDialog"}),Z())}},300)};d.useEffect(function(){return window.addEventListener("focus",F,!1),function(){window.removeEventListener("focus",F,!1)}},[L,ee,Z,re]);var Q=d.useRef([]),ie=function(p){$.current&&$.current.contains(p.target)||(p.preventDefault(),Q.current=[])};d.useEffect(function(){return h&&(document.addEventListener("dragover",Pr,!1),document.addEventListener("drop",ie,!1)),function(){h&&(document.removeEventListener("dragover",Pr),document.removeEventListener("drop",ie))}},[$,h]),d.useEffect(function(){return!o&&A&&$.current&&$.current.focus(),function(){}},[$,A,o]);var J=d.useCallback(function(l){R?R(l):console.error(l)},[R]),ye=d.useCallback(function(l){l.preventDefault(),l.persist(),Ie(l),Q.current=[].concat(Wa(Q.current),[l.target]),Re(l)&&Promise.resolve(n(l)).then(function(p){if(!(Le(l)&&!j)){var P=p.length,H=P>0&&ka({files:p,accept:K,minSize:m,maxSize:s,multiple:u,maxFiles:b,validator:M}),q=P>0&&!H;V({isDragAccept:H,isDragReject:q,isDragActive:!0,type:"setDraggedFiles"}),x&&x(l)}}).catch(function(p){return J(p)})},[n,x,J,j,K,m,s,u,b,M]),Te=d.useCallback(function(l){l.preventDefault(),l.persist(),Ie(l);var p=Re(l);if(p&&l.dataTransfer)try{l.dataTransfer.dropEffect="copy"}catch{}return p&&v&&v(l),!1},[v,j]),f=d.useCallback(function(l){l.preventDefault(),l.persist(),Ie(l);var p=Q.current.filter(function(H){return $.current&&$.current.contains(H)}),P=p.indexOf(l.target);P!==-1&&p.splice(P,1),Q.current=p,!(p.length>0)&&(V({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Re(l)&&C&&C(l))},[$,C,j]),T=d.useCallback(function(l,p){var P=[],H=[];l.forEach(function(q){var ve=Kr(q,K),fe=or(ve,2),Xe=fe[0],Qe=fe[1],Je=qr(q,m,s),Pe=or(Je,2),Ze=Pe[0],er=Pe[1],rr=M?M(q):null;if(Xe&&Ze&&!rr)P.push(q);else{var tr=[Qe,er];rr&&(tr=tr.concat(rr)),H.push({file:q,errors:tr.filter(function(rt){return rt})})}}),(!u&&P.length>1||u&&b>=1&&P.length>b)&&(P.forEach(function(q){H.push({file:q,errors:[Da]})}),P.splice(0)),V({acceptedFiles:P,fileRejections:H,type:"setFiles"}),w&&w(P,H,p),H.length>0&&O&&O(H,p),P.length>0&&y&&y(P,p)},[V,u,K,m,s,b,w,y,O,M]),W=d.useCallback(function(l){l.preventDefault(),l.persist(),Ie(l),Q.current=[],Re(l)&&Promise.resolve(n(l)).then(function(p){Le(l)&&!j||T(p,l)}).catch(function(p){return J(p)}),V({type:"reset"})},[n,T,J,j]),z=d.useCallback(function(){if(re.current){V({type:"openDialog"}),oe();var l={multiple:u,types:X};window.showOpenFilePicker(l).then(function(p){return n(p)}).then(function(p){T(p,null),V({type:"closeDialog"})}).catch(function(p){Ta(p)?(Z(p),V({type:"closeDialog"})):Oa(p)?(re.current=!1,L.current?(L.current.value=null,L.current.click()):J(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):J(p)});return}L.current&&(V({type:"openDialog"}),oe(),L.current.value=null,L.current.click())},[V,oe,Z,S,T,J,X,u]),te=d.useCallback(function(l){!$.current||!$.current.isEqualNode(l.target)||(l.key===" "||l.key==="Enter"||l.keyCode===32||l.keyCode===13)&&(l.preventDefault(),z())},[$,z]),le=d.useCallback(function(){V({type:"focus"})},[]),de=d.useCallback(function(){V({type:"blur"})},[]),xr=d.useCallback(function(){i||(Sa()?setTimeout(z,0):z())},[i,z]),pe=function(p){return o?null:p},Ge=function(p){return c?null:pe(p)},Oe=function(p){return D?null:pe(p)},Ie=function(p){j&&p.stopPropagation()},Jr=d.useMemo(function(){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=l.refKey,P=p===void 0?"ref":p,H=l.role,q=l.onKeyDown,ve=l.onFocus,fe=l.onBlur,Xe=l.onClick,Qe=l.onDragEnter,Je=l.onDragOver,Pe=l.onDragLeave,Ze=l.onDrop,er=Me(l,ja);return E(E(dr({onKeyDown:Ge(U(q,te)),onFocus:Ge(U(ve,le)),onBlur:Ge(U(fe,de)),onClick:pe(U(Xe,xr)),onDragEnter:Oe(U(Qe,ye)),onDragOver:Oe(U(Je,Te)),onDragLeave:Oe(U(Pe,f)),onDrop:Oe(U(Ze,W)),role:typeof H=="string"&&H!==""?H:"presentation"},P,$),!o&&!c?{tabIndex:0}:{}),er)}},[$,te,le,de,xr,ye,Te,f,W,c,D,o]),Zr=d.useCallback(function(l){l.stopPropagation()},[]),et=d.useMemo(function(){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=l.refKey,P=p===void 0?"ref":p,H=l.onChange,q=l.onClick,ve=Me(l,Ra),fe=dr({accept:K,multiple:u,type:"file",style:{display:"none"},onChange:pe(U(H,W)),onClick:pe(U(q,Zr)),tabIndex:-1},P,L);return E(E({},fe),ve)}},[L,a,u,W,o]);return E(E({},be),{},{isFocused:Ee&&!o,getRootProps:Jr,getInputProps:et,rootRef:$,inputRef:L,open:pe(z)})}function Va(e,r){switch(r.type){case"focus":return E(E({},e),{},{isFocused:!0});case"blur":return E(E({},e),{},{isFocused:!1});case"openDialog":return E(E({},pr),{},{isFileDialogActive:!0});case"closeDialog":return E(E({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return E(E({},e),{},{isDragActive:r.isDragActive,isDragAccept:r.isDragAccept,isDragReject:r.isDragReject});case"setFiles":return E(E({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return E({},pr);default:return e}}function Rr(){}const Ka=({open:e,closeModal:r,setTotalRows:a,setData:o})=>{const[n,s]=d.useState(null),[m,u]=d.useState(!1),b=me(),x=_=>{s(_[0])},C=()=>{s(null)},{getRootProps:v,getInputProps:w,isDragActive:y}=Qr({onDrop:x,noClick:!!n,noKeyboard:!!n}),O=_=>{if(!_)return t(Ot,{fontSize:"large"});const S=_.type;return S.startsWith("image/")?t(Image,{fontSize:"large"}):S==="application/pdf"?t(jt,{fontSize:"large"}):S==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"?t(It,{fontSize:"large"}):t(Pt,{fontSize:"large"})};return g(Ue,{open:e,onClose:r,children:[g(Ve,{style:{cursor:"move"},id:"draggable-dialog-title",children:[t(Ce,{children:"Import Daily Works"}),t(ue,{variant:"outlined",color:"primary",onClick:r,sx:{position:"absolute",top:8,right:16,zIndex:0},children:t(fr,{})})]}),g("form",{onSubmit:async _=>{_.preventDefault(),u(!0);const S=new FormData;S.append("file",n);const A=new Promise(async(h,i)=>{try{const c=await axios.post(route("dailyWorks.import"),S);console.log(c),c.status===200&&(o(c.data.data),a(c.data.total),h(c.data.message||"Daily works imported successfully."),r())}catch(c){console.log(c.response),console.log(c.response.data.errors),i(`Error: ${c.message||"An unexpected error occurred."}`)}finally{u(!1)}});ne.promise(A,{pending:{render(){return g("div",{style:{display:"flex",alignItems:"center"},children:[t(_e,{}),t("span",{style:{marginLeft:"8px"},children:"Uploading file ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:b.glassCard.backgroundColor,border:b.glassCard.border,color:b.palette.text.primary}},success:{render({data:h}){return t(N,{children:h})},icon:"游릭",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:b.glassCard.backgroundColor,border:b.glassCard.border,color:b.palette.text.primary}},error:{render({data:h}){return t(N,{children:h})},icon:"游댮",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:b.glassCard.backgroundColor,border:b.glassCard.border,color:b.palette.text.primary}}})},children:[t(Ke,{children:t(B,{container:!0,spacing:2,children:t(B,{item:!0,xs:12,children:g(Y,{...v(),sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"2px dashed #ccc",borderRadius:"8px",padding:"20px",cursor:n?"not-allowed":"pointer","&:hover":{borderColor:n?"#ccc":"#aaa"}},children:[t("input",{...w()}),t(ue,{sx:{borderRadius:"50%",backgroundColor:"#f0f0f0","&:hover":{backgroundColor:n?"#f0f0f0":"#e0e0e0",cursor:n?"not-allowed":"pointer"}},disabled:!!n,children:O(n)}),n?g(N,{children:[g(Ce,{variant:"body1",sx:{marginTop:"10px"},children:[n.name," (",(n.size/1024).toFixed(2)," KB)"]}),t(ue,{onClick:C,sx:{marginTop:"10px",backgroundColor:"#f0f0f0","&:hover":{backgroundColor:"#e0e0e0"}},children:t(Tt,{})})]}):t(Ce,{variant:"body1",sx:{marginTop:"10px"},children:"Drag & drop files here, or click to select files"})]})})})}),t(qe,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:t(mr,{disabled:!n,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:m,startIcon:t(ir,{}),children:"Upload"})})]})]})};St.extend(kt);const qa=We.memo(({auth:e,title:r,allData:a,jurisdictions:o,users:n,reports:s,reports_with_daily_works:m,overallEndDate:u,overallStartDate:b})=>{const x=me(),[C,v]=d.useState([]),[w,y]=d.useState(!1),[O,I]=d.useState(0),[_,S]=d.useState(0),[A,h]=d.useState([]),[i,c]=d.useState(),[D,j]=d.useState(null),[R,M]=d.useState(null),[K,X]=d.useState(""),oe=ht(x.breakpoints.down("md")),[Z,$]=d.useState(30),[L,Fe]=d.useState(1),Ae=async(f,T,W)=>{try{const z=await Wr.get(route("dailyWorks.paginate"),{params:{page:f,perPage:T,search:K,status:W.status!=="all"?W.status:"",inCharge:W.incharge!=="all"?W.incharge:"",startDate:W.startDate,endDate:W.endDate}});console.log(z),v(z.data.data),I(z.data.total),S(z.data.last_page),y(!1)}catch(z){console.log(z),ne.error("Failed to fetch data.",{icon:"游댮",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:x.glassCard.backgroundColor,border:x.glassCard.border,color:x.palette.text.primary}}),y(!1)}},be=()=>{const f=new Promise(async(T,W)=>{var z,te;try{const le=await fetch("/delete-daily-work",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:D,page:L,perPage:Z,search:K,status:F.status!=="all"?F.status:"",inCharge:F.incharge!=="all"?F.incharge:"",startDate:(z=F.startDate)==null?void 0:z.format("YYYY-MM-DD"),endDate:(te=F.endDate)==null?void 0:te.format("YYYY-MM-DD")})}),de=await le.json();le.ok?(v(de.data),I(de.total),T("Daily work deleted successfully")):W(de.error||"Failed to delete task")}catch(le){console.error("Error deleting task:",le),W("An error occurred while deleting the task")}finally{Ee()}});ne.promise(f,{pending:{render(){return g("div",{style:{display:"flex",alignItems:"center"},children:[t(_e,{}),t("span",{style:{marginLeft:"8px"},children:"Deleting task..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:x.glassCard.backgroundColor,border:x.glassCard.border,color:x.palette.text.primary}},success:{render({data:T}){return t(N,{children:T})},icon:"游릭",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:x.glassCard.backgroundColor,border:x.glassCard.border,color:x.palette.text.primary}},error:{render({data:T}){return t(N,{children:T})},icon:"游댮",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:x.glassCard.backgroundColor,border:x.glassCard.border,color:x.palette.text.primary}}})},V=d.useCallback((f,T)=>{j(f),M(T)},[]),Ee=d.useCallback(()=>{M(null),j(null)},[]),ee=d.useCallback(f=>{M(f)},[]),re=d.useCallback(()=>{M(null)},[]),[F,Q]=d.useState({startDate:null,endDate:null,status:"all",incharge:"all",report:""}),ie=d.useCallback((f,T)=>{if(console.log(f,T),f==="startDate"||f==="endDate"){ye(1);const W=f==="startDate"?T:F.startDate,z=f==="endDate"?T:F.endDate;Q(te=>({...te,startDate:W,endDate:f==="endDate"?z<W?"":z:te.endDate}))}else Q(W=>({...W,[f]:T}))},[F]),J=f=>{const T=f.target.value.toLowerCase();X(T)};d.useEffect(()=>{y(!0),Ae(L,Z,F)},[L,Z,F,K]);const ye=f=>{Fe(f)},Te=f=>{switch(f){case"new":return"primary";case"resubmission":return"warning";case"completed":return"success";case"emergency":return"danger";default:return""}};return console.log(b,u),g(N,{children:[t(at,{title:r}),R==="editDailyWork"&&t(Gt,{open:R==="editDailyWork",currentRow:i,setData:v,closeModal:re}),R==="deleteDailyWork"&&t(Xt,{open:R==="deleteDailyWork",handleClose:Ee,handleDelete:be,setData:v}),R==="importDailyWorks"&&t(Ka,{open:R==="importDailyWorks",closeModal:re,setData:v,setTotalRows:I}),R==="exportDailyWorks"&&t(Qt,{open:R==="exportDailyWorks",closeModal:re,data:C,users:n}),t(Y,{sx:{display:"flex",justifyContent:"center",p:2},children:t(bt,{in:!0,children:g(xt,{children:[t(yt,{title:r,sx:{padding:"24px"},action:g(Y,{display:"flex",gap:2,children:[e.permissions.includes("addTask")&&t(xe,{isIconOnly:!0,variant:"faded",title:"Add Task",color:"primary",id:"showAddModalBtn",children:t(wt,{})}),e.roles.includes("Administrator")&&t(N,{children:oe?g(N,{children:[t(xe,{variant:"faded",isIconOnly:!0,title:"Import Daily Works",color:"warning",onClick:()=>ee("importDailyWorks"),children:t(ir,{})}),t(xe,{variant:"faded",isIconOnly:!0,title:"Export Daily Works",color:"success",onClick:()=>ee("exportDailyWorks"),children:t(lr,{})})]}):g(N,{children:[t(xe,{title:"Import Daily Works",variant:"bordered",color:"warning",startContent:t(ir,{}),onClick:()=>ee("importDailyWorks"),children:"Import"}),t(xe,{title:"Export Daily Works",variant:"bordered",color:"success",startContent:t(lr,{}),onClick:()=>ee("exportDailyWorks"),children:"Export"})]})})]})}),t(kr,{children:t(Y,{children:g(B,{container:!0,spacing:2,children:[t(B,{item:!0,xs:12,sm:6,md:6,children:g(Y,{display:"flex",alignItems:"center",children:[t(ke,{isLoading:w,label:"Start Date",type:"text",onFocus:f=>f.target.type="date",onBlur:f=>f.target.type="text","aria-label":"Start Date",variant:"bordered",value:F.startDate||"",onChange:f=>ie("startDate",f.target.value),placeholder:"Select Start Date",min:b,max:F.endDate||u}),t(Y,{mx:1,children:"to"}),t(ke,{isLoading:w,label:"End Date",disabled:!F.startDate,type:"text",onFocus:f=>f.target.type="date",onBlur:f=>f.target.type="text",variant:"bordered",value:F.endDate||"",onChange:f=>ie("endDate",f.target.value),placeholder:"Select End Date",min:F.startDate||b,max:u})]})}),t(B,{item:!0,xs:6,sm:4,md:3,children:g(De,{isLoading:w,label:"Status",fullWidth:!0,variant:"bordered","aria-label":"Status",color:Te(F.status),placeholder:"Select Status",value:F.status,onChange:f=>ie("status",f.target.value),selectedKeys:[F.status],popoverProps:{classNames:{content:"bg-transparent backdrop-blur-lg border-inherit"}},children:[t(G,{value:"all",children:"All"},"all"),t(G,{value:"completed",children:"Completed"},"completed"),t(G,{value:"new",children:"New"},"new"),t(G,{value:"resubmission",children:"Resubmission"},"resubmission"),t(G,{value:"emergency",children:"Emergency"},"emergency")]})}),e.roles.includes("Administrator")&&t(B,{item:!0,xs:6,sm:4,md:3,children:g(De,{isLoading:w,label:"Incharge",fullWidth:!0,"aria-label":"Incharge",variant:"bordered",placeholder:"Select Status",name:"incharge",value:F.incharge,onChange:f=>ie("incharge",f.target.value),selectedKeys:[F.status],popoverProps:{classNames:{content:"bg-transparent backdrop-blur-lg border-inherit"}},children:[t(G,{value:"all",children:"All"},"all"),a.allInCharges.map(f=>t(G,{value:f.id,children:f.name},f.id))]})}),t(B,{item:!0,xs:12,sm:12,md:12,children:t(ke,{isLoading:w,size:"lg","aria-label":"Search",fullWidth:!0,variant:"bordered",placeholder:"Search...",value:K,onChange:J,startContent:t(At,{})})})]})})}),g(kr,{children:[t(Ut,{setData:v,filteredData:A,setFilteredData:h,reports:s,setCurrentRow:c,currentPage:L,setCurrentPage:Fe,setLoading:y,handleClickOpen:V,openModal:ee,juniors:a.juniors,totalRows:O,lastPage:_,loading:w,allData:C,allInCharges:a.allInCharges,jurisdictions:o,users:n,reports_with_daily_works:m}),O>=30&&t("div",{className:"py-2 px-2 flex justify-center items-center",children:t(Et,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:L,total:_,onChange:ye})})]})]})})})]})});qa.layout=e=>t(Ct,{children:e});export{qa as default};
