import{m as Qe,u as er,n as rr,o as tr,i as he,r as h,e as ar,Y as nr,V as ir,j as r,a as e,F as z,h as ye,g as ze,f as or,J as Le,R as ke,b as lr,Q as We}from"./app-DDhVNfvV.js";import{i as sr,h as dr,d as cr,_ as pr,a as Pe,s as ur,j as Ie,e as mr,o as hr,u as ae,G as H,F as br}from"./GlassCard-B8deHOrc.js";import{a4 as gr,ai as fr,x as xr,I as q,i as t,j as K,B as M,q as _r,n as yr,o as vr,p as Cr,F as kr,aj as Sr,a as wr,t as Nr,ak as Fr,H as Pr,al as Ir,am as Er,u as je,A as Je,G as Dr,d as Br,h as Rr}from"./App-CULBC9Jb.js";import{P as Ar}from"./PageHeader-qfMvUU9K.js";import{S as Tr}from"./StatsCards-CaEaffu4.js";import{C as ve}from"./Clear-Brrz3geX.js";import{G as de}from"./GlassDialog-BbPdd5-L.js";import{D as ce}from"./DialogTitle-DVsFppiK.js";import{T as $,B as ee}from"./logo-DoLGM3I0.js";import{A as Ee}from"./Avatar-pF7eTFjT.js";import{P as $r}from"./PhotoCamera-B6CN_jSg.js";import{T as D,I as Y,F as _e}from"./TextField-DHyBbceL.js";import{S as X,M as j}from"./Select-G4UAMmZq.js";import{D as pe,a as ue}from"./DialogContent-DzqEob6e.js";import{L as ie}from"./LoadingButton-CPf4VyNc.js";import{C as ge}from"./CircularProgress-ukpRde3Q.js";import{C as Z}from"./CardContent-783YhD2K.js";import{C as we}from"./Clear-R4A6cchs.js";import{B as He}from"./Button-PH-Yt16S.js";import{A as Ke}from"./Add-DaewG29U.js";import{C as se}from"./CardHeader-BPTzkM70.js";import{D as be}from"./Divider-anknaL5v.js";import{C as Lr}from"./CardActions-DGZCyrJi.js";import{c as Wr}from"./chunk-MZRCPRP2-4Sm2aTj8.js";import{F as jr}from"./EllipsisVerticalIcon-0SYcdA89.js";import{F as Ye}from"./UserIcon-BZDmR83e.js";import{F as Mr}from"./BuildingOfficeIcon-BXNAJj1w.js";import{F as Ne}from"./ExclamationTriangleIcon-3tpAB86s.js";import{F as Gr}from"./ShieldCheckIcon-B8pnYfIx.js";import{F as Ur,a as Or}from"./UserPlusIcon-BpzyyKkk.js";import{c as qr}from"./chunk-D5XJWRAV-BEd1Mod5.js";import{F as Xe}from"./ClockIcon-UBQM4q2z.js";import{F as De}from"./CheckCircleIcon-BkPxWqsz.js";import{d as zr,b as Me}from"./DocumentTextIcon-QwzC9WoH.js";import{F as Jr}from"./EyeIcon-B-1DdV8E.js";import{F as Hr}from"./PencilIcon-BtapQh-d.js";import{F as Kr}from"./TrashIcon-rGR8b_v2.js";import{c as te}from"./chunk-J7I6W5JF-Dj4B-Czi.js";import{p as Yr}from"./chunk-CXOJTH5M-BnHuCd_g.js";import{d as Xr}from"./dayjs.min-Dao2E2MD.js";import{F as Zr}from"./ChartBarIcon-CzsPYg0y.js";import{F as Vr}from"./DocumentArrowDownIcon-C7bxjW28.js";import{b as le}from"./Popover-DGnHN2Gx.js";import{L as W,a as k}from"./ListItemText-dSibWT0s.js";import{T as Qr,a as Se}from"./Tabs-Dgu0TtE0.js";import{i as et}from"./chunk-6MDMHKHV-DNEscIMF.js";import{b as rt}from"./chunk-57V4RE7B-SGFU28YJ.js";import{s as Ge,l as Q}from"./chunk-2GIFKCNQ-B1Kwyu4F.js";import"./app-CYwLuuRk.js";import"./create-visual-element-DIA5r6xh.js";import"./EnvelopeIcon-jGHS91X9.js";import"./UserGroupIcon-CFQYzcyB.js";import"./CreditCardIcon-nnu7lg95.js";import"./QuestionMarkCircleIcon-ClI4UiU9.js";import"./KeyIcon-CAZJdP6I.js";import"./InformationCircleIcon-D0VUrEF1.js";import"./StarIcon-CB497gpk.js";import"./GlobeAltIcon-BeSAdHAC.js";import"./LockClosedIcon-CNT0kaEE.js";import"./chunk-LGMZDQT5-CF5HrKbt.js";import"./number-DfkVkf0F.js";import"./index-I7bPq2YP.js";import"./chunk-A6PX3NG3-DZLS-1Gt.js";import"./useLabels-Blg_QI1U.js";import"./XMarkIcon-CRGrHH6E.js";import"./useFormReset-Dv_1w4_q.js";import"./Dialog-B0tTkTVF.js";import"./useSlot-vNKPmkVG.js";import"./chunk-M3MASYO7-DaLySJZS.js";import"./index-B-fk9Tt0.js";import"./useLabel-C1JBDqVQ.js";import"./NumberFormatter-DNR9MAW-.js";import"./KeyboardArrowRight-DYGxkxL1.js";import"./useListState-D8r1zUCw.js";import"./chunk-7F3ZLNJ6-CHfbZssJ.js";var Ze=Qe((n,N)=>{var b;const{as:I,className:m,children:A,...f}=n,C=I||"div",a=er(N),{slots:w,classNames:c}=rr(),T=tr(c==null?void 0:c.footer,m);return he.jsx(C,{ref:a,className:(b=w.footer)==null?void 0:b.call(w,{class:T}),...f,children:A})});Ze.displayName="HeroUI.CardFooter";var tt=Ze;function at({title:n,titleId:N,...b},I){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:I,"aria-labelledby":N},b),n?h.createElement("title",{id:N},n):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"}))}const nt=h.forwardRef(at);function it({title:n,titleId:N,...b},I){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:I,"aria-labelledby":N},b),n?h.createElement("title",{id:N},n):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const ot=h.forwardRef(it);function lt(n){return dr("MuiInputAdornment",n)}const Ue=sr("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var Oe;const st=["children","className","component","disablePointerEvents","disableTypography","position","variant"],dt=(n,N)=>{const{ownerState:b}=n;return[N.root,N[`position${Ie(b.position)}`],b.disablePointerEvents===!0&&N.disablePointerEvents,N[b.variant]]},ct=n=>{const{classes:N,disablePointerEvents:b,hiddenLabel:I,position:m,size:A,variant:f}=n,C={root:["root",b&&"disablePointerEvents",m&&`position${Ie(m)}`,f,I&&"hiddenLabel",A&&`size${Ie(A)}`]};return mr(C,lt,N)},pt=ur("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:dt})(({theme:n,ownerState:N})=>Pe({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(n.vars||n).palette.action.active},N.variant==="filled"&&{[`&.${Ue.positionStart}&:not(.${Ue.hiddenLabel})`]:{marginTop:16}},N.position==="start"&&{marginRight:8},N.position==="end"&&{marginLeft:8},N.disablePointerEvents===!0&&{pointerEvents:"none"})),ut=h.forwardRef(function(N,b){const I=cr({props:N,name:"MuiInputAdornment"}),{children:m,className:A,component:f="div",disablePointerEvents:C=!1,disableTypography:a=!1,position:w,variant:c}=I,T=pr(I,st),F=gr()||{};let g=c;c&&F.variant,F&&!g&&(g=F.variant);const d=Pe({},I,{hiddenLabel:F.hiddenLabel,size:F.size,disablePointerEvents:C,position:w,variant:g}),l=ct(d);return he.jsx(fr.Provider,{value:null,children:he.jsx(pt,Pe({as:f,ownerState:d,className:ar(l.root,A),ref:b},T,{children:typeof m=="string"&&!a?he.jsx($,{color:"text.secondary",children:m}):he.jsxs(h.Fragment,{children:[w==="start"?Oe||(Oe=he.jsx("span",{className:"notranslate",children:"â€‹"})):null,m]})}))})});var xe={},qe;function mt(){if(qe)return xe;qe=1;var n=hr();Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=void 0;var N=n(xr()),b=nr();return xe.default=(0,N.default)((0,b.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),xe}var ht=mt();const me=ir(ht),bt=({user:n,allUsers:N,departments:b,designations:I,setUser:m,open:A,closeModal:f})=>{const[C,a]=h.useState({id:n.id,name:n.name||"",gender:n.gender||"",birthday:n.birthday||"",date_of_joining:n.date_of_joining||"",address:n.address||"",employee_id:n.employee_id||"",phone:n.phone||"",email:n.email||"",department:n.department||"",designation:n.designation||"",report_to:n.report_to||""}),[w,c]=h.useState({id:n.id}),[T,F]=h.useState(!1),[g,d]=h.useState({}),[l,S]=h.useState(!1),[p,i]=h.useState(!1),[s,o]=h.useState(null),[x,E]=h.useState(I),[B,L]=h.useState(N),u=ae(),G=y=>{const U=y.target.files[0];if(U){const R=URL.createObjectURL(U);o(R);const V=new Promise(async(P,oe)=>{try{const re=new FormData;if(re.append("id",n.id),U){const Ce=U.type;if(["image/jpeg","image/jpg","image/png"].includes(Ce))re.append("profile_image",U);else{console.error("Invalid file type. Only JPEG and PNG are allowed."),oe("Invalid file type");return}}const fe=await fetch(route("profile.update"),{method:"POST",headers:{"X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:re}),ne=await fe.json();fe.ok?(m(ne.user),S(!1),P([...ne.messages])):(S(!1),d(ne.errors),oe(ne.error||"Failed to update profile image."),console.error(ne.errors))}catch(re){S(!1),console.error(re),oe(re.message||"An unexpected error occurred.")}});M.promise(V,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(ge,{}),e("span",{style:{marginLeft:"8px"},children:"Updating profile image..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}},success:{render({data:P}){return e(z,{children:P.map((oe,re)=>e("div",{children:oe},re))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}},error:{render({data:P}){return e(z,{children:P})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}}})}},_=(y,U)=>{a(R=>{const V={...R,[y]:U};return U===""&&delete V[y],V}),c(R=>{const V={...R,[y]:U};return U===""&&delete V[y],V})};return h.useEffect(()=>{n.department!==C.department&&(C.designation=null,C.report_to=null),E(I.filter(R=>R.department_id===(w.department||C.department))),L(N.filter(R=>R.department===(w.department||C.department)));const y={...w};for(const R in y)R!=="id"&&y[R]===n[R]&&delete y[R];const U=Object.keys(y).length>1;F(U)},[C,w]),r(de,{open:A,onClose:f,children:[r(ce,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e($,{children:"Profile Information"}),e(q,{variant:"outlined",color:"primary",onClick:f,sx:{position:"absolute",top:8,right:16},children:e(ve,{})})]}),r("form",{onSubmit:async y=>{var U;y.preventDefault(),S(!0);try{const R=await axios.post(route("profile.update"),{ruleSet:"profile",...C});R.status===200&&(m(R.data.user),M.success(((U=R.data.messages)==null?void 0:U.length)>0?R.data.messages.join(" "):"Profile information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}}),f())}catch(R){S(!1),R.response?(R.response.status===422?(d(R.response.data.errors||{}),M.error(R.response.data.error||"Failed to update profile information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}})):M.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}}),console.error(R.response.data)):R.request?(M.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}}),console.error(R.request)):(M.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}}),console.error("Error",R.message))}finally{S(!1)}},children:[e(pe,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,display:"flex",alignItems:"center",justifyContent:"center",children:r(ee,{position:"relative",display:"inline-block",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[e(Ee,{alt:w.name||C.name,src:s||n.profile_image,sx:{width:100,height:100}}),p&&e(z,{children:e(ee,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:"rgba(0, 0, 0, 0.5)",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"},children:e(q,{color:"primary",component:"span",children:e($r,{})})})}),e("input",{accept:"image/*",style:{display:"none"},id:"upload-button",type:"file",onChange:G}),e("label",{htmlFor:"upload-button",children:e(ee,{sx:{position:"absolute",width:"100%",height:"100%",top:0,left:0,borderRadius:"50%",cursor:"pointer"}})})]})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Name",fullWidth:!0,value:w.name||C.name||"",onChange:y=>_("name",y.target.value),error:!!g.name,helperText:g.name})}),e(t,{item:!0,xs:12,md:6,children:r(K,{fullWidth:!0,children:[e(Y,{id:"gender-label",children:"Gender"}),r(X,{labelId:"gender-label",value:w.gender||C.gender||"na",onChange:y=>_("gender",y.target.value),error:!!g.gender,label:"Gender",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{disabled:!0,value:"na",children:"Select Gender"}),e(j,{value:"Male",children:"Male"}),e(j,{value:"Female",children:"Female"})]}),e(_e,{children:g.gender})]})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Birth Date",type:"date",fullWidth:!0,value:w.birthday||C.birthday||"",onChange:y=>_("birthday",y.target.value),InputLabelProps:{shrink:!0},error:!!g.birthday,helperText:g.birthday})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Joining Date",type:"date",fullWidth:!0,value:w.date_of_joining||C.date_of_joining||"",onChange:y=>_("date_of_joining",y.target.value),InputLabelProps:{shrink:!0},error:!!g.date_of_joining,helperText:g.date_of_joining})}),e(t,{item:!0,xs:12,children:e(D,{label:"Address",fullWidth:!0,value:w.address||C.address,onChange:y=>_("address",y.target.value),error:!!g.address,helperText:g.address})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Employee ID",fullWidth:!0,value:w.employee_id||C.employee_id||"",onChange:y=>_("employee_id",y.target.value),error:!!g.employee_id,helperText:g.employee_id})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Phone Number",fullWidth:!0,value:w.phone||C.phone,onChange:y=>_("phone",y.target.value),error:!!g.phone,helperText:g.phone})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Email Adress",fullWidth:!0,value:w.email||C.email,onChange:y=>_("email",y.target.value),error:!!g.email,helperText:g.email})}),e(t,{item:!0,xs:12,md:6,children:r(K,{fullWidth:!0,children:[e(Y,{id:"department",children:"Department"}),r(X,{labelId:"department",onChange:y=>_("department",y.target.value),error:!!g.department,id:`department-select-${n.id}`,value:w.department||C.department||"na",label:"Department",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{value:"na",disabled:!0,children:"Select Department"}),b.map(y=>e(j,{value:y.id,children:y.name},y.id))]}),e(_e,{children:g.department})]})}),e(t,{item:!0,xs:12,md:6,children:r(K,{fullWidth:!0,children:[e(Y,{id:"designation",children:"Designation"}),r(X,{labelId:"designation",onChange:y=>_("designation",y.target.value),label:"Designation",error:!!g.designation,id:`designation-select-${n.id}`,value:w.designation||C.designation||"na",disabled:!n.department,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{value:"na",disabled:!0,children:"Select Designation"}),x.map(y=>e(j,{value:y.id,children:y.title},y.id))]}),e(_e,{children:g.designation})]})}),e(t,{item:!0,xs:12,md:6,children:r(K,{fullWidth:!0,children:[e(Y,{id:"report_to",children:"Reports To"}),r(X,{labelId:"report_to",value:w.report_to||C.report_to,onChange:y=>_("report_to",y.target.value),label:"Reports To",error:!!g.report_to,disabled:n.report_to==="na",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{value:"na",children:"--"}),B.map(y=>e(j,{value:y.id,children:y.name},y.id))]}),e(_e,{children:g.report_to})]})})]})}),e(ue,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ie,{disabled:!T,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:l,children:"Submit"})})]})]})},gt=({user:n,setUser:N,open:b,closeModal:I})=>{const[m,A]=h.useState({id:n.id,passport_no:n.passport_no||"",passport_exp_date:n.passport_exp_date||"",nationality:n.nationality||"",religion:n.religion||"",marital_status:n.marital_status||"",employment_of_spouse:n.employment_of_spouse||"",number_of_children:n.number_of_children||"",nid:n.nid||""}),[f,C]=h.useState({id:n.id}),[a,w]=h.useState(!1),[c,T]=h.useState({}),[F,g]=h.useState(!1),d=ae(),l=(p,i)=>{A(s=>{const o={...s,[p]:i};return i===""&&delete o[p],p==="marital_status"&&i==="Single"&&(o.employment_of_spouse="",o.number_of_children=""),o}),C(s=>{const o={...s,[p]:i};return i===""&&delete o[p],p==="marital_status"&&i==="Single"&&(o.employment_of_spouse=null,o.number_of_children=null),o})};return h.useEffect(()=>{for(const i in f)i!=="id"&&f[i]===n[i]&&delete f[i];const p=Object.keys(f).filter(i=>i!=="id").length>0;w(p)},[m,f,n]),r(de,{open:b,onClose:I,children:[r(ce,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e($,{children:"Personal Information"}),e(q,{variant:"outlined",color:"primary",onClick:I,sx:{position:"absolute",top:8,right:16},children:e(ve,{})})]}),r("form",{onSubmit:async p=>{var i;p.preventDefault(),g(!0);try{const s=await axios.post(route("profile.update"),{ruleSet:"personal",...m});s.status===200&&(N(s.data.user),M.success(((i=s.data.messages)==null?void 0:i.length)>0?s.data.messages.join(" "):"Personal information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),I())}catch(s){g(!1),s.response?(s.response.status===422?(T(s.response.data.errors||{}),M.error(s.response.data.error||"Failed to update personal information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}})):M.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error(s.response.data)):s.request?(M.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error(s.request)):(M.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error("Error",s.message))}finally{g(!1)}},children:[e(pe,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Passport No",fullWidth:!0,value:f.passport_no||m.passport_no||"",onChange:p=>l("passport_no",p.target.value),error:!!c.passport_no,helperText:c.passport_no})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Passport Expiry Date",fullWidth:!0,type:"date",value:f.passport_exp_date||m.passport_exp_date||"",onChange:p=>l("passport_exp_date",p.target.value),InputLabelProps:{shrink:!0},error:!!c.passport_exp_date,helperText:c.passport_exp_date})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"NID No",fullWidth:!0,value:f.nid||m.nid||"",onChange:p=>l("nid",p.target.value),error:!!c.nid,helperText:c.nid})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Nationality",fullWidth:!0,value:f.nationality||m.nationality||"",onChange:p=>l("nationality",p.target.value),error:!!c.nationality,helperText:c.nationality})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Religion",fullWidth:!0,value:f.religion||m.religion||"",onChange:p=>l("religion",p.target.value),error:!!c.religion,helperText:c.religion})}),e(t,{item:!0,xs:12,md:6,children:r(K,{fullWidth:!0,children:[e(Y,{id:"marital-status-label",children:"Marital status"}),r(X,{labelId:"marital-status-label",value:f.marital_status||m.marital_status||"na",onChange:p=>l("marital_status",p.target.value),label:"Marital status",error:!!c.marital_status,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{value:"na",children:"-"}),e(j,{value:"Single",children:"Single"}),e(j,{value:"Married",children:"Married"})]}),e(_e,{children:c.marital_status})]})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Employment of spouse",fullWidth:!0,value:f.marital_status==="Single"?"":f.employment_of_spouse||m.employment_of_spouse,onChange:p=>l("employment_of_spouse",p.target.value),error:!!c.employment_of_spouse,helperText:c.employment_of_spouse,disabled:f.marital_status==="Single"||m.marital_status==="Single"})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"No. of children",fullWidth:!0,type:"number",value:f.marital_status==="Single"?"":f.number_of_children||m.number_of_children,onChange:p=>l("number_of_children",p.target.value),error:!!c.number_of_children,helperText:c.number_of_children,disabled:f.marital_status==="Single"||m.marital_status==="Single"})})]})}),e(ue,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ie,{disabled:!a,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:F,children:"Submit"})})]})]})},ft=({user:n,setUser:N,open:b,closeModal:I})=>{const[m,A]=h.useState({id:n.id,emergency_contact_primary_name:n.emergency_contact_primary_name||"",emergency_contact_primary_relationship:n.emergency_contact_primary_relationship||"",emergency_contact_primary_phone:n.emergency_contact_primary_phone||"",emergency_contact_secondary_name:n.emergency_contact_secondary_name||"",emergency_contact_secondary_relationship:n.emergency_contact_secondary_relationship||"",emergency_contact_secondary_phone:n.emergency_contact_secondary_phone||""}),[f,C]=h.useState({id:n.id}),[a,w]=h.useState(!1),[c,T]=h.useState({}),[F,g]=h.useState(!1),d=ae(),l=(p,i)=>{A(s=>{const o={...s,[p]:i};return i===""&&delete o[p],o}),C(s=>{const o={...s,[p]:i};return i===""&&delete o[p],o})};return h.useEffect(()=>{for(const i in f)i!=="id"&&f[i]===n[i]&&delete f[i];const p=Object.keys(f).filter(i=>i!=="id").length>0;w(p)},[m,f,n]),r(de,{open:b,onClose:I,children:[r(ce,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e($,{children:"Personal Information"}),e(q,{variant:"outlined",color:"primary",onClick:I,sx:{position:"absolute",top:8,right:16},children:e(ve,{})})]}),r("form",{onSubmit:async p=>{var i;p.preventDefault(),g(!0);try{const s=await axios.post(route("profile.update"),{ruleSet:"emergency",...m});s.status===200&&(N(s.data.user),M.success(((i=s.data.messages)==null?void 0:i.length)>0?s.data.messages.join(" "):"Emergency contact updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),I())}catch(s){g(!1),s.response?(s.response.status===422?(T(s.response.data.errors||{}),M.error(s.response.data.error||"Failed to update emergency contact.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}})):M.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error(s.response.data)):s.request?(M.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error(s.request)):(M.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error("Error",s.message))}finally{g(!1)}},children:[e(pe,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,children:e(H,{children:r(Z,{children:[e($,{variant:"h5",gutterBottom:!0,children:"Primary Contact"}),r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Name",required:!0,fullWidth:!0,value:f.emergency_contact_primary_name||m.emergency_contact_primary_name||"",onChange:p=>l("emergency_contact_primary_name",p.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Relationship",required:!0,fullWidth:!0,value:f.emergency_contact_primary_relationship||m.emergency_contact_primary_relationship||"",onChange:p=>l("emergency_contact_primary_relationship",p.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Phone",required:!0,fullWidth:!0,value:f.emergency_contact_primary_phone||m.emergency_contact_primary_phone||"",onChange:p=>l("emergency_contact_primary_phone",p.target.value),error:!!c.bank_name,helperText:c.bank_name})})]})]})})}),e(t,{item:!0,xs:12,children:e(H,{children:r(Z,{children:[e($,{variant:"h5",gutterBottom:!0,children:"Secondary Contact"}),r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Name",fullWidth:!0,value:f.emergency_contact_secondary_name||m.emergency_contact_secondary_name||"",onChange:p=>l("emergency_contact_secondary_name",p.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Relationship",fullWidth:!0,value:f.emergency_contact_secondary_relationship||m.emergency_contact_secondary_relationship||"",onChange:p=>l("emergency_contact_secondary_relationship",p.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Phone",fullWidth:!0,value:f.emergency_contact_secondary_phone||m.emergency_contact_secondary_phone||"",onChange:p=>l("emergency_contact_secondary_phone",p.target.value),error:!!c.bank_name,helperText:c.bank_name})})]})]})})})]})}),e(ue,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ie,{disabled:!a,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:F,children:"Submit"})})]})]})},xt=({user:n,setUser:N,open:b,closeModal:I})=>{const[m,A]=h.useState({id:n.id,bank_name:n.bank_name||"",bank_account_no:n.bank_account_no||"",ifsc_code:n.ifsc_code||"",pan_no:n.pan_no||""}),[f,C]=h.useState({id:n.id}),[a,w]=h.useState(!1),[c,T]=h.useState({}),[F,g]=h.useState(!1),d=ae(),l=(p,i)=>{A(s=>{const o={...s,[p]:i};return i===""&&delete o[p],o}),C(s=>{const o={...s,[p]:i};return i===""&&delete o[p],o})};return h.useEffect(()=>{for(const i in f)i!=="id"&&f[i]===n[i]&&delete f[i];const p=Object.keys(f).filter(i=>i!=="id").length>0;w(p)},[m,f,n]),r(de,{open:b,onClose:I,children:[r(ce,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e($,{children:"Bank Information"}),e(q,{variant:"outlined",color:"primary",onClick:I,sx:{position:"absolute",top:8,right:16},children:e(ve,{})})]}),r("form",{onSubmit:async p=>{var i;p.preventDefault(),g(!0);try{const s=await axios.post(route("profile.update"),{ruleSet:"bank",...m});s.status===200&&(N(s.data.user),T({}),M.success(((i=s.data.messages)==null?void 0:i.length)>0?s.data.messages.join(" "):"Bank information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),I())}catch(s){g(!1),s.response?(s.response.status===422?(T(s.response.data.errors||{}),M.error(s.response.data.error||"Failed to update bank information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}})):M.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error(s.response.data)):s.request?(M.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error(s.request)):(M.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error("Error",s.message))}finally{g(!1)}},children:[e(pe,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,children:e(D,{label:"Bank Name",fullWidth:!0,value:f.bank_name||m.bank_name||"",onChange:p=>l("bank_name",p.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,children:e(D,{size:"small",label:"Bank Account No.",fullWidth:!0,value:f.bank_account_no||m.bank_account_no||"",onChange:p=>l("bank_account_no",p.target.value),error:!!c.bank_account_no,helperText:c.bank_account_no})}),e(t,{item:!0,xs:12,children:e(D,{label:"IFSC Code",fullWidth:!0,value:f.ifsc_code||m.ifsc_code||"",onChange:p=>l("ifsc_code",p.target.value),error:!!c.ifsc_code,helperText:c.ifsc_code})}),e(t,{item:!0,xs:12,children:e(D,{label:"PAN No.",fullWidth:!0,value:f.pan_no||m.pan_no||"",onChange:p=>l("pan_no",p.target.value),error:!!c.pan_no,helperText:c.pan_no})})]})}),e(ue,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ie,{disabled:!a,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:F,children:"Submit"})})]})]})},_t=({user:n,open:N,closeModal:b,handleDelete:I,setUser:m})=>{const[A,f]=h.useState({id:n.id,family_member_name:n.family_member_name||"",family_member_relationship:n.family_member_relationship||"",family_member_dob:n.family_member_dob||"",family_member_phone:n.family_member_phone||""}),[C,a]=h.useState({id:n.id}),[w,c]=h.useState(!1),[T,F]=h.useState({}),[g,d]=h.useState(!1),l=ae(),S=(i,s)=>{f(o=>{const x={...o,[i]:s};return s===""&&delete x[i],x}),a(o=>{const x={...o,[i]:s};return s===""&&delete x[i],x})};return h.useEffect(()=>{for(const s in C)s!=="id"&&C[s]===n[s]&&delete C[s];const i=Object.keys(C).filter(s=>s!=="id").length>0;c(i)},[A,C,n]),r(de,{open:N,onClose:b,children:[r(ce,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e($,{children:"Family Member"}),e(q,{variant:"outlined",color:"primary",onClick:b,sx:{position:"absolute",top:8,right:16},children:e(ve,{})})]}),r("form",{onSubmit:async i=>{var s;i.preventDefault(),d(!0);try{const o=await axios.post(route("profile.update"),{ruleSet:"family",...A});o.status===200&&(m(o.data.user),M.success(((s=o.data.messages)==null?void 0:s.length)>0?o.data.messages.join(" "):"Family information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:l.glassCard.background,border:l.glassCard.border,color:l.palette.text.primary}}),b())}catch(o){d(!1),o.response?(o.response.status===422?(F(o.response.data.errors||{}),M.error(o.response.data.error||"Failed to update family information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:l.glassCard.background,border:l.glassCard.border,color:l.palette.text.primary}})):M.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:l.glassCard.background,border:l.glassCard.border,color:l.palette.text.primary}}),console.error(o.response.data)):o.request?(M.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:l.glassCard.background,border:l.glassCard.border,color:l.palette.text.primary}}),console.error(o.request)):(M.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:l.glassCard.background,border:l.glassCard.border,color:l.palette.text.primary}}),console.error("Error",o.message))}finally{d(!1)}},children:[e(pe,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Name",fullWidth:!0,value:C.family_member_name||A.family_member_name||"",onChange:i=>S("family_member_name",i.target.value),error:!!T.family_member_name,helperText:T.family_member_name})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Relationship",fullWidth:!0,value:C.family_member_relationship||A.family_member_relationship||"",onChange:i=>S("family_member_relationship",i.target.value),error:!!T.family_member_relationship,helperText:T.family_member_relationship})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Date of Birth",fullWidth:!0,type:"date",value:C.family_member_dob||A.family_member_dob||"",onChange:i=>S("family_member_dob",i.target.value),InputLabelProps:{shrink:!0},error:!!T.family_member_dob,helperText:T.family_member_dob})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Phone",fullWidth:!0,value:C.family_member_phone||A.family_member_phone||"",onChange:i=>S("family_member_phone",i.target.value),error:!!T.family_member_phone,helperText:T.family_member_phone})})]})}),e(ue,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ie,{disabled:!w,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:g,children:"Submit"})})]})]})},yt=({user:n,open:N,closeModal:b,setUser:I})=>{const[m,A]=h.useState({id:n.id}),[f,C]=h.useState(!1),[a,w]=h.useState(n.educations&&n.educations.length>0?n.educations:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),[c,T]=h.useState({}),[F,g]=h.useState(!1),d=ae(),l=(s,o,x)=>{const E=[...a];E[s]={...E[s],[o]:x},w(E);const B=E.filter((u,G)=>{const _=n.educations[G]||{},J=!_.id||u.institution!==_.institution||u.subject!==_.subject||u.degree!==_.degree||u.starting_date!==_.starting_date||u.complete_date!==_.complete_date||u.grade!==_.grade,y=_.id&&u.institution===_.institution&&u.subject===_.subject&&u.degree===_.degree&&u.starting_date===_.starting_date&&u.complete_date===_.complete_date&&u.grade===_.grade;return J&&!y});A(u=>({...u,educations:[...B]}));const L=B.length>0;C(L)},S=async s=>{const o=a[s],x=a.filter((E,B)=>B!==s);if(w(x.length>0?x:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),o.id){const E=new Promise(async(B,L)=>{try{const u=await fetch("/education/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:o.id,user_id:n.id})}),G=await u.json();u.ok?(A(_=>({..._,educations:G.educations})),I(_=>({..._,educations:G.educations})),B(G.message||"Education record deleted successfully.")):(T(G.errors),console.error(G.errors),L(G.error||"Failed to delete education record."))}catch(u){L(u)}});M.promise(E,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(ge,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting education record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},success:{render({data:B}){return e(z,{children:B})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},error:{render({data:B}){return e(z,{children:B})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}})}},p=async s=>{s.preventDefault(),g(!0);const o=new Promise(async(x,E)=>{try{const B=await fetch("/education/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({educations:a.map(u=>({...u,user_id:n.id}))})}),L=await B.json();B.ok?(I(u=>({...u,educations:L.educations})),g(!1),b(),x([...L.messages])):(g(!1),T(L.errors),console.error(L.errors),E(L.error||"Failed to update education records."))}catch(B){g(!1),E(B.message||"An unexpected error occurred while updating education records.")}});M.promise(o,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(ge,{}),e("span",{style:{marginLeft:"8px"},children:"Updating education records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},success:{render({data:x}){return e(z,{children:x.map((E,B)=>e("div",{children:E},B))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},error:{render({data:x}){return e(z,{children:x})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}})},i=async()=>{w([...a,{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}])};return r(de,{open:N,onClose:b,maxWidth:"md",fullWidth:!0,children:[r(ce,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e($,{children:"Education Information"}),e(q,{onClick:b,sx:{position:"absolute",top:8,right:16},children:e(we,{})})]}),r("form",{onSubmit:p,children:[e(pe,{children:r(ee,{children:[e(t,{container:!0,spacing:2,children:a.map((s,o)=>e(t,{item:!0,xs:12,children:e(H,{children:r(Z,{children:[r($,{variant:"h6",gutterBottom:!0,children:["Education #"+(o+1),e(q,{onClick:()=>S(o),sx:{position:"absolute",top:8,right:16},children:e(we,{})})]}),r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Institution",fullWidth:!0,value:s.institution||"",onChange:x=>l(o,"institution",x.target.value),error:!!c[`educations.${o}.institution`],helperText:c[`educations.${o}.institution`]?c[`educations.${o}.institution`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Degree",fullWidth:!0,value:s.degree||"",onChange:x=>l(o,"degree",x.target.value),error:!!c[`educations.${o}.degree`],helperText:c[`educations.${o}.degree`]?c[`educations.${o}.degree`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Subject",fullWidth:!0,value:s.subject||"",onChange:x=>l(o,"subject",x.target.value),error:!!c[`educations.${o}.subject`],helperText:c[`educations.${o}.subject`]?c[`educations.${o}.subject`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Started in",type:"month",fullWidth:!0,InputLabelProps:{shrink:!0},value:s.starting_date||"",onChange:x=>l(o,"starting_date",x.target.value),error:!!c[`educations.${o}.starting_date`],helperText:c[`educations.${o}.starting_date`]?c[`educations.${o}.starting_date`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Completed in",type:"month",fullWidth:!0,InputLabelProps:{shrink:!0},value:s.complete_date||"",onChange:x=>l(o,"complete_date",x.target.value),error:!!c[`educations.${o}.complete_date`],helperText:c[`educations.${o}.complete_date`]?c[`educations.${o}.complete_date`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Grade",fullWidth:!0,value:s.grade||"",onChange:x=>l(o,"grade",x.target.value),error:!!c[`educations.${o}.grade`],helperText:c[`educations.${o}.grade`]?c[`educations.${o}.grade`][0]:""})})]})]})})},o))}),e(ee,{mt:2,children:r(He,{size:"small",color:"error",sx:{mt:2},onClick:i,children:[e(Ke,{})," Add More"]})})]})}),e(ue,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ie,{disabled:!f,sx:{borderRadius:"50px",padding:"6px 16px"},size:"large",variant:"outlined",color:"primary",type:"submit",loading:F,children:"Submit"})})]})]})},vt=({user:n,open:N,closeModal:b,setUser:I})=>{const[m,A]=h.useState({id:n.id}),[f,C]=h.useState(!1),[a,w]=h.useState(n.experiences.length>0?n.experiences:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),[c,T]=h.useState({}),[F,g]=h.useState(!1),d=ae(),l=(s,o,x)=>{const E=[...a];E[s]={...E[s],[o]:x},w(E);const B=E.filter((u,G)=>{const _=n.experiences[G]||{},J=!_.id||u.company_name!==_.company_name||u.location!==_.location||u.job_position!==_.job_position||u.period_from!==_.period_from||u.period_to!==_.period_to||u.description!==_.description,y=_.id&&u.company_name===_.company_name&&u.location===_.location&&u.job_position===_.job_position&&u.period_from===_.period_from&&u.period_to===_.period_to&&u.description===_.description;return J&&!y});A(u=>({...u,experiences:[...B]}));const L=B.length>0;C(L)},S=async s=>{const o=a[s],x=a.filter((E,B)=>B!==s);if(w(x.length>0?x:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),o.id){const E=new Promise(async(B,L)=>{try{const u=await fetch("/experience/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:o.id,user_id:n.id})}),G=await u.json();u.ok?(A(_=>({..._,experiences:G.experiences})),I(_=>({..._,experiences:G.experiences})),B(G.message||"Experience record deleted successfully."),b()):(T([...G.errors]),L(G.error||"Failed to delete experience record."))}catch(u){L(u)}});M.promise(E,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(ge,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting experience record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},success:{render({data:B}){return e(z,{children:B})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},error:{render({data:B}){return e(z,{children:B})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}})}},p=async s=>{s.preventDefault(),g(!0);const o=new Promise(async(x,E)=>{try{const B=await fetch("/experience/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({experiences:a.map(u=>({...u,user_id:n.id}))})}),L=await B.json();B.ok?(I(u=>({...u,experiences:L.experiences})),g(!1),b(),x([...L.messages])):(g(!1),T(L.errors),console.error(L.errors),E(L.error||"Failed to update experience records."))}catch(B){g(!1),E(B.message||"An unexpected error occurred while updating experience records.")}});M.promise(o,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(ge,{}),e("span",{style:{marginLeft:"8px"},children:"Updating experience records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},success:{render({data:x}){return e(z,{children:x.map((E,B)=>e("div",{children:E},B))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},error:{render({data:x}){return e(z,{children:x})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}})},i=async()=>{w([...a,{company:"",role:"",start_date:"",end_date:"",responsibilities:""}])};return r(de,{open:N,onClose:b,maxWidth:"md",fullWidth:!0,children:[r(ce,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e($,{children:"Experience Information"}),e(q,{onClick:b,sx:{position:"absolute",top:8,right:16},children:e(we,{})})]}),r("form",{onSubmit:p,children:[e(pe,{children:r(ee,{children:[e(t,{container:!0,spacing:2,children:a.map((s,o)=>e(t,{item:!0,xs:12,children:e(H,{children:r(Z,{children:[r($,{variant:"h6",gutterBottom:!0,children:["Experience #"+(o+1),e(q,{onClick:()=>S(o),sx:{position:"absolute",top:8,right:16},children:e(we,{})})]}),r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Company",fullWidth:!0,value:s.company_name||"",onChange:x=>l(o,"company_name",x.target.value),error:!!c[`experiences.${o}.company_name`],helperText:c[`experiences.${o}.company_name`]?c[`experiences.${o}.company_name`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Location",fullWidth:!0,value:s.location||"",onChange:x=>l(o,"location",x.target.value),error:!!c[`experiences.${o}.location`],helperText:c[`experiences.${o}.location`]?c[`experiences.${o}.location`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Role",fullWidth:!0,value:s.job_position||"",onChange:x=>l(o,"job_position",x.target.value),error:!!c[`experiences.${o}.job_position`],helperText:c[`experiences.${o}.job_position`]?c[`experiences.${o}.job_position`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Started From",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:s.period_from||"",onChange:x=>l(o,"period_from",x.target.value),error:!!c[`experiences.${o}.period_from`],helperText:c[`experiences.${o}.period_from`]?c[`experiences.${o}.period_from`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(D,{label:"Ended On",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:s.period_to||"",onChange:x=>l(o,"period_to",x.target.value),error:!!c[`experiences.${o}.period_to`],helperText:c[`experiences.${o}.period_to`]?c[`experiences.${o}.period_to`][0]:""})}),e(t,{item:!0,xs:12,children:e(D,{label:"Responsibilities",fullWidth:!0,multiline:!0,rows:3,value:s.description||"",onChange:x=>l(o,"description",x.target.value),error:!!c[`experiences.${o}.description`],helperText:c[`experiences.${o}.description`]?c[`experiences.${o}.description`][0]:""})})]})]})})},o))}),r(He,{size:"small",color:"error",sx:{mt:2},onClick:i,children:[e(Ke,{})," Add More"]})]})}),e(ue,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ie,{disabled:!f,sx:{borderRadius:"50px",padding:"6px 16px"},size:"large",variant:"outlined",color:"primary",type:"submit",loading:F,children:"Submit"})})]})]})},Ct=({user:n,setUser:N})=>{const[b,I]=h.useState({id:n.id,salary_basis:n.salary_basis||"",salary_amount:n.salary_amount||"",payment_type:n.payment_type||"",pf_contribution:n.pf_contribution??!1,pf_no:n.pf_no||"",employee_pf_rate:n.employee_pf_rate||0,additional_pf_rate:n.additional_pf_rate||0,total_pf_rate:n.total_pf_rate||0,esi_contribution:n.esi_contribution??!1,esi_no:n.esi_no||"",employee_esi_rate:n.employee_esi_rate||0,additional_esi_rate:n.additional_esi_rate||0,total_esi_rate:n.total_esi_rate||0}),[m,A]=h.useState({id:n.id}),[f,C]=h.useState(!1),[a,w]=h.useState({}),[c,T]=h.useState(!1),F=ae(),g=(l,S)=>{I(p=>{const i={...p,[l]:S};return S===""&&delete i[l],l==="pf_contribution"&&S===0?(i.pf_no="",i.employee_pf_rate=0,i.additional_pf_rate=0,i.total_pf_rate=0):(l==="employee_pf_rate"||l==="additional_pf_rate")&&(i.total_pf_rate=i.employee_pf_rate+i.additional_pf_rate),l==="esi_contribution"&&S===0?(i.esi_no="",i.employee_esi_rate=0,i.additional_esi_rate=0,i.total_esi_rate=0):(l==="employee_esi_rate"||l==="additional_esi_rate")&&(i.total_esi_rate=i.employee_esi_rate+i.additional_esi_rate),i}),A(p=>{const i={...p,[l]:S};return S===""&&delete i[l],l==="pf_contribution"&&S===0?(i.pf_no="",i.employee_pf_rate=0,i.additional_pf_rate=0,i.total_pf_rate=0):(l==="employee_pf_rate"||l==="additional_pf_rate")&&(i.total_pf_rate=i.employee_pf_rate+i.additional_pf_rate),l==="esi_contribution"&&S===0?(i.esi_no="",i.employee_esi_rate=0,i.additional_esi_rate=0,i.total_esi_rate=0):(l==="employee_esi_rate"||l==="additional_esi_rate")&&(i.total_esi_rate=i.employee_esi_rate+i.additional_esi_rate),i})};return h.useEffect(()=>{for(const S in m)S!=="id"&&m[S]===n[S]&&delete m[S];const l=Object.keys(m).filter(S=>S!=="id").length>0;C(l)},[b,m,n]),e(t,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:e(t,{item:!0,xs:12,md:12,sx:{display:"flex",flexDirection:"column"},children:r(H,{children:[e(se,{title:"Salary & Statutory Information"}),r("form",{onSubmit:async l=>{var S,p,i;l.preventDefault(),T(!0);try{const s=await axios.post(route("profile.update"),{ruleSet:"salary",...b});s.status===200?(N(s.data.user),T(!1),M.success(((S=s.data.messages)==null?void 0:S.length)>0?s.data.messages.join(" "):"Salary information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,color:F.palette.text.primary}})):(T(!1),w(s.data.errors),M.error(s.data.error||"Failed to update salary information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,color:F.palette.text.primary}}))}catch(s){T(!1),M.error(((i=(p=s.response)==null?void 0:p.data)==null?void 0:i.message)||"An unexpected error occurred.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,color:F.palette.text.primary}}),console.error(s)}},children:[r(Z,{children:[e($,{sx:{fontWeight:"bold",m:2},children:"Salary Information"}),r(t,{container:!0,spacing:3,children:[e(t,{item:!0,xs:12,md:4,children:r(K,{fullWidth:!0,children:[e(Y,{id:"salary-basis-label",children:"Salary basis"}),r(X,{labelId:"salary-basis-label",value:m.salary_basis||b.salary_basis||"na",onChange:l=>g("salary_basis",l.target.value),error:!!a.salary_basis,helperText:a.salary_basis,label:"Salary basis",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{value:"na",disabled:!0,children:"Select salary basis type"}),e(j,{value:"Hourly",children:"Hourly"}),e(j,{value:"Daily",children:"Daily"}),e(j,{value:"Weekly",children:"Weekly"}),e(j,{value:"Monthly",children:"Monthly"})]})]})}),e(t,{item:!0,xs:12,md:4,children:e(D,{label:"Salary amount",type:"number",fullWidth:!0,placeholder:"Type your salary amount",value:m.salary_amount||b.salary_amount||"",onChange:l=>g("salary_amount",l.target.value),InputProps:{startAdornment:e(ut,{position:"start",children:"$"})},error:!!a.salary_amount,helperText:a.salary_amount})}),e(t,{item:!0,xs:12,md:4,children:r(K,{fullWidth:!0,children:[e(Y,{id:"payment-type-label",children:"Payment type"}),r(X,{labelId:"payment-type-label",label:"Payment type",id:`gender-select-${n.id}`,value:m.payment_type||b.payment_type||"na",onChange:l=>g("payment_type",l.target.value),error:!!a.payment_type,helperText:a.payment_type,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{value:"na",disabled:!0,children:"Select payment type"}),e(j,{value:"Bank transfer",children:"Bank transfer"}),e(j,{value:"Check",children:"Check"}),e(j,{value:"Cash",children:"Cash"})]})]})})]}),e(be,{sx:{my:3}}),e($,{sx:{fontWeight:"bold",m:2},children:"PF Information"}),r(t,{container:!0,spacing:3,children:[e(t,{item:!0,xs:12,md:4,children:r(K,{fullWidth:!0,children:[e(Y,{id:"pf-contribution-label",children:"PF contribution"}),r(X,{labelId:"pf-contribution-label",label:"PF contribution",id:`gender-select-${n.id}`,value:m.pf_contribution!==void 0?m.pf_contribution:b.pf_contribution!==void 0?b.pf_contribution:"na",onChange:l=>g("pf_contribution",l.target.value),error:!!a.pf_contribution,helperText:a.pf_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{value:"na",disabled:!0,children:"Select PF contribution"}),e(j,{value:1,children:"Yes"}),e(j,{value:0,children:"No"})]})]})}),e(t,{item:!0,xs:12,md:4,children:e(D,{disabled:!(m.pf_contribution||b.pf_contribution),InputLabelProps:{shrink:!0},label:"PF No.",fullWidth:!0,type:"text",placeholder:"Enter PF No.",value:m.pf_no||b.pf_no,onChange:l=>g("pf_no",l.target.value),error:!!a.pf_no,helperText:a.pf_no})}),e(t,{item:!0,xs:12,md:4,children:r(K,{fullWidth:!0,children:[e(Y,{id:"employee-pf-rate-label",children:"Employee PF rate"}),r(X,{disabled:!(m.pf_contribution||b.pf_contribution),labelId:"employee-pf-rate-label",label:"Employee PF rate",value:m.employee_pf_rate||b.employee_pf_rate||"na",onChange:l=>g("employee_pf_rate",l.target.value),error:!!a.employee_pf_rate,helperText:a.employee_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{value:"na",disabled:!0,children:"Select pf rate"}),[...Array(11).keys()].map(l=>r(j,{value:l,children:[l,"%"]},l))]})]})}),e(t,{item:!0,xs:12,md:4,children:r(K,{fullWidth:!0,children:[e(Y,{id:"additional-rate-label",children:"Additional rate"}),r(X,{disabled:!(m.pf_contribution||b.pf_contribution),labelId:"additional-rate-label",label:"Additional rate",id:`gender-select-${n.id}`,value:m.additional_pf_rate||b.additional_pf_rate||"na",onChange:l=>g("additional_pf_rate",l.target.value),error:!!a.additional_pf_rate,helperText:a.additional_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(l=>r(j,{value:l,children:[l,"%"]},l))]})]})}),e(t,{item:!0,xs:12,md:4,children:e(D,{disabled:!(m.pf_contribution||b.pf_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:m.total_pf_rate||b.total_pf_rate?`${m.total_pf_rate||b.total_pf_rate}%`:"",InputProps:{readOnly:!0},error:!!a.total_pf_rate,helperText:a.total_pf_rate})})]}),e(be,{sx:{my:3}}),e($,{sx:{fontWeight:"bold",m:2},children:"ESI Information"}),r(t,{container:!0,spacing:3,children:[e(t,{item:!0,xs:12,md:4,children:r(K,{fullWidth:!0,children:[e(Y,{id:"esi-contribution-label",children:"ESI contribution"}),r(X,{labelId:"esi-contribution-label",label:"ESI contribution",value:m.esi_contribution!==void 0?m.esi_contribution:b.esi_contribution!==void 0?b.esi_contribution:"na",onChange:l=>g("esi_contribution",l.target.value),error:!!a.esi_contribution,helperText:a.esi_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{value:"na",disabled:!0,children:"Select ESI contribution"}),e(j,{value:1,children:"Yes"}),e(j,{value:0,children:"No"})]})]})}),e(t,{item:!0,xs:12,md:4,children:e(D,{disabled:!(m.esi_contribution||b.esi_contribution),InputLabelProps:{shrink:!0},label:"ESI No.",fullWidth:!0,type:"text",placeholder:"Enter ESI No.",value:m.esi_no||b.esi_no,onChange:l=>g("esi_no",l.target.value),error:!!a.esi_no,helperText:a.esi_no})}),e(t,{item:!0,xs:12,md:4,children:r(K,{fullWidth:!0,children:[e(Y,{id:"esi-contribution-label",children:"Employee ESI rate"}),r(X,{disabled:!(m.esi_contribution||b.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:m.employee_esi_rate||b.employee_esi_rate||"na",onChange:l=>g("employee_esi_rate",l.target.value),error:!!a.employee_esi_rate,helperText:a.employee_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{value:"na",disabled:!0,children:"Select esi rate"}),[...Array(11).keys()].map(l=>r(j,{value:l,children:[l,"%"]},l))]})]})}),e(t,{item:!0,xs:12,md:4,children:r(K,{fullWidth:!0,children:[e(Y,{id:"esi-contribution-label",children:"Additional rate"}),r(X,{disabled:!(m.esi_contribution||b.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:m.additional_esi_rate||b.additional_esi_rate||"na",onChange:l=>g("additional_esi_rate",l.target.value),error:!!a.additional_esi_rate,helperText:a.additional_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(j,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(l=>r(j,{value:l,children:[l,"%"]},l))]})]})}),e(t,{item:!0,xs:12,md:4,children:e(D,{disabled:!(m.esi_contribution||b.esi_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:m.total_esi_rate||b.total_esi_rate?`${m.total_esi_rate||b.total_esi_rate}%`:"",InputProps:{readOnly:!0},error:!!a.total_esi_rate,helperText:a.total_esi_rate})})]})]}),e(Lr,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ie,{disabled:!f,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:c,children:"Submit"})})]})]})})})},kt=({project:n,isSelected:N=!1,onSelect:b,canView:I,getStatusColor:m,getStatusIcon:A,getPriorityColor:f,getHealthColor:C,getRiskColor:a,onQuickAction:w,formatCurrency:c,formatDate:T,userRole:F,className:g=""})=>{var _,J,y,U,R,V;const d=()=>!n.total_tasks||n.total_tasks===0?n.progress||0:Math.round(n.completed_tasks/n.total_tasks*100),l=P=>{switch(P){case"good":return e(De,{className:"w-4 h-4 text-success"});case"at_risk":return e(Ne,{className:"w-4 h-4 text-warning"});case"critical":return e(wr,{className:"w-4 h-4 text-danger"});default:return e(Xe,{className:"w-4 h-4 text-default-400"})}},S=P=>{switch(P==null?void 0:P.toLowerCase()){case"agile":case"scrum":return e(Fr,{className:"w-4 h-4"});case"waterfall":return e(Me,{className:"w-4 h-4"});case"prince2":return e(zr,{className:"w-4 h-4"});case"kanban":return e(ot,{className:"w-4 h-4"});default:return e(Nr,{className:"w-4 h-4"})}},p=()=>!n.budget_allocated||n.budget_allocated===0?0:n.budget_spent/n.budget_allocated*100,i=P=>P>=.95?"success":P>=.85?"warning":"danger",s=P=>P>=.95?"success":P>=.85?"warning":"danger",o=d(),x=p(),E=n.health_status||"unknown",B=n.spi||1,L=n.cpi||1,G=(()=>{const P=[];return I("view")&&P.push({key:"view",label:"View",icon:e(Jr,{className:"w-4 h-4"}),color:"primary"}),I("edit")&&P.push({key:"edit",label:"Edit",icon:e(Hr,{className:"w-4 h-4"}),color:"default"}),I("view")&&P.push({key:"tasks",label:"Tasks",icon:e(Me,{className:"w-4 h-4"}),color:"default"}),I("reports")&&P.push({key:"reports",label:"Reports",icon:e(Pr,{className:"w-4 h-4"}),color:"default"}),I("clone")&&P.push({key:"clone",label:"Clone",icon:e(Ir,{className:"w-4 h-4"}),color:"default"}),I("archive")&&P.push({key:"archive",label:"Archive",icon:e(Er,{className:"w-4 h-4"}),color:"warning"}),I("delete")&&P.push({key:"delete",label:"Delete",icon:e(Kr,{className:"w-4 h-4"}),color:"danger"}),P})();return r(or,{className:`h-full transition-all duration-200 hover:shadow-lg ${N?"ring-2 ring-primary-500 bg-primary-50/50":""} ${g}`,children:[e(qr,{className:"pb-3",children:r("div",{className:"flex items-start justify-between w-full",children:[r("div",{className:"flex items-start space-x-3",children:[e(Wr,{isSelected:N,onValueChange:b,size:"sm",className:"mt-1"}),r("div",{className:"flex-1 min-w-0",children:[r("div",{className:"flex items-center space-x-2 mb-2",children:[r("div",{className:"flex items-center space-x-2",children:[e("span",{className:"text-lg",children:n.type==="digital"?"ðŸ¢":n.type==="enhancement"?"ðŸš€":n.type==="analytics"?"ðŸ“Š":n.type==="integration"?"ðŸŒ":n.type==="security"?"ðŸ”’":n.type==="marketing"?"ðŸŽ¨":"ðŸ“‹"}),e("h3",{className:"font-semibold text-lg truncate",children:n.project_name})]}),l(E)]}),r("div",{className:"flex items-center space-x-2 text-sm text-default-500 mb-2",children:[r("span",{className:"font-mono",children:["ID: ",n.project_code]}),e("span",{children:"â€¢"}),r(te,{size:"sm",color:f(n.priority),variant:"flat",startContent:e(nt,{className:"w-3 h-3"}),children:[((_=n.priority)==null?void 0:_.charAt(0).toUpperCase())+((J=n.priority)==null?void 0:J.slice(1))," Priority"]})]})]})]}),r(_r,{children:[e(yr,{children:e(ye,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-default-600",children:e(jr,{className:"w-4 h-4"})})}),e(vr,{"aria-label":"Project actions",onAction:P=>w(P,n),children:G.map(P=>e(Cr,{startContent:P.icon,color:P.color,children:P.label},P.key))})]})]})}),e(ze,{className:"pt-0 pb-3",children:r("div",{className:"space-y-3",children:[r("div",{className:"space-y-2",children:[r("div",{className:"flex items-center justify-between",children:[r(te,{size:"sm",color:m(n.status),variant:"flat",startContent:A(n.status),children:["Status: ",(y=n.status)==null?void 0:y.replace("_"," ")]}),e("span",{className:"text-sm text-default-500",children:n.phase&&`(${n.phase})`})]}),r("div",{className:"space-y-1",children:[r("div",{className:"flex items-center justify-between text-sm",children:[e("span",{children:"Progress"}),r("span",{className:"font-medium",children:[o,"%"]})]}),e(Yr,{value:o,color:o>=75?"success":o>=50?"warning":"danger",size:"sm",className:"w-full"})]})]}),r("div",{className:"flex items-center space-x-2 text-sm",children:[e(kr,{className:"w-4 h-4 text-default-400"}),r("span",{className:"text-default-600",children:["Timeline: ",T(n.start_date)," - ",T(n.end_date)]})]}),r("div",{className:"space-y-1",children:[r("div",{className:"flex items-center justify-between text-sm",children:[r("div",{className:"flex items-center space-x-2",children:[e(Sr,{className:"w-4 h-4 text-default-400"}),e("span",{children:"Budget"})]}),r("span",{className:"text-default-600",children:[c(n.budget_spent||0)," / ",c(n.budget_allocated||0)]})]}),r("div",{className:"flex items-center justify-between text-xs text-default-500",children:[r("span",{children:["(",x.toFixed(0),"% used)"]}),e(te,{size:"sm",variant:"dot",color:x>100?"danger":x>90?"warning":"success",children:x>100?"Over budget":x>90?"High usage":"Good"})]})]}),r("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-default-600",children:"ðŸ“Š SPI:"}),e(te,{size:"sm",variant:"flat",color:i(B),children:B.toFixed(2)})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-default-600",children:"ðŸ’° CPI:"}),e(te,{size:"sm",variant:"flat",color:s(L),children:L.toFixed(2)})]})]}),r("div",{className:"space-y-2",children:[r("div",{className:"flex items-center space-x-2 text-sm",children:[e(Ye,{className:"w-4 h-4 text-default-400"}),r("span",{className:"text-default-600",children:["Lead: ",((U=n.project_leader)==null?void 0:U.name)||"Unassigned"]}),r("span",{className:"text-default-500",children:["(",((R=n.project_leader)==null?void 0:R.role)||"PM",")"]})]}),r("div",{className:"flex items-center space-x-2 text-sm",children:[e(Mr,{className:"w-4 h-4 text-default-400"}),r("span",{className:"text-default-600",children:["Dept: ",((V=n.department)==null?void 0:V.name)||"General"]})]})]}),r("div",{className:"grid grid-cols-2 gap-2",children:[r("div",{className:"flex items-center space-x-2 text-sm",children:[e(Ne,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-default-600",children:"Risk:"}),e(te,{size:"sm",variant:"flat",color:a(n.risk_level),children:n.risk_level||"Low"})]}),r("div",{className:"flex items-center space-x-2 text-sm",children:[e(Gr,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-default-600",children:"Health:"}),e(te,{size:"sm",variant:"flat",color:C(E),children:E==="good"?"âœ… Good":E==="at_risk"?"ðŸŸ¡ At Risk":E==="critical"?"ðŸ”´ Critical":"âšª Unknown"})]})]}),r("div",{className:"flex items-center space-x-2 text-sm",children:[S(n.methodology),r("span",{className:"text-default-600",children:["Methodology: ",n.methodology||"Standard"]})]}),n.next_milestone&&r("div",{className:"flex items-center space-x-2 text-sm",children:[e(Ur,{className:"w-4 h-4 text-default-400"}),r("span",{className:"text-default-600",children:["Next: ",n.next_milestone]})]})]})}),e(tt,{className:"pt-2",children:r("div",{className:"w-full space-y-2",children:[e("div",{className:"flex flex-wrap gap-2",children:G.slice(0,3).map(P=>e(ye,{size:"sm",variant:"flat",color:P.color,startContent:P.icon,onPress:()=>w(P.key,n),className:"flex-1 min-w-0",children:P.label},P.key))}),G.length>3&&e("div",{className:"flex flex-wrap gap-2",children:G.slice(3,6).map(P=>e(ye,{size:"sm",variant:"light",color:P.color,startContent:P.icon,onPress:()=>w(P.key,n),className:"flex-1 min-w-0",children:P.label},P.key))}),r("div",{className:"text-xs text-default-500 text-center border-t border-default-200 pt-2",children:["Last updated: ",T(n.updated_at)]})]})})]})},St=[{title:"Office Management",openTasks:1,completedTasks:9,description:"Lorem Ipsum is simply dummy text of the printing and typesetting industry...",deadline:"17 Apr 2019",leaders:[{name:"John Doe",avatar:"assets/img/profiles/avatar-02.jpg"},{name:"Richard Miles",avatar:"assets/img/profiles/avatar-09.jpg"},{name:"John Smith",avatar:"assets/img/profiles/avatar-10.jpg"},{name:"Mike Litorus",avatar:"assets/img/profiles/avatar-05.jpg"}],team:[{name:"John Doe",avatar:"assets/img/profiles/avatar-02.jpg"},{name:"Richard Miles",avatar:"assets/img/profiles/avatar-09.jpg"},{name:"John Smith",avatar:"assets/img/profiles/avatar-10.jpg"},{name:"Mike Litorus",avatar:"assets/img/profiles/avatar-05.jpg"}],progress:40}],wt=({title:n,allUsers:N,report_to:b,departments:I,designations:m})=>{var re,fe,ne,Ce,Be,Re,Ae,Te,$e;const{auth:A}=Le().props,f=ae(),C=je(f.breakpoints.down("sm"));je(f.breakpoints.down("md"));const[a,w]=h.useState(Le().props.user),[c,T]=ke.useState(0),[F,g]=ke.useState(null),[d,l]=h.useState(!1),[S,p]=h.useState({profile:!1,personal:!1,emergency:!1,bank:!1,family:!1,education:!1,experience:!1,salary:!1}),[i,s]=h.useState({search:"",section:"all",completionStatus:"all"}),[o,x]=h.useState(!1),[E,B]=h.useState({completion_percentage:0,total_sections:8,completed_sections:0,last_updated:null,profile_views:0}),L=((re=A.permissions)==null?void 0:re.includes("profile.own.update"))||((fe=A.permissions)==null?void 0:fe.includes("profile.update"))||A.user.id===a.id,u=((ne=A.permissions)==null?void 0:ne.includes("profile.own.view"))||((Ce=A.permissions)==null?void 0:Ce.includes("profile.view"))||A.user.id===a.id,G=h.useCallback(v=>{p(O=>({...O,[v]:!0}))},[]),_=h.useCallback(v=>{p(O=>({...O,[v]:!1}))},[]),J=h.useCallback((v,O)=>{s(Fe=>({...Fe,[v]:O}))},[]),y=h.useCallback(async()=>{try{const v=await lr.get(route("profile.stats",{user:a.id}));v.data.stats&&B(v.data.stats)}catch(v){console.error("Error fetching profile stats:",v)}},[a.id]),U=h.useCallback(()=>{const v=[a.name&&a.email,a.phone&&a.address,a.birthday&&a.gender,a.department&&a.designation,a.emergency_contact_primary_name,a.bank_name||a.bank_account_no,a.educations&&a.educations.length>0,a.experiences&&a.experiences.length>0],O=v.filter(Boolean).length,Fe=Math.round(O/v.length*100);B(Ve=>({...Ve,completion_percentage:Fe,completed_sections:O,total_sections:v.length}))},[a]);h.useEffect(()=>{U(),y()},[U,y]);const R=h.useCallback(()=>{U(),y(),M.success("Profile updated successfully")},[U,y]),V=(v,O)=>{T(O)},P=h.useMemo(()=>[{title:"Profile Completion",value:`${E.completion_percentage}%`,icon:e(De,{}),color:E.completion_percentage>=80?"text-green-400":E.completion_percentage>=50?"text-orange-400":"text-red-400",iconBg:E.completion_percentage>=80?"bg-green-500/20":E.completion_percentage>=50?"bg-orange-500/20":"bg-red-500/20",description:`${E.completed_sections}/${E.total_sections} sections completed`},{title:"Last Updated",value:E.last_updated?Xr(E.last_updated).fromNow():"Never",icon:e(Xe,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Profile last modified"},{title:"Profile Views",value:E.profile_views||0,icon:e(Zr,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Times profile viewed"},{title:"Account Status",value:a.active?"Active":"Inactive",icon:a.active?e(De,{}):e(Ne,{}),color:a.active?"text-green-400":"text-red-400",iconBg:a.active?"bg-green-500/20":"bg-red-500/20",description:"Current account status"}],[E,a.active]),oe=h.useMemo(()=>{const v=[];return L&&v.push({label:C?"Edit":"Edit Profile",icon:e(Or,{className:"w-4 h-4"}),onPress:()=>G("profile"),color:"primary",variant:"solid"}),v.push({label:C?"":"Export",isIconOnly:C,icon:e(Vr,{className:"w-4 h-4"}),color:"default",variant:"bordered"}),v},[L,C]);return u?r(z,{children:[e(We,{title:a.name}),S.profile&&e(bt,{user:a,allUsers:N,departments:I,designations:m,open:S.profile,setUser:w,closeModal:()=>_("profile"),onSuccess:R}),S.personal&&e(gt,{user:a,open:S.personal,setUser:w,closeModal:()=>_("personal"),onSuccess:R}),S.emergency&&e(ft,{user:a,open:S.emergency,setUser:w,closeModal:()=>_("emergency"),onSuccess:R}),S.bank&&e(xt,{user:a,open:S.bank,setUser:w,closeModal:()=>_("bank"),onSuccess:R}),S.family&&e(_t,{user:a,open:S.family,setUser:w,closeModal:()=>_("family"),onSuccess:R}),S.education&&e(yt,{user:a,open:S.education,setUser:w,closeModal:()=>_("education"),onSuccess:R}),S.experience&&e(vt,{user:a,open:S.experience,setUser:w,closeModal:()=>_("experience"),onSuccess:R}),e(ee,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Dr,{in:!0,timeout:800,children:e(H,{children:e(Ar,{title:`${a.name}'s Profile`,subtitle:"Manage personal information, work details, and account settings",icon:e(Ye,{className:"w-8 h-8"}),variant:"default",actionButtons:oe,children:r("div",{className:"p-4 sm:p-6",children:[e(Tr,{stats:P,className:"mb-6"}),r("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(et,{label:"Search Profile Sections",variant:"bordered",placeholder:"Search sections, fields, or content...",value:i.search,onValueChange:v=>J("search",v),startContent:e(Br,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:C?"sm":"md"})}),e("div",{className:"flex gap-2 items-end",children:e(rt,{variant:"bordered",className:"bg-white/5",children:r(ye,{isIconOnly:C,color:o?"primary":"default",onPress:()=>x(!o),className:o?"bg-purple-500/20":"bg-white/5",children:[e(Rr,{className:"w-4 h-4"}),!C&&e("span",{className:"ml-1",children:"Filters"})]})})})]}),o&&e(br,{in:!0,timeout:300,children:r("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[r("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r(Ge,{label:"Profile Section",variant:"bordered",selectedKeys:i.section!=="all"?[i.section]:[],onSelectionChange:v=>{const O=Array.from(v)[0]||"all";J("section",O)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(Q,{value:"all",children:"All Sections"},"all"),e(Q,{value:"basic",children:"Basic Information"},"basic"),e(Q,{value:"personal",children:"Personal Details"},"personal"),e(Q,{value:"work",children:"Work Information"},"work"),e(Q,{value:"emergency",children:"Emergency Contacts"},"emergency"),e(Q,{value:"bank",children:"Banking Details"},"bank"),e(Q,{value:"education",children:"Education"},"education"),e(Q,{value:"experience",children:"Experience"},"experience")]}),r(Ge,{label:"Completion Status",variant:"bordered",selectedKeys:i.completionStatus!=="all"?[i.completionStatus]:[],onSelectionChange:v=>{const O=Array.from(v)[0]||"all";J("completionStatus",O)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(Q,{value:"all",children:"All Status"},"all"),e(Q,{value:"completed",children:"Completed"},"completed"),e(Q,{value:"incomplete",children:"Incomplete"},"incomplete"),e(Q,{value:"empty",children:"Empty"},"empty")]})]}),(i.search||i.section!=="all"||i.completionStatus!=="all")&&r("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[i.search&&r(te,{variant:"flat",color:"primary",size:"sm",onClose:()=>J("search",""),children:["Search: ",i.search]}),i.section!=="all"&&r(te,{variant:"flat",color:"secondary",size:"sm",onClose:()=>J("section","all"),children:["Section: ",i.section]}),i.completionStatus!=="all"&&r(te,{variant:"flat",color:"warning",size:"sm",onClose:()=>J("completionStatus","all"),children:["Status: ",i.completionStatus]})]})]})}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:r($,{variant:"h6",className:"font-semibold text-foreground",children:["Profile Overview",r("span",{className:"text-sm text-default-500 ml-2",children:["(",E.completion_percentage,"% complete)"]})]})}),d?r("div",{className:"text-center py-8",children:[e(ge,{size:40}),e($,{className:"mt-4",color:"textSecondary",children:"Loading profile data..."})]}):r(z,{children:[e(Z,{children:r(t,{container:!0,spacing:2,direction:"row",alignItems:"flex-start",children:[e(t,{item:!0,xs:12,md:5,children:r(t,{container:!0,spacing:2,direction:{xs:"column",md:"row"},alignItems:{xs:"center",md:"flex-start"},children:[e(t,{item:!0,children:e(ee,{sx:{display:"flex",alignItems:"center",mb:2},children:e(Ee,{src:a.profile_image,alt:a.name,sx:{width:100,height:100,mr:2}})})}),e(t,{item:!0,xs:12,md:!0,children:r(ee,{direction:{xs:"column",md:"row"},alignItems:{xs:"center",md:"flex-start"},sx:{display:"flex",flexDirection:"column",mb:2},children:[e($,{variant:"h5",children:a.name}),e($,{variant:"subtitle1",color:"textSecondary",children:((Be=I.find(v=>v.id===a.department))==null?void 0:Be.name)||"N/A"}),e($,{variant:"body2",color:"textSecondary",children:((Re=m.find(v=>v.id===a.designation))==null?void 0:Re.title)||"N/A"}),r($,{variant:"body2",color:"textSecondary",children:["Employee ID : ",a.employee_id||"N/A"]}),r($,{variant:"body2",color:"textSecondary",children:["Date of Join : ",a.date_of_joining||"N/A"]}),e(ye,{variant:"bordered",color:"primary",className:"mt-2",children:"Send Message"})]})})]})}),e(be,{orientation:"vertical",flexItem:!0,sx:{mx:2}}),e(t,{item:!0,xs:12,md:6,children:r(le,{children:[e(W,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"Phone:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.phone||"N/A"})})]})}),e(W,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"Email:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.email||"N/A"})})]})}),e(W,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"Birthday:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.birthday||"N/A"})})]})}),e(W,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"Address:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.address||"N/A"})})]})}),e(W,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"Gender:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.gender||"N/A"})})]})}),e(W,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"Reports to:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:N.find(v=>v.id===a.report_to)?r(ee,{sx:{display:"flex",alignItems:"center"},children:[e(Ee,{src:`/assets/images/users/${(Ae=N.find(v=>v.id===a.report_to))==null?void 0:Ae.user_name}.jpg`,alt:(Te=N.find(v=>v.id===a.report_to))==null?void 0:Te.name,sx:{width:24,height:24,mr:1}}),e($,{color:"primary",children:($e=N.find(v=>v.id===a.report_to))==null?void 0:$e.name})]}):"N/A"})})]})})]})})]})}),e(Z,{sx:{paddingBottom:"0px !important"},children:r(Qr,{value:c,onChange:V,"aria-label":"User Profile Tabs",variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,children:[e(Se,{label:"Profile"}),e(Se,{label:"Projects"}),e(Se,{label:"Salary & Statutory"}),e(Se,{label:"Assets"})]})})]})]})]})})})})}),r(ee,{sx:{p:2},children:[c===0&&r(t,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:[e(t,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:r(H,{sx:{mb:2,flex:1},children:[e(se,{title:"Personal Information",sx:{padding:"24px"},action:L&&e(q,{variant:"outlined",color:"primary",onClick:()=>G("personal"),sx:{position:"absolute",top:16,right:16},children:e(me,{})})}),e(Z,{children:a.passport_no||a.passport_exp_date||a.nationality||a.religion||a.marital_status||a.employment_of_spouse||a.number_of_children?r(le,{children:[a.passport_no&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Passport No.:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.passport_no||"N/A"})})]})}),a.passport_exp_date&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Passport Exp Date.:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.passport_exp_date||"N/A"})})]})}),a.nid&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ NID No.:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.nid||"N/A"})})]})}),a.nationality&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Nationality:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.nationality||"N/A"})})]})}),a.religion&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Religion:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.religion||"N/A"})})]})}),a.marital_status&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Marital Status:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.marital_status||"N/A"})})]})}),a.employment_of_spouse&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Employment of Spouse:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.employment_of_spouse||"N/A"})})]})}),a.number_of_children&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ No. of Children:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.number_of_children||"N/A"})})]})})]}):e($,{children:"No personal information available"})})]})}),e(t,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:r(H,{sx:{mb:2,flex:1},children:[e(se,{title:"Emergency Contact",sx:{padding:"24px"},action:L&&e(q,{variant:"outlined",color:"primary",onClick:()=>G("emergency"),sx:{position:"absolute",top:16,right:16},children:e(me,{})})}),e(Z,{children:a.emergency_contact_primary_name||a.emergency_contact_secondary_name?r(le,{children:[a.emergency_contact_primary_name&&r(z,{children:[e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Name:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.emergency_contact_primary_name||"N/A"})})]})}),e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Relationship:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.emergency_contact_primary_relationship||"N/A"})})]})}),e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Phone:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.emergency_contact_primary_phone||"N/A"})})]})})]}),a.emergency_contact_secondary_name&&r(z,{children:[e(be,{sx:{my:2}}),e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Name:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.emergency_contact_secondary_name||"N/A"})})]})}),e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Relationship:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.emergency_contact_secondary_relationship||"N/A"})})]})}),e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Phone:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.emergency_contact_secondary_phone||"N/A"})})]})})]})]}):e($,{children:"No emergency contact information"})})]})}),e(t,{item:!0,xs:12,md:6,children:r(H,{variant:"outlined",sx:{mb:2},children:[e(se,{title:"Bank Information",sx:{padding:"24px"},action:L&&e(q,{variant:"outlined",color:"primary",onClick:()=>G("bank"),sx:{position:"absolute",top:16,right:16},children:e(me,{})})}),e(Z,{children:a.bank_name||a.bank_account_no||a.ifsc_code||a.pan_no?r(le,{children:[a.bank_name&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Bank Name:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.bank_name})})]})}),a.bank_account_no&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Bank Account No.:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.bank_account_no})})]})}),a.ifsc_code&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ IFSC Code:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.ifsc_code})})]})}),a.pan_no&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ PAN No:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.pan_no})})]})})]}):e($,{children:"No bank information"})})]})}),e(t,{item:!0,xs:12,md:6,children:r(H,{variant:"outlined",children:[e(se,{title:"Family Information",sx:{padding:"24px"},action:L&&e(q,{variant:"outlined",color:"primary",onClick:()=>G("family"),sx:{position:"absolute",top:16,right:16},children:e(me,{})})}),e(Z,{children:a.family_member_name||a.family_member_relationship||a.family_member_dob||a.family_member_phone?r(le,{children:[a.family_member_name&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Name:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.family_member_name})})]})}),a.family_member_relationship&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Relationship:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.family_member_relationship})})]})}),a.family_member_dob&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Date of Birth:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.family_member_dob})})]})}),a.family_member_phone&&e(W,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(k,{primary:"â€¢ Phone:"})}),e(t,{item:!0,xs:7,children:e(k,{primary:a.family_member_phone})})]})})]}):e($,{children:"No family member information"})})]})}),e(t,{item:!0,xs:12,md:6,children:r(H,{variant:"outlined",sx:{mb:2},children:[e(se,{title:"Education Information",sx:{padding:"24px"},action:L&&e(q,{variant:"outlined",color:"primary",onClick:()=>G("education"),sx:{position:"absolute",top:16,right:16},children:e(me,{})})}),e(Z,{children:a.educations&&a.educations.length>0?e(le,{children:a.educations.map((v,O)=>r(ke.Fragment,{children:[e(W,{disableGutters:!0,children:r($,{variant:"h6",children:["â€¢ ",v.institution]})}),e(W,{disableGutters:!0,children:e($,{variant:"body1",children:v.degree||"N/A"})}),e(W,{disableGutters:!0,children:r($,{variant:"body2",children:[v.starting_date?new Date(v.starting_date).getFullYear():"N/A"," -",v.complete_date?new Date(v.complete_date).getFullYear():"N/A"]})}),O<a.educations.length-1&&e(be,{sx:{my:1}})]},v.id))}):e($,{children:"No education information"})})]})}),e(t,{item:!0,xs:12,md:6,children:r(H,{variant:"outlined",children:[e(se,{title:"Experience",sx:{padding:"24px"},action:L&&e(q,{variant:"outlined",color:"primary",onClick:()=>G("experience"),sx:{position:"absolute",top:16,right:16},children:e(me,{})})}),e(Z,{children:a.experiences&&a.experiences.length>0?e(le,{children:a.experiences.map((v,O)=>r(ke.Fragment,{children:[e(W,{disableGutters:!0,children:r($,{variant:"h6",children:["â€¢ ",v.job_position," at ",v.company_name]})}),e(W,{disableGutters:!0,children:r($,{variant:"body1",children:[v.period_from?new Date(v.period_from).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"N/A"," "," - ",v.period_to?new Date(v.period_to).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"Present"]})}),e(W,{disableGutters:!0,children:e($,{variant:"body2",children:v.location})}),v.description&&e(W,{disableGutters:!0,children:e($,{variant:"body2",children:v.description})}),O<a.experiences.length-1&&e(be,{sx:{my:1}})]},O))}):e($,{children:"No experience information"})})]})})]}),c===1&&e(t,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:St.map((v,O)=>e(t,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column"},children:e(kt,{project:v})},v.id||O))}),c===2&&e(Ct,{user:a,setUser:w})]})]}):r(Je,{children:[e(We,{title:n}),e(ee,{sx:{display:"flex",justifyContent:"center",p:2},children:e(H,{children:r(ze,{className:"p-8 text-center",children:[e(Ne,{className:"w-16 h-16 text-warning-500 mx-auto mb-4"}),e($,{variant:"h6",className:"mb-2",children:"Access Denied"}),e($,{variant:"body2",color:"textSecondary",children:"You don't have permission to view this profile."})]})})})]})};wt.layout=n=>e(Je,{children:n});export{wt as default};
