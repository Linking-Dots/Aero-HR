import{r as i,R as Ne,J as qe,a as Je,j as e,b as o,h as _e,d as De,F as Q}from"./app-ICdw8XZW.js";import{u as ye,a as ue,n as be,I as ne,B as u,ao as Qe,T as x,av as ke,as as Se,at as Te,au as he,F as Y,d as fe,al as Fe,W as se,c as ge,m as $e,aB as Xe,aC as Ke,an as Ve,e as Le,f as E,q as Re}from"./App-xKIEJnfh.js";import{a as Ie,F as Be}from"./PencilIcon-BoMELbc6.js";import{F as Ee}from"./TrashIcon-6Qn0Ks3i.js";import{F as ea,b as aa,a as ta}from"./XCircleIcon-Bl2Ah-1J.js";import{C as ra}from"./CardContent-DGIH-NyB.js";import{a as P}from"./colorManipulator-BO-pWekM.js";import{e as z,t as sa,a as oa,b as na,c as la,d as ia}from"./chunk-F3UDT23P-Dzih6ugh.js";import{t as Pe}from"./chunk-7ZZXWEXF-UZIMEnKN.js";import{u as We}from"./chunk-R6AK6OQ4-e2LNdSxP.js";import{p as Me}from"./chunk-O5I3QTYU-JuO97IC0.js";import{C as da}from"./Clear-lJ20lSRj.js";import{G as He}from"./GlassDialog-DtkSQAnW.js";import{D as Oe}from"./DialogTitle-FtEY60tO.js";import{I as je}from"./InputLabel-l_RaM-SP.js";import{S as Ue}from"./Select-CqGdc7ri.js";import{M as oe}from"./MenuItem-Cz-a5JZM.js";import{F as ze,T as J}from"./TextField-gRWRJFLH.js";import{A as ca}from"./Avatar-BWjKMW06.js";import{a as Ge,b as Ze}from"./DialogContent-C99NR7Vt.js";import{L as ma}from"./LoadingButton-BMZNmXEn.js";import{C as Ye}from"./CircularProgress-CRTMx9g5.js";import{D as pa}from"./DialogContentText-nbEfY0qG.js";import{B as Ae}from"./Button-ePhGwwaI.js";function ua({title:C,titleId:g,...h},v){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:v,"aria-labelledby":g},h),C?i.createElement("title",{id:g},C):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const ha=i.forwardRef(ua);function fa({title:C,titleId:g,...h},v){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:v,"aria-labelledby":g},h),C?i.createElement("title",{id:g},C):null,i.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const ga=i.forwardRef(fa),ya=Ne.forwardRef(({leaves:C,allUsers:g,handleClickOpen:h,setCurrentLeave:v,openModal:n,setLeaves:W,setCurrentPage:k,currentPage:_,totalRows:S,lastPage:M,perPage:w,selectedMonth:le,employee:j,isAdminView:y=!1,onBulkApprove:q,onBulkReject:H,canApproveLeaves:m=!1,canEditLeaves:p=!1,canDeleteLeaves:T=!1,fetchLeavesStats:F},xe)=>{var r,d;const{auth:$}=qe().props,b=ye(),N=ue("(min-width: 1025px)"),O=ue("(min-width: 641px) and (max-width: 1024px)"),X=ue("(max-width: 640px)"),[R,K]=i.useState(!1),[I,V]=i.useState(null),[G,ie]=i.useState(new Set);(r=$.permissions)!=null&&r.includes("leaves.view"),(d=$.permissions)!=null&&d.includes("leave.own.view");const L=y&&(m||p||T),D={New:{color:"primary",icon:ta,bgColor:P(b.palette.primary.main,.1),textColor:b.palette.primary.main},Pending:{color:"warning",icon:ga,bgColor:P(b.palette.warning.main,.1),textColor:b.palette.warning.main},Approved:{color:"success",icon:aa,bgColor:P(b.palette.success.main,.1),textColor:b.palette.success.main},Declined:{color:"danger",icon:ea,bgColor:P(b.palette.error.main,.1),textColor:b.palette.error.main}},ee=a=>{switch(a==null?void 0:a.toLowerCase()){case"casual":return e(Ke,{className:"w-3 h-3 text-blue-500"});case"weekend":return e(Xe,{className:"w-3 h-3 text-yellow-500"});case"sick":return e(ha,{className:"w-3 h-3 text-red-500"});case"earned":return e(ge,{className:"w-3 h-3 text-green-500"});default:return e(se,{className:"w-3 h-3 text-primary"})}},ae=i.useCallback(a=>{console.log("Pagination page change requested:",a),k&&k(a)},[k]),f=i.useCallback(async(a,t)=>{if(R)return;K(!0),V(`${a.id}-${t}`);const s=new Promise(async(c,l)=>{var B,ve,Ce;try{const A=await Je.post(route("leave-update-status"),{id:a.id,status:t});A.status===200&&(W(me=>me.map(pe=>pe.id===a.id?{...pe,status:t}:pe)),F(),c(A.data.message||"Leave status updated successfully"))}catch(A){const me=((ve=(B=A.response)==null?void 0:B.data)==null?void 0:ve.message)||((Ce=A.response)==null?void 0:Ce.statusText)||"Failed to update leave status";l(me),console.error(A)}finally{K(!1),V(null)}});be.promise(s,{pending:"Updating leave status...",success:"Leave status updated successfully!",error:"Failed to update leave status"})},[W,R]),te=a=>{const t=D[a]||D.New,s=t.icon;return e($e,{size:"sm",variant:"flat",color:t.color,startContent:e(s,{className:"w-3 h-3"}),classNames:{base:"h-6",content:"text-xs font-medium"},children:a})},Z=(a,t)=>{const s=new Date(a),c=new Date(t),l=Math.abs(c-s),B=Math.ceil(l/(1e3*60*60*24))+1;return B===1?"1 day":`${B} days`},U=a=>new Date(a).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"}),de=a=>(g==null?void 0:g.find(t=>String(t.id)===String(a)))||{name:"Unknown User",phone:""},ce=({leave:a})=>{const t=de(a.user_id),s=Z(a.from_date,a.to_date);return D[a.status]||D.New,e(Le,{className:"mb-2",shadow:"sm",children:o(ra,{className:"p-3",children:[o(u,{className:"flex items-start justify-between mb-3",children:[e(u,{className:"flex items-center gap-3 flex-1",children:y&&e(We,{avatarProps:{radius:"lg",size:"sm",src:t==null?void 0:t.profile_image,fallback:e(fe,{className:"w-4 h-4"})},name:e(x,{variant:"body2",fontWeight:"medium",children:t==null?void 0:t.name}),description:e(x,{variant:"caption",color:"textSecondary",children:t==null?void 0:t.phone})})}),o(u,{className:"flex items-center gap-2",children:[te(a.status),L&&o(ke,{children:[e(Se,{children:e(ne,{size:"small",children:e(Be,{className:"w-4 h-4"})})}),o(Te,{"aria-label":"Leave actions",children:[p&&e(he,{startContent:e(Ie,{className:"w-4 h-4"}),onPress:()=>{v(a),n("edit_leave")},children:"Edit Leave"},"edit"),T&&e(he,{className:"text-danger",color:"danger",startContent:e(Ee,{className:"w-4 h-4"}),onPress:()=>h(a.id,"delete_leave"),children:"Delete Leave"},"delete")]})]})]})]}),e(De,{className:"my-3"}),o(Ve,{spacing:2,children:[o(u,{className:"flex items-center gap-2",children:[e(se,{className:"w-4 h-4 text-primary"}),e(x,{variant:"body2",fontWeight:"medium",children:a.leave_type})]}),o(u,{className:"flex items-center gap-2",children:[e(Y,{className:"w-4 h-4 text-default-500"}),o(x,{variant:"body2",color:"textSecondary",children:[U(a.from_date)," - ",U(a.to_date)]}),e($e,{size:"sm",variant:"bordered",color:"default",children:s})]}),a.reason&&o(u,{className:"flex items-start gap-2",children:[e(ge,{className:"w-4 h-4 text-default-500 mt-0.5"}),e(x,{variant:"body2",color:"textSecondary",className:"flex-1",children:a.reason})]})]}),y&&m&&o(Q,{children:[e(De,{className:"my-3"}),e(u,{className:"flex gap-2",children:["Approved","Declined"].map(c=>e(_e,{size:"sm",variant:a.status===c?"solid":"bordered",color:D[c].color,isLoading:I===`${a.id}-${c}`,onPress:()=>f(a,c),startContent:!I||I!==`${a.id}-${c}`?Ne.createElement(D[c].icon,{className:"w-3 h-3"}):null,classNames:{base:"flex-1"},children:c},c))})]})]})})},we=i.useCallback((a,t)=>{const s=de(a.user_id);switch(t){case"employee":return e(z,{className:"whitespace-nowrap",children:e(We,{avatarProps:{radius:"lg",size:"sm",src:s==null?void 0:s.profile_image,fallback:e(fe,{className:"w-4 h-4"})},description:e(x,{variant:"caption",className:"text-xs",children:s==null?void 0:s.phone}),name:e(x,{variant:"body2",className:"text-sm font-medium",children:s==null?void 0:s.name})})});case"leave_type":return e(z,{children:o(u,{className:"flex items-center gap-1",children:[ee(a.leave_type),e(x,{variant:"body2",className:"text-sm font-medium capitalize",children:a.leave_type})]})});case"from_date":case"to_date":return e(z,{children:o(u,{className:"flex items-center gap-1",children:[e(Y,{className:"w-3 h-3 text-default-500"}),o(u,{children:[e(x,{variant:"body2",className:"text-sm",children:U(a[t])}),t==="from_date"&&e(x,{variant:"caption",className:"text-xs",color:"textSecondary",children:Z(a.from_date,a.to_date)})]})]})});case"status":return e(z,{children:o(u,{className:"flex items-center gap-2",children:[te(a.status),y&&m&&o(ke,{children:[e(Se,{children:e(_e,{isIconOnly:!0,size:"sm",variant:"light",isDisabled:R,children:e(Be,{className:"w-4 h-4"})})}),e(Te,{"aria-label":"Status actions",onAction:c=>f(a,c),children:Object.keys(D).map(c=>{const l=D[c],B=l.icon;return e(he,{startContent:e(B,{className:"w-4 h-4"}),color:l.color,children:c},c)})})]})]})});case"reason":return e(z,{children:e(Qe,{title:a.reason||"No reason provided",children:e(x,{variant:"caption",className:"max-w-xs truncate cursor-help text-xs",color:"textSecondary",children:a.reason||"No reason provided"})})});case"actions":return e(z,{children:o(u,{className:"flex items-center gap-1",children:[p&&e(Pe,{content:"Edit Leave",children:e(ne,{size:"small",onClick:()=>{v(a),n("edit_leave")},sx:{background:P(b.palette.primary.main,.1),"&:hover":{background:P(b.palette.primary.main,.2)}},children:e(Ie,{className:"w-4 h-4"})})}),T&&e(Pe,{content:"Delete Leave",color:"danger",children:e(ne,{size:"small",onClick:()=>{v(a),h(a.id,"delete_leave")},sx:{background:P(b.palette.error.main,.1),"&:hover":{background:P(b.palette.error.main,.2)}},children:e(Ee,{className:"w-4 h-4"})})})]})});default:return e(z,{children:a[t]})}},[y,m,N,R,b,v,n,h,f]),re=[...y?[{name:"Employee",uid:"employee",icon:fe}]:[],{name:"Leave Type",uid:"leave_type",icon:se},{name:"From Date",uid:"from_date",icon:Y},{name:"To Date",uid:"to_date",icon:Y},{name:"Status",uid:"status",icon:ge},{name:"Reason",uid:"reason",icon:se},...y?[{name:"Actions",uid:"actions"}]:[]];return X?o(u,{className:"space-y-4",children:[e(Fe,{className:"max-h-[70vh]",children:C.map(a=>e(ce,{leave:a},a.id))}),S>w&&e(u,{className:"flex justify-center pt-4",children:e(Me,{showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:_,total:M,onChange:ae,size:"sm"})})]}):o(u,{sx:{maxHeight:"84vh",overflowY:"auto"},children:[e(Fe,{className:"max-h-[70vh]",children:o(sa,{isStriped:!0,selectionMode:"none",isCompact:!0,isHeaderSticky:!0,removeWrapper:!0,"aria-label":"Leave Management Table",classNames:{wrapper:"min-h-[200px]",table:"min-h-[300px]",thead:"[&>tr]:first:shadow-small bg-default-100/80",tbody:"divide-y divide-default-200/50",tr:"group hover:bg-default-50/50 transition-colors h-12",td:"py-2 px-3 text-sm",th:"py-2 px-3 text-xs font-semibold"},children:[e(oa,{columns:re,children:a=>e(na,{align:a.uid==="actions"?"center":"start",className:"bg-default-100/80 backdrop-blur-md",children:o(u,{className:"flex items-center gap-1",children:[a.icon&&e(a.icon,{className:"w-3 h-3"}),e("span",{className:"text-xs font-semibold",children:a.name})]})},a.uid)}),e(la,{items:C,emptyContent:o(u,{className:"flex flex-col items-center justify-center py-8 text-center",children:[e(Y,{className:"w-12 h-12 text-default-300 mb-4"}),e(x,{variant:"h6",color:"textSecondary",children:"No leaves found"}),e(x,{variant:"body2",color:"textSecondary",children:j?`No leaves found for "${j}"`:"No leave requests for the selected period"})]}),children:a=>e(ia,{children:t=>we(a,t)},a.id)})]})}),S>w&&o(u,{className:"py-4 flex justify-center",children:[e(Me,{showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:_,total:M,onChange:ae,size:O?"sm":"md"}),o("div",{className:"ml-4 text-xs text-gray-500",children:["Page ",_," of ",M," (Total: ",S," records)"]})]})]})});ya.displayName="LeaveEmployeeTable";const qa=({open:C,closeModal:g,leavesData:h,setLeavesData:v,currentLeave:n,allUsers:W,setTotalRows:k,setLastPage:_,setLeaves:S,handleMonthChange:M,employee:w,selectedMonth:le,addLeaveOptimized:j,updateLeaveOptimized:y,fetchLeavesStats:q})=>{var re;const{auth:H}=qe().props,m=ye(),[p,T]=i.useState((n==null?void 0:n.user_id)||H.user.id),[F,xe]=i.useState((h==null?void 0:h.leaveTypes)||[]),[$,b]=i.useState([]),[N,O]=i.useState((n==null?void 0:n.leave_type)||""),X=r=>{if(!r)return new Date().toISOString().split("T")[0];if(typeof r=="string"&&r.match(/^\d{4}-\d{2}-\d{2}$/))return r;if(typeof r=="string"&&r.includes("T")){if(r.includes("T18:00:00")){const a=r.split("T")[0].split("-"),t=parseInt(a[0]),s=parseInt(a[1]),c=parseInt(a[2])+1;return new Date(t,s-1,c).toISOString().split("T")[0]}return r.split("T")[0]}try{const d=new Date(r);if(isNaN(d.getTime()))return new Date().toISOString().split("T")[0];const a=d.getFullYear(),t=String(d.getMonth()+1).padStart(2,"0"),s=String(d.getDate()).padStart(2,"0");return`${a}-${t}-${s}`}catch(d){return console.error("Error formatting date:",d),new Date().toISOString().split("T")[0]}},[R,K]=i.useState(n!=null&&n.from_date?X(n.from_date):""),[I,V]=i.useState(n!=null&&n.to_date?X(n.to_date):""),[G,ie]=i.useState((n==null?void 0:n.no_of_days)||""),[L,D]=i.useState(""),[ee,ae]=i.useState((n==null?void 0:n.reason)||""),[f,te]=i.useState({}),[Z,U]=i.useState(!1),[de,ce]=i.useState("");return i.useEffect(()=>{var r,d;if(h){xe(h.leaveTypes||[]);const a=((r=h.leaveCountsByUser)==null?void 0:r[p])||[];if(b(a),F.length>0&&!N&&!n&&O(F[0].type),n&&!N){const t=(d=h.leaveTypes)==null?void 0:d.find(s=>s.id===n.leave_type);t&&O(t.type)}}},[h,p,n]),i.useEffect(()=>{if(!N||!$||!F)return;const r=$.find(t=>t.leave_type===N),d=(r==null?void 0:r.days_used)||0;ce(d);const a=F.find(t=>t.type===N);if(a){const t=a.days-d;D(t),n&&G>t&&ie(t)}},[N,$,F,n,G]),i.useEffect(()=>{ie(((d,a)=>{if(!d||!a)return"";const t=new Date(d),s=new Date(a);if(t>s)return"";const c=s.getTime()-t.getTime();return Math.ceil(c/(1e3*3600*24))+1})(R,I))},[R,I]),o(He,{open:C,onClose:g,fullWidth:!0,maxWidth:"sm",children:[o(Oe,{sx:{display:"flex",alignItems:"center"},children:[e(x,{variant:"h6",children:n?"Edit Leave":"Add Leave"}),e(ne,{onClick:g,sx:{position:"absolute",top:8,right:16},children:e(da,{})})]}),o("form",{onSubmit:async r=>{r.preventDefault(),U(!0);const d=new Promise(async(a,t)=>{try{const s={route:route().current(),user_id:p,leaveType:N,fromDate:R,toDate:I,daysCount:G,leaveReason:ee,employee:w,month:le},c=n?route("leave-update"):route("leave-add");n&&(s.id=n.id);const l=await axios.post(c,s);l.status===200&&(v(l.data.leavesData),n&&y&&l.data.leave?(y(l.data.leave),q()):j&&l.data.leave?(j(l.data.leave),q(),l.data.leaves&&l.data.leaves.total&&(k(l.data.leaves.total),_(l.data.leaves.last_page||1))):(console.log("Using fallback data update mode"),l.data.leaves&&(l.data.leaves.data?(S(l.data.leaves.data),k(l.data.leaves.total||l.data.leaves.data.length),_(l.data.leaves.last_page||1)):Array.isArray(l.data.leaves)&&(S(l.data.leaves),k(l.data.leaves.length),_(1)))),g(),a([l.data.message||"Leave application submitted successfully"]))}catch(s){console.error(s),U(!1),s.response?(s.response.status===422?(te(s.response.data.errors||{}),t(s.response.data.error||"Failed to submit leave application")):t("An unexpected error occurred. Please try again later."),console.error(s.response.data.error)):s.request?(t("No response received from the server. Please check your internet connection."),console.error(s.request)):(t("An error occurred while setting up the request."),console.error("Error",s.message))}finally{U(!1)}});be.promise(d,{pending:{render(){return o("div",{style:{display:"flex",alignItems:"center"},children:[e(Ye,{}),e("span",{style:{marginLeft:"8px"},children:"Submitting leave application..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:m.glassCard.background,border:m.glassCard.border,color:m.palette.text.primary}},success:{render({data:a}){return e(Q,{children:a.map((t,s)=>e("div",{children:t},s))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:m.glassCard.background,border:m.glassCard.border,color:m.palette.text.primary}},error:{render({data:a}){return e(Q,{children:a})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:m.glassCard.background,border:m.glassCard.border,color:m.palette.text.primary}}})},children:[e(Ge,{children:o(E,{container:!0,spacing:2,children:[e(E,{item:!0,xs:12,md:6,children:o(Re,{fullWidth:!0,children:[e(je,{id:"leave-type-label",children:"Leave Type"}),o(Ue,{labelId:"leave-type-label",value:N||"",onChange:r=>O(r.target.value),label:"Leave Type",error:!!f.leaveType,disabled:!1,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:m.glassCard.background,border:m.glassCard.border,borderRadius:2,boxShadow:m.glassCard.boxShadow,maxHeight:300}}},children:[e(oe,{value:"",disabled:!0,children:"Select Leave Type"}),F.map(r=>{const d=$==null?void 0:$.find(s=>s.leave_type===r.type),t=(d?r.days-d.days_used:r.days)<=0;return e(oe,{value:r.type,disabled:t,title:t?"No remaining leaves available":"",children:o(u,{display:"flex",justifyContent:"space-between",width:"100%",children:[e("span",{children:r.type}),e("span",{children:d?`${d.days_used} / ${r.days} days`:`${r.days} days`})]})},r.id)})]}),e(ze,{children:f.leaveType})]})}),e(E,{item:!0,xs:12,md:6,children:e(J,{label:"From",type:"date",fullWidth:!0,value:R,onChange:r=>K(r.target.value),InputLabelProps:{shrink:!0},error:!!f.fromDate,helperText:f.fromDate})}),e(E,{item:!0,xs:12,md:6,children:e(J,{label:"To",type:"date",fullWidth:!0,value:I,onChange:r=>V(r.target.value),InputLabelProps:{shrink:!0},error:!!f.toDate,helperText:f.toDate})}),e(E,{item:!0,xs:12,md:6,children:e(J,{label:"Number of days",type:"text",fullWidth:!0,value:G,InputProps:{readOnly:!0},error:!!f.daysCount,helperText:f.daysCount})}),e(E,{item:!0,xs:12,md:6,children:e(J,{label:"Remaining Leaves",type:"text",fullWidth:!0,value:`${L} day${L!==1?"s":""}`,InputProps:{readOnly:!0,endAdornment:o(x,{variant:"caption",color:"textSecondary",sx:{ml:1},children:["of ",((re=F.find(r=>r.type===N))==null?void 0:re.days)||0," total"]})},error:!!f.remainingLeaves,helperText:f.remainingLeaves})}),route().current()==="leaves"&&e(E,{item:!0,xs:12,md:6,children:o(Re,{fullWidth:!0,children:[e(je,{id:"leave-employee-label",children:"Employee"}),o(Ue,{variant:"outlined",fullWidth:!0,labelId:"leave-employee-label",value:p||"na",error:!!f.user_id,onChange:r=>T(r.target.value),label:"Employee",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:m.glassCard.background,border:m.glassCard.border,borderRadius:2,boxShadow:m.glassCard.boxShadow}}},children:[e(oe,{value:"na",disabled:!0,children:"Please select"}),W.map(r=>e(oe,{value:r.id,children:o(u,{sx:{display:"flex"},children:[e(ca,{src:r.profile_image,alt:r.name||"Not assigned",sx:{borderRadius:"50%",width:23,height:23,display:"flex",mr:1}}),r.name]})},r.id))]}),e(ze,{children:f.user_id})]})}),e(E,{item:!0,xs:12,children:e(J,{label:"Leave Reason",multiline:!0,rows:4,fullWidth:!0,value:ee,onChange:r=>ae(r.target.value),error:!!f.leaveReason,helperText:f.leaveReason})})]})}),e(Ze,{sx:{padding:"16px",justifyContent:"center"},children:e(ma,{type:"submit",variant:"outlined",color:"primary",loading:Z,disabled:Z,sx:{borderRadius:"50px"},children:"Submit"})})]})]})},Ha=({open:C,closeModal:g,leaveId:h,setLeavesData:v,setLeaves:n,setTotalRows:W,setLastPage:k,setError:_,deleteLeaveOptimized:S,fetchLeavesStats:M})=>{const w=ye();return o(He,{open:C,onClose:g,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e(Oe,{id:"alert-dialog-title",children:"Confirm Deletion"}),e(Ge,{children:e(pa,{id:"alert-dialog-description",children:"Are you sure you want to delete this leave? This action cannot be undone."})}),o(Ze,{children:[e(Ae,{onClick:g,color:"primary",children:"Cancel"}),e(Ae,{onClick:()=>{const j=new Promise(async(y,q)=>{var H,m;try{const p=await axios.delete(route("leave-delete",{id:h,route:route().current()}));p.status===200&&(S?(S(h),W(T=>T-1),M()):(v(p.data.leavesData),W(p.data.leaves.total),k(p.data.leaves.last_page),n(p.data.leaves.data),_(!1),M()),y("Leave application deleted successfully"))}catch(p){if(console.error("Error deleting task:",p),p.response.status===404){const{leavesData:T}=p.response.data;v(T),_(((m=(H=p.response)==null?void 0:H.data)==null?void 0:m.message)||"Error retrieving data.")}q(p.response.data.error||"Failed to delete leave application")}finally{g()}});be.promise(j,{pending:{render(){return o("div",{style:{display:"flex",alignItems:"center"},children:[e(Ye,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting leave application..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:w.glassCard.background,border:w.glassCard.border,color:w.palette.text.primary}},success:{render({data:y}){return e(Q,{children:y})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:w.glassCard.background,border:w.glassCard.border,color:w.palette.text.primary}},error:{render({data:y}){return e(Q,{children:y})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:w.glassCard.background,border:w.glassCard.border,color:w.palette.text.primary}}})},color:"error",autoFocus:!0,children:"Delete"})]})]})};export{Ha as D,qa as L,ya as a};
